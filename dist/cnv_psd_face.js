import c from"sharp";c.cache(!1);import{fileURLToPath as l}from"node:url";import{styleText as s}from"node:util";import{readJson as m,writeJsonSync as p}from"fs-extra/esm";const d=l(import.meta.url),a=d+"on",g=process.cwd()+"/doc/prj/";function t(e,n=0){console.log(n===0?s(["bgGreen","black"],"  [OK] %o"):s(["bgRed","white"],"  [ERR] %o"),e),process.exit(n)}m(a,{encoding:"utf8"}).then(async e=>{try{let r=function(o,i=0){p(a,e,{encoding:"utf8"}),t(o,i)};var n=r;if(e.err){t(e.err,5);return}await Promise.allSettled(e.aOrder.map(({fp_tmp:o,extend:i,pp_out:f})=>c(o).extend(i).toFile(g+f))),r("\u7D42\u4E86\u3057\u307E\u3057\u305F")}catch(r){t(e.err=String(r),20)}}).catch(e=>{t(String(e),10)});
