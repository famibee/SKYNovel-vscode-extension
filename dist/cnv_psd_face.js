import c from"sharp";c.cache(!1);import{fileURLToPath as f}from"node:url";import{styleText as s}from"node:util";import{readJson as m,writeJsonSync as p}from"fs-extra/esm";const d=f(import.meta.url),a=d+"on",g=process.cwd()+"/doc/prj/";function i(e,o=0){console.log(o===0?s(["bgGreen","black"],"  [OK] %o"):s(["bgRed","white"],"  [ERR] %o"),e),process.exit(o)}m(a,{encoding:"utf8"}).then(async e=>{try{let t=function(r,n=0){p(a,e,{encoding:"utf8"}),i(r,n)};var o=t;await Promise.allSettled(e.aOrder.map(({fp_tmp:r,extend:n,pp_out:l})=>c(r).extend(n).toFile(g+l))),t("\u7D42\u4E86\u3057\u307E\u3057\u305F")}catch(t){i(e.err=String(t),20)}}).catch(e=>{i(String(e),10)});
