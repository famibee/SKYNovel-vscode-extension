{"version":3,"file":"src_ToolBox_ts.extension.js","mappings":"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","sources":[".././src/ToolBox.ts"],"sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2020-2025 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport {getNonce} from './ActivityBar';\n\nimport type {WebviewViewProvider, ExtensionContext, WebviewView, WebviewViewResolveContext, CancellationToken} from 'vscode';\nimport {Uri, window} from 'vscode';\n\ntype CTG_ACMD = {\n\tカテゴリ\t: string;\n\t要素: {\n\t\ticon\t: string;\n\t\tname\t: string;\n\t\tstyle?\t: string;\n\t\tscr\t\t: string;\n\t}[];\n}\n\n\nexport class ToolBox implements WebviewViewProvider {\n\tstatic\tinit(ctx: ExtensionContext): ToolBox {\n\t\tconst tl = new ToolBox(ctx);\n\t\tctx.subscriptions.push(window.registerWebviewViewProvider('skynovel-tb', tl));\n\t\treturn tl;\n\t}\n\n\treadonly\t#uriRes: Uri;\n\tprivate\tconstructor(readonly ctx: ExtensionContext) {\n\t\tthis.#uriRes = Uri.file(ctx.extensionPath +'/views');\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n/**/\tthis.#aCtgACmd0 = this.#aCtgACmd0 ?? [];\n\t}\n\n\treadonly #aCtgACmd\t: CTG_ACMD[]= [\n/**/\t]; readonly #aCtgACmd0 : CTG_ACMD[]= [\n\t\t// Solid Icons | Font Awesome https://fontawesome.com/icons?d=gallery&s=solid&m=free\n\t\t{カテゴリ: 'テキスト系', 要素: [\n\t\t\t{icon: 'fa-align-left', name: 'テキスト', style: 'btn-primary', scr: '[ch text=##]'},\n\t\t\t{icon: 'fa-comment', name: '表示', style: 'btn-primary', scr: '[txt_fi time=${ms}]'},\n\t\t\t{icon: 'fa-comment-slash', name: '消去', style: 'btn-outline-primary', scr: '[txt_fo time=${ms}]'},\n\t\t\t{icon: 'fa-ruler-combined', name: 'デザイン', style: 'btn-primary', scr: '[txt_cfg layer=${文字レイヤ名}]'},\n\t\t],},\n\t\t{カテゴリ: '背景・人物系', 要素: [\n\t\t\t{icon: 'fa-images', name: '背景切替', style: 'btn-success text-black', scr: '[bg_chg]'},\n\t\t\t{icon: 'fa-user', name: '人物登場・切替', style: 'btn-success text-black', scr: '[hu]'},\n\t\t\t{icon: 'fa-user-slash', name: '人物退場', style: 'btn-outline-success', scr: '[hu_hide]'},\n\t\t\t{icon: 'fa-running', name: '人物移動', style: 'btn-success text-black', scr: '[hu_mov]'},\n\t\t\t{icon: 'fa-door-open', name: '場面転換', style: 'btn-success text-black', scr: '[scene_change bg=${画像レイヤ名:bg} time=1000]'},\n\t\t\t{icon: 'fa-user-ninja', name: '場面準備', style: 'btn-success btn-rounded text-black', scr: '[scene_reserve layer=0 fn=${画像ファイル名} alpha=1]'},\n\t\t],},\n\t\t{カテゴリ: '音系', 要素: [\n\t\t\t{icon: 'fa-play', name: 'BGM再生', style: 'btn-info text-black', scr: '[bgm fn=${ＢＧＭファイル名} time=${ms}]'},\n\t\t\t{icon: 'fa-stop', name: 'BGM停止', style: 'btn-outline-info', scr: '[fadeoutbgm time=${ms}'},\n\t\t\t{icon: 'fa-bell', name: '効果音再生', style: 'btn-warning text-black', scr: '[se fn=${音声ファイル名}]'},\n\t\t\t{icon: 'fa-bell-slash', name: '効果音停止', style: 'btn-outline-warning', scr: ''},\n\t\t],},\n\t\t{カテゴリ: '選択肢やジャンプ系', 要素: [\n\t\t\t{icon: 'fa-project-diagram', name: '選択肢', style: 'btn-primary', scr: ''},\n\t\t\t{icon: 'fa-tag', name: 'ラベル', style: 'btn-outline-light', scr: '*（ラベル名宣言）'},\n\t\t\t{icon: 'fa-stop', name: '停止', style: 'btn-primary', scr: '[s]'},\n\t\t\t{icon: 'fa-external-link-alt', name: 'ジャンプ', scr: '[jump fn=${ファイル名} label=${ラベル名}]'},\n\t\t\t{icon: 'fa-exchange-alt', name: 'コール', scr: '[call fn=${ファイル名} label=${ラベル名}]'},\n\t\t\t{icon: 'fa-long-arrow-alt-left', name: '戻る', scr: '[return]'},\n\t\t],},\n\t\t{カテゴリ: '演出・その他', 要素: [\n\t\t\t{icon: '', name: '空行', style: 'btn-outline-primary', scr: '\\n\\n'},\n\t\t\t{icon: 'fa-comment-dots', name: 'コメント', style: 'btn-outline-light btn-rounded', scr: ';（コメント）'},\n\t\t\t{icon: 'fa-hourglass-start', name: '待機', style: 'btn-primary', scr: ''},\n\t\t\t{icon: 'fa-bolt', name: '振動', scr: '[quake time=${時間ms}]'},\n\t\t\t{icon: 'fa-th', name: 'アルバム解放', scr: '[アルバム解放 name=$$$]'},\n\t\t\t{icon: 'fa-calculator', name: '変数操作', style: 'btn-secondary', scr: '[let name=${代入変数名} text=#設定したい値#]'},\n\t\t\t{icon: 'fa-code', name: 'タグ・マクロ', style: 'btn-light', scr: ''},\n\t\t],},\n\t];\n\n\tresolveWebviewView(wvv: WebviewView, _ctx: WebviewViewResolveContext, _token: CancellationToken) {\n\t\tconst wv = wvv.webview;\n\t\twv.options = {\n\t\t\tenableScripts: true,\n\t\t\tlocalResourceRoots: [this.#uriRes],\n\t\t};\n\t\tconst nonce = getNonce();\n\t\tconst uri = wv.asWebviewUri(this.#uriRes);\n\t\tconst {path} = uri;\n\t\twv.html = `<!doctype html><html>\n<head><meta charset=\"utf-8\"/>\n<title>スコア ツールボックス</title>\n<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; img-src data: ${wv.cspSource} https:; script-src 'nonce-${nonce}' ${wv.cspSource}; style-src ${wv.cspSource} 'unsafe-inline'; font-src ${wv.cspSource};\"/>\n<link rel=\"stylesheet\" href=\"${path}/lib/bootstrap.min.css\">\n<link rel=\"stylesheet\" href=\"${path}/lib/bootstrap2vscode.css\">\n<link rel=\"stylesheet\" href=\"${path}/lib/fontawesome/all.min.css\">\n<style>\n\tbody {\n\t\tpadding: 0 var(--container-paddding);\n\t\tcolor: var(--vscode-foreground);\n\t\tfont-size: var(--vscode-font-size);\n\t\tfont-weight: var(--vscode-font-weight);\n\t\tfont-family: var(--vscode-font-family);\n\t\tbackground-color: var(--vscode-editor-background);\n\t}\n\t.btn {text-transform: none; font-size: 14px;}\n</style>\n<script defer nonce=\"${nonce}\" src=\"${path}/lib/bootstrap.bundle.min.js\"></script>\n<script defer nonce=\"${nonce}\" src=\"${path}/lib/fontawesome/all.min.js\"></script>\n<script defer nonce=\"${nonce}\" src=\"${path}/toolbox.js\"></script>\n</head>\n<body>\n\n`+ this.#aCtgACmd.map(v=> {\n\treturn v.カテゴリ +`\n<div class=\"d-flex flex-wrap\">`\n\t+ v.要素.map(vv=> `\n\t<button id=\"${vv.name}\" type=\"button\" class=\"btn ${vv.style ?? 'btn-secondary'} btn-sm text-start p-2 mt-1 mr-1\" data-ripple-color=\"dark\" draggable=\"true\" data-scr=\"${encodeURIComponent(vv.scr)}\">\n\t\t<i class=\"fas ${vv.icon}\"></i>\n\t\t${vv.name}\n\t</button>`).join('')+ `\n</div>`;\n}).join('') +`\n\n</body>\n</html>`;\n\n\t\twvv.webview.onDidReceiveMessage(({cmd, text}: {cmd: string; text: string;})=> {\n\t\t\tswitch (cmd) {\n\t\t\tcase 'info':\twindow.showInformationMessage(text); break;\n\t\t\tcase 'warn':\twindow.showWarningMessage(text); break;\n\t\t\t}\n\t\t}, false);\n\t}\n\n\tdispose() { /* empty */ }\n\n}\n"],"names":[],"sourceRoot":""}