!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("vscode"));else if("function"==typeof define&&define.amd)define(["vscode"],t);else{var n="object"==typeof exports?t(require("vscode")):t(e.vscode);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(global,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=40)}([function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r)try{r=n(11)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},o=a.lib={},c=o.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=o.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++){var a=n[s>>>2]>>>24-s%4*8&255;t[r+s>>>2]|=a<<24-(r+s)%4*8}else for(s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new l.init(t,e)}}),u=a.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},m=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(m.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return m.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,s=r.sigBytes,a=this.blockSize,o=s/(4*a),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,u=e.min(4*c,s);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(i,d);n=i.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(o.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)},function(e,t){e.exports=require("path")},function(e,t,n){var r,i,s,a,o,c,l,u,d,m,h,p,f,g,y,v,b,S,_;e.exports=(r=n(0),n(10),void(r.lib.Cipher||(i=r,s=i.lib,a=s.Base,o=s.WordArray,c=s.BufferedBlockAlgorithm,l=i.enc,l.Utf8,u=l.Base64,d=i.algo.EvpKDF,m=s.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:b}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),s.StreamCipher=m.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=i.mode={},p=s.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=h.CBC=function(){var e=p.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var s=0;s<n;s++)e[t+s]^=r[s]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,s=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=s}}),e}(),g=(i.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,s=[],a=0;a<r;a+=4)s.push(i);var c=o.create(s,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.BlockCipher=m.extend({cfg:m.cfg.extend({mode:f,padding:g}),reset:function(){var e;m.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),y=s.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?o.create([1398893684,1701076831]).concat(n).concat(t):t).toString(u)},parse:function(e){var t,n=u.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),y.create({ciphertext:n,salt:t})}},b=s.SerializableCipher=a.extend({cfg:a.extend({format:v}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),s=i.finalize(t),a=i.cfg;return y.create({ciphertext:s,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),S=(i.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=o.random(8));var i=d.create({keySize:t+n}).compute(e,r),s=o.create(i.words.slice(t),4*n);return i.sigBytes=4*t,y.create({key:i,iv:s,salt:r})}},_=s.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:S}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var s=b.encrypt.call(this,e,t,i.key,r);return s.mixIn(i),s},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,b.decrypt.call(this,e,t,i.key,r)}}))))},function(e,t,n){var r,i,s=n(7),a=n(42),o=n(44),c=n(45),l=n(19);function u(e,t){Object.defineProperty(e,r,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(r=Symbol.for("graceful-fs.queue"),i=Symbol.for("graceful-fs.previous")):(r="___graceful-fs.queue",i="___graceful-fs.previous");var d=function(){};if(l.debuglog?d=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(d=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!s[r]){var m=global[r]||[];u(s,m),s.close=function(e){function t(t,n){return e.call(s,t,(function(e){e||f(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(t,i,{value:e}),t}(s.close),s.closeSync=function(e){function t(t){e.apply(s,arguments),f()}return Object.defineProperty(t,i,{value:e}),t}(s.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){d(s[r]),n(28).equal(s[r].length,0)}))}function h(e){a(e),e.gracefulify=h,e.createReadStream=function(t,n){return new e.ReadStream(t,n)},e.createWriteStream=function(t,n){return new e.WriteStream(t,n)};var t=e.readFile;e.readFile=function(e,n,r){"function"==typeof n&&(r=n,n=null);return function e(n,r,i){return t(n,r,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof i&&i.apply(this,arguments),f()):p([e,[n,r,i]])}))}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function e(t,r,i,s){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof s&&s.apply(this,arguments),f()):p([e,[t,r,i,s]])}))}(e,t,r,i)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function e(t,n,i,s){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof s&&s.apply(this,arguments),f()):p([e,[t,n,i,s]])}))}(e,t,n,i)});var i=e.readdir;function s(t){return i.apply(e,t)}if(e.readdir=function(e,t,n){var r=[e];"function"!=typeof t?r.push(t):n=t;return r.push((function(e,t){t&&t.sort&&t.sort();!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof n&&n.apply(this,arguments),f()):p([s,[r]])})),s(r)},"v0.8"===process.version.substr(0,4)){var c=o(e);g=c.ReadStream,y=c.WriteStream}var l=e.ReadStream;l&&(g.prototype=Object.create(l.prototype),g.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,(function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())}))});var u=e.WriteStream;u&&(y.prototype=Object.create(u.prototype),y.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,(function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return g},set:function(e){g=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return y},set:function(e){y=e},enumerable:!0,configurable:!0});var d=g;Object.defineProperty(e,"FileReadStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var m=y;function g(e,t){return this instanceof g?(l.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function y(e,t){return this instanceof y?(u.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return m},set:function(e){m=e},enumerable:!0,configurable:!0});var v=e.open;function b(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,i){return v(t,n,r,(function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?("function"==typeof i&&i.apply(this,arguments),f()):p([e,[t,n,r,i]])}))}(e,t,n,r)}return e.open=b,e}function p(e){d("ENQUEUE",e[0].name,e[1]),s[r].push(e)}function f(){var e=s[r].shift();e&&(d("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}global[r]||u(global,s[r]),e.exports=h(c(s)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!s.__patched&&(e.exports=h(s),s.__patched=!0)},function(e,t,n){"use strict";t.fromCallback=function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise((n,r)=>{e.apply(this,t.concat([(e,t)=>e?r(e):n(t)]))});e.apply(this,t)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(...t){const n=t[t.length-1];if("function"!=typeof n)return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(e=>n(null,e),n)}),"name",{value:e.name})}},function(e,t,n){"use strict";const r=n(4).fromPromise,{makeDir:i,makeDirSync:s}=n(47),a=r(i);e.exports={mkdirs:a,mkdirsSync:s,mkdirp:a,mkdirpSync:s,ensureDir:a,ensureDirSync:s}},function(t,n){t.exports=e},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CmnLib=t.replaceFile=t.foldProc=t.treeProc=t.regNoUseSysPath=t.statBreak=t.is_mac=t.is_win=t.oIcon=t.setCtx4=t.uint=void 0;const r=n(6);t.uint=function(e){const t=parseInt(String(e),10);return t<0?-t:t},t.setCtx4=function(e){i=e.extensionPath};let i="";t.oIcon=function(e){return{light:`${i}/res/light/${e}.svg`,dark:`${i}/res/dark/${e}.svg`}},t.is_win="win32"===process.platform,t.is_mac="darwin"===process.platform,t.statBreak=t.is_mac?()=>"&&":t.is_win?()=>"cmd.exe"===String(r.workspace.getConfiguration("terminal.integrated.shell").get("windows")).slice(7)?"&":";":()=>";";const s=n(12),a=n(1),o=/^(\..+|.+.db|.+.ini|_notes|Icon\r)$/;t.regNoUseSysPath=/\/(\..+|.+.db|.+.ini|_notes|Icon\r)$/,t.treeProc=function e(t,n){s.readdirSync(t,{withFileTypes:!0}).forEach(r=>{o.lastIndex=0;const i=String(r.name).normalize("NFC");if(o.test(i))return;const s=a.resolve(t,i);r.isDirectory()?e(s,n):n(s)})},t.foldProc=function(e,t,n){s.readdirSync(e,{withFileTypes:!0}).forEach(r=>{o.lastIndex=0;const i=String(r.name).normalize("NFC");if(o.test(i))return;if(r.isDirectory())return void n(i);const s=a.resolve(e,i);t(s,i)})},t.replaceFile=async function(e,t,n,r=e){try{if(!s.existsSync(e))return;const i=await s.readFile(e,{encoding:"utf8"}),a=String(i.replace(t,n));i!=a&&await s.outputFile(r,a)}catch(t){console.error(`replaceFile src:${e} ${t}`)}};class c{}t.CmnLib=c,c.getFn=e=>a.basename(e,a.extname(e))},function(e,t,n){"use strict";const r=n(4).fromPromise,i=n(15);e.exports={pathExists:r((function(e){return i.access(e).then(()=>!0).catch(()=>!1)})),pathExistsSync:i.existsSync}},function(e,t,n){var r,i,s,a,o,c,l,u;e.exports=(u=n(0),n(25),n(26),i=(r=u).lib,s=i.Base,a=i.WordArray,o=r.algo,c=o.MD5,l=o.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),s=a.create(),o=s.words,c=r.keySize,l=r.iterations;o.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var u=1;u<l;u++)n=i.finalize(n),i.reset();s.concat(n)}return s.sigBytes=4*c,s}}),r.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)},u.EvpKDF)},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";e.exports={...n(15),...n(29),...n(32),...n(49),...n(51),...n(57),...n(5),...n(62),...n(64),...n(21),...n(9),...n(17)};const r=n(7);Object.getOwnPropertyDescriptor(r,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>r.promises})},function(e,t,n){var r,i,s;e.exports=(s=n(0),i=(r=s).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],s=0;s<n;s+=3)for(var a=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;o<4&&s+.75*o<n;o++)i.push(r.charAt(a>>>6*(3-o)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var s=0;s<n.length;s++)r[n.charCodeAt(s)]=s}var a=n.charAt(64);if(a){var o=e.indexOf(a);-1!==o&&(t=o)}return function(e,t,n){for(var r=[],s=0,a=0;a<t;a++)if(a%4){var o=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2,l=o|c;r[s>>>2]|=l<<24-s%4*8,s++}return i.create(r,s)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},s.enc.Base64)},function(e,t,n){var r;e.exports=(r=n(0),function(e){var t=r,n=t.lib,i=n.WordArray,s=n.Hasher,a=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,a=e[t+0],c=e[t+1],h=e[t+2],p=e[t+3],f=e[t+4],g=e[t+5],y=e[t+6],v=e[t+7],b=e[t+8],S=e[t+9],_=e[t+10],w=e[t+11],x=e[t+12],k=e[t+13],E=e[t+14],P=e[t+15],q=s[0],T=s[1],$=s[2],R=s[3];q=l(q,T,$,R,a,7,o[0]),R=l(R,q,T,$,c,12,o[1]),$=l($,R,q,T,h,17,o[2]),T=l(T,$,R,q,p,22,o[3]),q=l(q,T,$,R,f,7,o[4]),R=l(R,q,T,$,g,12,o[5]),$=l($,R,q,T,y,17,o[6]),T=l(T,$,R,q,v,22,o[7]),q=l(q,T,$,R,b,7,o[8]),R=l(R,q,T,$,S,12,o[9]),$=l($,R,q,T,_,17,o[10]),T=l(T,$,R,q,w,22,o[11]),q=l(q,T,$,R,x,7,o[12]),R=l(R,q,T,$,k,12,o[13]),$=l($,R,q,T,E,17,o[14]),q=u(q,T=l(T,$,R,q,P,22,o[15]),$,R,c,5,o[16]),R=u(R,q,T,$,y,9,o[17]),$=u($,R,q,T,w,14,o[18]),T=u(T,$,R,q,a,20,o[19]),q=u(q,T,$,R,g,5,o[20]),R=u(R,q,T,$,_,9,o[21]),$=u($,R,q,T,P,14,o[22]),T=u(T,$,R,q,f,20,o[23]),q=u(q,T,$,R,S,5,o[24]),R=u(R,q,T,$,E,9,o[25]),$=u($,R,q,T,p,14,o[26]),T=u(T,$,R,q,b,20,o[27]),q=u(q,T,$,R,k,5,o[28]),R=u(R,q,T,$,h,9,o[29]),$=u($,R,q,T,v,14,o[30]),q=d(q,T=u(T,$,R,q,x,20,o[31]),$,R,g,4,o[32]),R=d(R,q,T,$,b,11,o[33]),$=d($,R,q,T,w,16,o[34]),T=d(T,$,R,q,E,23,o[35]),q=d(q,T,$,R,c,4,o[36]),R=d(R,q,T,$,f,11,o[37]),$=d($,R,q,T,v,16,o[38]),T=d(T,$,R,q,_,23,o[39]),q=d(q,T,$,R,k,4,o[40]),R=d(R,q,T,$,a,11,o[41]),$=d($,R,q,T,p,16,o[42]),T=d(T,$,R,q,y,23,o[43]),q=d(q,T,$,R,S,4,o[44]),R=d(R,q,T,$,x,11,o[45]),$=d($,R,q,T,P,16,o[46]),q=m(q,T=d(T,$,R,q,h,23,o[47]),$,R,a,6,o[48]),R=m(R,q,T,$,v,10,o[49]),$=m($,R,q,T,E,15,o[50]),T=m(T,$,R,q,g,21,o[51]),q=m(q,T,$,R,x,6,o[52]),R=m(R,q,T,$,p,10,o[53]),$=m($,R,q,T,_,15,o[54]),T=m(T,$,R,q,c,21,o[55]),q=m(q,T,$,R,b,6,o[56]),R=m(R,q,T,$,P,10,o[57]),$=m($,R,q,T,y,15,o[58]),T=m(T,$,R,q,k,21,o[59]),q=m(q,T,$,R,f,6,o[60]),R=m(R,q,T,$,w,10,o[61]),$=m($,R,q,T,h,15,o[62]),T=m(T,$,R,q,S,21,o[63]),s[0]=s[0]+q|0,s[1]=s[1]+T|0,s[2]=s[2]+$|0,s[3]=s[3]+R|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var o=this._hash,c=o.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,i,s,a){var o=e+(t&n|~t&r)+i+a;return(o<<s|o>>>32-s)+t}function u(e,t,n,r,i,s,a){var o=e+(t&r|n&~r)+i+a;return(o<<s|o>>>32-s)+t}function d(e,t,n,r,i,s,a){var o=e+(t^n^r)+i+a;return(o<<s|o>>>32-s)+t}function m(e,t,n,r,i,s,a){var o=e+(n^(t|~r))+i+a;return(o<<s|o>>>32-s)+t}t.MD5=s._createHelper(c),t.HmacMD5=s._createHmacHelper(c)}(Math),r.MD5)},function(e,t,n){"use strict";const r=n(4).fromCallback,i=n(3),s=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof i[e]);Object.keys(i).forEach(e=>{"promises"!==e&&(t[e]=i[e])}),s.forEach(e=>{t[e]=r(i[e])}),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise(t=>i.exists(e,t))},t.read=function(e,t,n,r,s,a){return"function"==typeof a?i.read(e,t,n,r,s,a):new Promise((a,o)=>{i.read(e,t,n,r,s,(e,t,n)=>{if(e)return o(e);a({bytesRead:t,buffer:n})})})},t.write=function(e,t,...n){return"function"==typeof n[n.length-1]?i.write(e,t,...n):new Promise((r,s)=>{i.write(e,t,...n,(e,t,n)=>{if(e)return s(e);r({bytesWritten:t,buffer:n})})})},"function"==typeof i.writev&&(t.writev=function(e,t,...n){return"function"==typeof n[n.length-1]?i.writev(e,t,...n):new Promise((r,s)=>{i.writev(e,t,...n,(e,t,n)=>{if(e)return s(e);r({bytesWritten:t,buffers:n})})})}),"function"==typeof i.realpath.native&&(t.realpath.native=r(i.realpath.native))},function(e,t,n){"use strict";const r=n(15),i=n(1),s=n(19),a=n(30)("10.5.0"),o=e=>a?r.stat(e,{bigint:!0}):r.stat(e),c=e=>a?r.statSync(e,{bigint:!0}):r.statSync(e);function l(e,t){return Promise.all([o(e),o(t).catch(e=>{if("ENOENT"===e.code)return null;throw e})]).then(([e,t])=>({srcStat:e,destStat:t}))}function u(e,t){if(t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev){if(a||t.ino<Number.MAX_SAFE_INTEGER)return!0;if(t.size===e.size&&t.mode===e.mode&&t.nlink===e.nlink&&t.atimeMs===e.atimeMs&&t.mtimeMs===e.mtimeMs&&t.ctimeMs===e.ctimeMs&&t.birthtimeMs===e.birthtimeMs)return!0}return!1}function d(e,t){const n=i.resolve(e).split(i.sep).filter(e=>e),r=i.resolve(t).split(i.sep).filter(e=>e);return n.reduce((e,t,n)=>e&&r[n]===t,!0)}function m(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:function(e,t,n,r){s.callbackify(l)(e,t,(i,s)=>{if(i)return r(i);const{srcStat:a,destStat:o}=s;return o&&u(a,o)?r(new Error("Source and destination must not be the same.")):a.isDirectory()&&d(e,t)?r(new Error(m(e,t,n))):r(null,{srcStat:a,destStat:o})})},checkPathsSync:function(e,t,n){const{srcStat:r,destStat:i}=function(e,t){let n;const r=c(e);try{n=c(t)}catch(e){if("ENOENT"===e.code)return{srcStat:r,destStat:null};throw e}return{srcStat:r,destStat:n}}(e,t);if(i&&u(r,i))throw new Error("Source and destination must not be the same.");if(r.isDirectory()&&d(e,t))throw new Error(m(e,t,n));return{srcStat:r,destStat:i}},checkParentPaths:function e(t,n,s,o,c){const l=i.resolve(i.dirname(t)),d=i.resolve(i.dirname(s));if(d===l||d===i.parse(d).root)return c();const h=(r,i)=>r?"ENOENT"===r.code?c():c(r):u(n,i)?c(new Error(m(t,s,o))):e(t,n,d,o,c);a?r.stat(d,{bigint:!0},h):r.stat(d,h)},checkParentPathsSync:function e(t,n,r,s){const a=i.resolve(i.dirname(t)),o=i.resolve(i.dirname(r));if(o===a||o===i.parse(o).root)return;let l;try{l=c(o)}catch(e){if("ENOENT"===e.code)return;throw e}if(u(n,l))throw new Error(m(t,r,s));return e(t,n,o,s)},isSrcSubdir:d}},function(e,t,n){"use strict";const r=n(4).fromCallback,i=n(50);e.exports={remove:r(i),removeSync:i.sync}},function(e,t,n){var r,i,s,a,o,c;e.exports=(c=n(0),i=(r=c).lib,s=i.Base,a=i.WordArray,(o=r.x64={}).Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),c)},function(e,t){e.exports=require("util")},function(e,t){e.exports={stringify:function(e,t={}){const n=t.EOL||"\n";return JSON.stringify(e,t?t.replacer:null,t.spaces).replace(/\n/g,n)+n},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},function(e,t,n){"use strict";const r=n(4).fromCallback,i=n(3),s=n(1),a=n(5),o=n(9).pathExists;e.exports={outputFile:r((function(e,t,n,r){"function"==typeof n&&(r=n,n="utf8");const c=s.dirname(e);o(c,(s,o)=>s?r(s):o?i.writeFile(e,t,n,r):void a.mkdirs(c,s=>{if(s)return r(s);i.writeFile(e,t,n,r)}))})),outputFileSync:function(e,...t){const n=s.dirname(e);if(i.existsSync(n))return i.writeFileSync(e,...t);a.mkdirsSync(n),i.writeFileSync(e,...t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(73),i=n(24),s=n(33),a=n(74);t.Source=class{constructor(e,t,n=0,r,i){this.name=e,this.path=t,this.sourceReference=n,r&&(this.origin=r),i&&(this.adapterData=i)}};t.Scope=class{constructor(e,t,n=!1){this.name=e,this.variablesReference=t,this.expensive=n}};t.StackFrame=class{constructor(e,t,n,r=0,i=0){this.id=e,this.source=n,this.line=r,this.column=i,this.name=t}};t.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}};t.Variable=class{constructor(e,t,n=0,r,i){this.name=e,this.value=t,this.variablesReference=n,"number"==typeof i&&(this.namedVariables=i),"number"==typeof r&&(this.indexedVariables=r)}};t.Breakpoint=class{constructor(e,t,n,r){this.verified=e;const i=this;"number"==typeof t&&(i.line=t),"number"==typeof n&&(i.column=n),r&&(i.source=r)}};t.Module=class{constructor(e,t){this.id=e,this.name=t}};t.CompletionItem=class{constructor(e,t,n=0){this.label=e,this.start=t,this.length=n}};class o extends i.Event{constructor(e,t,n){super("stopped"),this.body={reason:e},"number"==typeof t&&(this.body.threadId=t),"string"==typeof n&&(this.body.text=n)}}t.StoppedEvent=o;class c extends i.Event{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}}t.ContinuedEvent=c;class l extends i.Event{constructor(){super("initialized")}}t.InitializedEvent=l;class u extends i.Event{constructor(e){if(super("terminated"),"boolean"==typeof e||e){this.body={restart:e}}}}t.TerminatedEvent=u;class d extends i.Event{constructor(e,t="console",n){super("output"),this.body={category:t,output:e},void 0!==n&&(this.body.data=n)}}t.OutputEvent=d;class m extends i.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}}t.ThreadEvent=m;class h extends i.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}}t.BreakpointEvent=h;class p extends i.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}}t.ModuleEvent=p;class f extends i.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}}t.LoadedSourceEvent=f;class g extends i.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}}t.CapabilitiesEvent=g;class y extends i.Event{constructor(e,t,n){super("progressStart"),this.body={progressId:e,title:t},"string"==typeof n&&(this.body.message=n)}}t.ProgressStartEvent=y;class v extends i.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressUpdateEvent=v;class b extends i.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}var S;t.ProgressEndEvent=b,function(e){e[e.User=1]="User",e[e.Telemetry=2]="Telemetry"}(S=t.ErrorDestination||(t.ErrorDestination={}));class _ extends r.ProtocolServer{constructor(e,t){super();const n="boolean"==typeof e&&e;this._debuggerLinesStartAt1=n,this._debuggerColumnsStartAt1=n,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer="boolean"==typeof t&&t,this.on("close",()=>{this.shutdown()}),this.on("error",e=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs="path"!==e}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){let t=0;if(process.argv.slice(2).forEach((function(e,n,r){const i=/^--server=(\d{4,5})$/.exec(e);i&&(t=parseInt(i[1],10))})),t>0)console.error("waiting for debug protocol on port "+t),s.createServer(t=>{console.error(">> accepted connection from client"),t.on("end",()=>{console.error(">> client connection closed\n")});const n=new e(!1,!0);n.setRunAsServer(!0),n.start(t,t)}).listen(t);else{const t=new e(!1);process.on("SIGTERM",()=>{t.shutdown()}),t.start(process.stdin,process.stdout)}}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,n,r,i=S.User){let s;"number"==typeof t?(s={id:t,format:n},r&&(s.variables=r),i&S.User&&(s.showUser=!0),i&S.Telemetry&&(s.sendTelemetry=!0)):s=t,e.success=!1,e.message=_.formatPII(s.format,!0,s.variables),e.body||(e.body={}),e.body.error=s,this.sendResponse(e)}runInTerminalRequest(e,t,n){this.sendRequest("runInTerminal",e,t,n)}dispatchRequest(e){const t=new i.Response(e);try{if("initialize"===e.command){var n=e.arguments;if("boolean"==typeof n.linesStartAt1&&(this._clientLinesStartAt1=n.linesStartAt1),"boolean"==typeof n.columnsStartAt1&&(this._clientColumnsStartAt1=n.columnsStartAt1),"path"!==n.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,S.Telemetry);else{const e=t;e.body={},this.initializeRequest(e,n)}}else"launch"===e.command?this.launchRequest(t,e.arguments,e):"attach"===e.command?this.attachRequest(t,e.arguments,e):"disconnect"===e.command?this.disconnectRequest(t,e.arguments,e):"terminate"===e.command?this.terminateRequest(t,e.arguments,e):"restart"===e.command?this.restartRequest(t,e.arguments,e):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments,e):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments,e):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments,e):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments,e):"continue"===e.command?this.continueRequest(t,e.arguments,e):"next"===e.command?this.nextRequest(t,e.arguments,e):"stepIn"===e.command?this.stepInRequest(t,e.arguments,e):"stepOut"===e.command?this.stepOutRequest(t,e.arguments,e):"stepBack"===e.command?this.stepBackRequest(t,e.arguments,e):"reverseContinue"===e.command?this.reverseContinueRequest(t,e.arguments,e):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments,e):"goto"===e.command?this.gotoRequest(t,e.arguments,e):"pause"===e.command?this.pauseRequest(t,e.arguments,e):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments,e):"scopes"===e.command?this.scopesRequest(t,e.arguments,e):"variables"===e.command?this.variablesRequest(t,e.arguments,e):"setVariable"===e.command?this.setVariableRequest(t,e.arguments,e):"setExpression"===e.command?this.setExpressionRequest(t,e.arguments,e):"source"===e.command?this.sourceRequest(t,e.arguments,e):"threads"===e.command?this.threadsRequest(t,e):"terminateThreads"===e.command?this.terminateThreadsRequest(t,e.arguments,e):"evaluate"===e.command?this.evaluateRequest(t,e.arguments,e):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments,e):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments,e):"completions"===e.command?this.completionsRequest(t,e.arguments,e):"exceptionInfo"===e.command?this.exceptionInfoRequest(t,e.arguments,e):"loadedSources"===e.command?this.loadedSourcesRequest(t,e.arguments,e):"dataBreakpointInfo"===e.command?this.dataBreakpointInfoRequest(t,e.arguments,e):"setDataBreakpoints"===e.command?this.setDataBreakpointsRequest(t,e.arguments,e):"readMemory"===e.command?this.readMemoryRequest(t,e.arguments,e):"disassemble"===e.command?this.disassembleRequest(t,e.arguments,e):"cancel"===e.command?this.cancelRequest(t,e.arguments,e):"breakpointLocations"===e.command?this.breakpointLocationsRequest(t,e.arguments,e):"setInstructionBreakpoints"===e.command?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack},S.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,this.sendResponse(e)}disconnectRequest(e,t,n){this.sendResponse(e),this.shutdown()}launchRequest(e,t,n){this.sendResponse(e)}attachRequest(e,t,n){this.sendResponse(e)}terminateRequest(e,t,n){this.sendResponse(e)}restartRequest(e,t,n){this.sendResponse(e)}setBreakPointsRequest(e,t,n){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,n){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,n){this.sendResponse(e)}configurationDoneRequest(e,t,n){this.sendResponse(e)}continueRequest(e,t,n){this.sendResponse(e)}nextRequest(e,t,n){this.sendResponse(e)}stepInRequest(e,t,n){this.sendResponse(e)}stepOutRequest(e,t,n){this.sendResponse(e)}stepBackRequest(e,t,n){this.sendResponse(e)}reverseContinueRequest(e,t,n){this.sendResponse(e)}restartFrameRequest(e,t,n){this.sendResponse(e)}gotoRequest(e,t,n){this.sendResponse(e)}pauseRequest(e,t,n){this.sendResponse(e)}sourceRequest(e,t,n){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,n){this.sendResponse(e)}stackTraceRequest(e,t,n){this.sendResponse(e)}scopesRequest(e,t,n){this.sendResponse(e)}variablesRequest(e,t,n){this.sendResponse(e)}setVariableRequest(e,t,n){this.sendResponse(e)}setExpressionRequest(e,t,n){this.sendResponse(e)}evaluateRequest(e,t,n){this.sendResponse(e)}stepInTargetsRequest(e,t,n){this.sendResponse(e)}gotoTargetsRequest(e,t,n){this.sendResponse(e)}completionsRequest(e,t,n){this.sendResponse(e)}exceptionInfoRequest(e,t,n){this.sendResponse(e)}loadedSourcesRequest(e,t,n){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,n){this.sendResponse(e)}setDataBreakpointsRequest(e,t,n){this.sendResponse(e)}readMemoryRequest(e,t,n){this.sendResponse(e)}disassembleRequest(e,t,n){this.sendResponse(e)}cancelRequest(e,t,n){this.sendResponse(e)}breakpointLocationsRequest(e,t,n){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,n){this.sendResponse(e)}customRequest(e,t,n,r){this.sendErrorResponse(t,1014,"unrecognized request",null,S.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?_.uri2path(e):_.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?_.uri2path(e):_.path2uri(e):e}static path2uri(e){"win32"===process.platform&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new a.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new a.URL(e),n=decodeURIComponent(t.pathname);return"win32"===process.platform&&(/^\/[a-zA-Z]:/.test(n)&&(n=n[1].toLowerCase()+n.substr(2)),n=n.replace(/\//g,"\\")),n}static formatPII(e,t,n){return e.replace(_._formatPIIRegexp,(function(e,r){return t&&r.length>0&&"_"!==r[0]?e:n[r]&&n.hasOwnProperty(r)?n[r]:e}))}}_._formatPIIRegexp=/{([^}]+)}/g,t.DebugSession=_},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.seq=0,this.type=e}}t.Message=r;t.Response=class extends r{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};t.Event=class extends r{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}},function(e,t,n){var r,i,s,a,o,c,l,u;e.exports=(u=n(0),i=(r=u).lib,s=i.WordArray,a=i.Hasher,o=r.algo,c=[],l=o.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var d=(r<<5|r>>>27)+o+c[l];d+=l<20?1518500249+(i&s|~i&a):l<40?1859775393+(i^s^a):l<60?(i&s|i&a|s&a)-1894007588:(i^s^a)-899497514,o=a,a=s,s=i<<30|i>>>2,i=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=a._createHelper(l),r.HmacSHA1=a._createHmacHelper(l),u.SHA1)},function(e,t,n){var r,i,s,a;e.exports=(r=n(0),s=(i=r).lib.Base,a=i.enc.Utf8,void(i.algo.HMAC=s.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),o=i.words,c=s.words,l=0;l<n;l++)o[l]^=1549556828,c[l]^=909522486;i.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";e.exports={copySync:n(46)}},function(e,t){e.exports=e=>{const t=process.versions.node.split(".").map(e=>parseInt(e,10));return e=e.split(".").map(e=>parseInt(e,10)),t[0]>e[0]||t[0]===e[0]&&(t[1]>e[1]||t[1]===e[1]&&t[2]>=e[2])}},function(e,t,n){"use strict";const r=n(3);e.exports={utimesMillis:function(e,t,n,i){r.open(e,"r+",(e,s)=>{if(e)return i(e);r.futimes(s,t,n,e=>{r.close(s,t=>{i&&i(e||t)})})})},utimesMillisSync:function(e,t,n){const i=r.openSync(e,"r+");return r.futimesSync(i,t,n),r.closeSync(i)}}},function(e,t,n){"use strict";const r=n(4).fromCallback;e.exports={copy:r(n(48))}},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{c(r.next(e))}catch(e){s(e)}}function o(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,o)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),s=n(1),a=n(76),o=n(22);var c;!function(e){e[e.Verbose=0]="Verbose",e[e.Log=1]="Log",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Stop=4]="Stop"}(c=t.LogLevel||(t.LogLevel={}));class l{constructor(){this._pendingLogQ=[]}log(e,t=c.Log){e+="\n",this._write(e,t)}verbose(e){this.log(e,c.Verbose)}warn(e){this.log(e,c.Warn)}error(e){this.log(e,c.Error)}dispose(){if(this._currentLogger){const e=this._currentLogger.dispose();return this._currentLogger=null,e}return Promise.resolve()}_write(e,t=c.Log){e+="",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,n=!0){const r="string"==typeof t?t:t&&this._logFilePathFromInit;if(this._currentLogger){const t={consoleMinLogLevel:e,logFilePath:r,prependTimestamp:n};this._currentLogger.setup(t).then(()=>{if(this._pendingLogQ){const e=this._pendingLogQ;this._pendingLogQ=null,e.forEach(e=>this._write(e.msg,e.level))}})}}init(e,t,n){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new u(e,n),this._logFilePathFromInit=t}}t.Logger=l,t.logger=new l;class u{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=c.Warn,this.disposeCallback=(e,t)=>{this.dispose(),t=t||2,t+=128,process.exit(t)}}setup(e){return r(this,void 0,void 0,(function*(){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(s.isAbsolute(e.logFilePath)){const n=t=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${t.toString()}\n`,c.Error);try{yield(t=s.dirname(e.logFilePath),new Promise((e,n)=>{a(t,t=>{t?n(t):e()})})),this.log("Verbose logs are written to:\n",c.Warn),this.log(e.logFilePath+"\n",c.Warn),this._logFileStream=i.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",e=>{n(e)})}catch(e){n(e)}}else this.log("logFilePath must be an absolute path: "+e.logFilePath,c.Error);var t}))}logDateTime(){let e=new Date;const t=e.getUTCFullYear()+"-"+(e.getUTCMonth()+1)+"-"+e.getUTCDate()+", "+h();this.log(t+"\n",c.Verbose,!1)}setupShutdownListeners(){process.addListener("beforeExit",this.beforeExitCallback),process.addListener("SIGTERM",this.disposeCallback),process.addListener("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,n=!0){if(this._minLogLevel!==c.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){const n=t===c.Error?console.error:t===c.Warn?console.warn:null;n&&n(m(e))}t===c.Error&&(e=`[${c[t]}] ${e}`),this._prependTimestamp&&n&&(e="["+h()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){const t=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",t&&(e+="\n")}if(this._logCallback){const n=new d(e,t);this._logCallback(n)}}}class d extends o.OutputEvent{constructor(e,t){super(e,t===c.Error?"stderr":t===c.Warn?"console":"stdout")}}function m(e){return e.replace(/(\n|\r\n)$/,"")}function h(){let e=new Date;return p(2,String(e.getUTCHours()))+":"+p(2,String(e.getUTCMinutes()))+":"+p(2,String(e.getUTCSeconds()))+"."+p(3,String(e.getUTCMilliseconds()))+" UTC"}function p(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.LogOutputEvent=d,t.trimLastNewline=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(86),i=n(87),s=n(88),a=n(89),o=n(90),c=n(36),l=n(91),u=n(92),d=n(93),m=n(94),h=n(95),p=n(96),f=n(97),g=n(98),y=n(99),v=n(100);t.typeHandlers={bmp:r.BMP,cur:i.CUR,dds:s.DDS,gif:a.GIF,icns:o.ICNS,ico:c.ICO,j2c:l.J2C,jp2:u.JP2,jpg:d.JPG,ktx:m.KTX,png:h.PNG,pnm:p.PNM,psd:f.PSD,svg:g.SVG,tiff:y.TIFF,webp:v.WEBP}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){const n=e.readUInt8(t);return 0===n?256:n}function i(e,t){const n=6+16*t;return{height:r(e,n+1),width:r(e,n)}}t.ICO={validate:e=>0===e.readUInt16LE(0)&&1===e.readUInt16LE(2),calculate(e){const t=e.readUInt16LE(4),n=i(e,0);if(1===t)return n;const r=[n];for(let n=1;n<t;n+=1)r.push(i(e,n));return{height:n.height,images:r,width:n.width}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readUInt=function(e,t,n,r){return n=n||0,e["readUInt"+t+(r?"BE":"LE")].call(e,n)}},function(e,t,n){var r;e.exports=(r=n(0),function(e){var t=r,n=t.lib,i=n.WordArray,s=n.Hasher,a=t.algo,o=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(o[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var l=[],u=a.SHA256=s.extend({_doReset:function(){this._hash=new i.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],u=n[5],d=n[6],m=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var p=l[h-15],f=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=l[h-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[h]=f+l[h-7]+y+l[h-16]}var v=r&i^r&s^i&s,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),S=m+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&d)+c[h]+l[h];m=d,d=u,u=o,o=a+S|0,a=s,s=i,i=r,r=S+(b+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+o|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+m|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(u),t.HmacSHA256=s._createHmacHelper(u)}(Math),r.SHA256)},function(e,t,n){var r;e.exports=(r=n(0),n(18),function(){var e=r,t=e.lib.Hasher,n=e.x64,i=n.Word,s=n.WordArray,a=e.algo;function o(){return i.create.apply(i,arguments)}var c=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=o()}();var u=a.SHA512=t.extend({_doReset:function(){this._hash=new s.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],u=n[5],d=n[6],m=n[7],h=r.high,p=r.low,f=i.high,g=i.low,y=s.high,v=s.low,b=a.high,S=a.low,_=o.high,w=o.low,x=u.high,k=u.low,E=d.high,P=d.low,q=m.high,T=m.low,$=h,R=p,D=f,C=g,B=y,N=v,I=b,A=S,M=_,O=w,j=x,L=k,F=E,K=P,U=q,W=T,Y=0;Y<80;Y++){var H,z,V=l[Y];if(Y<16)z=V.high=0|e[t+2*Y],H=V.low=0|e[t+2*Y+1];else{var G=l[Y-15],J=G.high,X=G.low,Q=(J>>>1|X<<31)^(J>>>8|X<<24)^J>>>7,Z=(X>>>1|J<<31)^(X>>>8|J<<24)^(X>>>7|J<<25),ee=l[Y-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),se=l[Y-7],ae=se.high,oe=se.low,ce=l[Y-16],le=ce.high,ue=ce.low;z=(z=(z=Q+ae+((H=Z+oe)>>>0<Z>>>0?1:0))+re+((H+=ie)>>>0<ie>>>0?1:0))+le+((H+=ue)>>>0<ue>>>0?1:0),V.high=z,V.low=H}var de,me=M&j^~M&F,he=O&L^~O&K,pe=$&D^$&B^D&B,fe=R&C^R&N^C&N,ge=($>>>28|R<<4)^($<<30|R>>>2)^($<<25|R>>>7),ye=(R>>>28|$<<4)^(R<<30|$>>>2)^(R<<25|$>>>7),ve=(M>>>14|O<<18)^(M>>>18|O<<14)^(M<<23|O>>>9),be=(O>>>14|M<<18)^(O>>>18|M<<14)^(O<<23|M>>>9),Se=c[Y],_e=Se.high,we=Se.low,xe=U+ve+((de=W+be)>>>0<W>>>0?1:0),ke=ye+fe;U=F,W=K,F=j,K=L,j=M,L=O,M=I+(xe=(xe=(xe=xe+me+((de+=he)>>>0<he>>>0?1:0))+_e+((de+=we)>>>0<we>>>0?1:0))+z+((de+=H)>>>0<H>>>0?1:0))+((O=A+de|0)>>>0<A>>>0?1:0)|0,I=B,A=N,B=D,N=C,D=$,C=R,$=xe+(ge+pe+(ke>>>0<ye>>>0?1:0))+((R=de+ke|0)>>>0<de>>>0?1:0)|0}p=r.low=p+R,r.high=h+$+(p>>>0<R>>>0?1:0),g=i.low=g+C,i.high=f+D+(g>>>0<C>>>0?1:0),v=s.low=v+N,s.high=y+B+(v>>>0<N>>>0?1:0),S=a.low=S+A,a.high=b+I+(S>>>0<A>>>0?1:0),w=o.low=w+O,o.high=_+M+(w>>>0<O>>>0?1:0),k=u.low=k+L,u.high=x+j+(k>>>0<L>>>0?1:0),P=d.low=P+K,d.high=E+F+(P>>>0<K>>>0?1:0),T=m.low=T+W,m.high=q+U+(T>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),r.SHA512)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const r=n(41);t.activate=function(e){r.ActivityBar.start(e)},t.deactivate=function(){r.ActivityBar.stopActBar()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityBar=void 0;const r=n(8),i=n(66),s=n(128),a=n(6),{exec:o}=n(129),c=n(12),l=n(130),u=n(131);var d;!function(e){e[e.NODE=0]="NODE",e[e.NPM=1]="NPM",e[e.WINDOWS_BUILD_TOOLS=2]="WINDOWS_BUILD_TOOLS",e[e.SKYNOVEL_VER=3]="SKYNOVEL_VER"}(d||(d={}));class m{constructor(e){this.ctx=e,this.aReady=[void 0,void 0,void 0,void 0],this._onDidChangeTreeData=new a.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.getTreeItem=e=>e,this.pnlWV=null,m.aTiRoot.forEach(e=>e.contextValue=e.label),this.refreshWork(),e.subscriptions.push(a.commands.registerCommand("skynovel.refreshSetting",()=>this.refresh())),e.subscriptions.push(a.commands.registerCommand("skynovel.dlNode",()=>a.env.openExternal(a.Uri.parse("https://nodejs.org/dist/v14.4.0/node-v14.4.0"+(r.is_mac?".pkg":("64"==l.arch().slice(-2)?"-x64":"-x86")+".msi"))))),e.subscriptions.push(a.commands.registerCommand("skynovel.opNodeSite",()=>a.env.openExternal(a.Uri.parse("https://nodejs.org/ja/"))))}static start(e){r.setCtx4(e),m.actBar=new m(e),e.subscriptions.push(a.window.registerTreeDataProvider("sn-setting",m.actBar)),m.workSps=new i.WorkSpaces(e,m.chkLastVerSKYNovel),e.subscriptions.push(a.window.registerTreeDataProvider("sn-dev",m.workSps)),e.subscriptions.push(a.window.registerTreeDataProvider("sn-doc",new s.TreeDPDoc(e)))}static stopActBar(){m.actBar.dispose(),m.workSps.dispose()}dispose(){this.pnlWV&&this.pnlWV.dispose()}refresh(){this.refreshWork(),this._onDidChangeTreeData.fire(void 0)}getChildren(e){if(!e)return Promise.resolve(m.aTiRoot);return"Node.js"===e.label&&(m.aTiRoot[d.NODE].iconPath=this.aReady[d.NODE]?"":r.oIcon("error")),Promise.resolve([])}refreshWork(){let e=0;this.aReady[d.NODE]||o("node -v",(t,n)=>{const i=m.aTiRoot[d.NODE];if(t)return this.aReady[d.NODE]=!1,i.description="-- 見つかりません",i.iconPath=r.oIcon("error"),this._onDidChangeTreeData.fire(i),void this.activityBarBadge(++e);this.aReady[d.NODE]=!0,i.description="-- "+n,i.iconPath="",i.contextValue="",this._onDidChangeTreeData.fire(i)});const t=m.aTiRoot[d.WINDOWS_BUILD_TOOLS],n=()=>{r.is_win&&o("npm ls -g windows-build-tools",(n,i)=>{const s=String(i).split(/@|\n/);if(n||s.length<3)return this.aReady[d.WINDOWS_BUILD_TOOLS]=!1,t.description="-- 見つかりません",t.iconPath=r.oIcon("error"),this._onDidChangeTreeData.fire(t),void this.activityBarBadge(++e);this.aReady[d.WINDOWS_BUILD_TOOLS]=!0,t.description="-- "+s[2],t.iconPath="",this._onDidChangeTreeData.fire(t)})};this.aReady[d.NPM]?n():o("npm -v",(t,i)=>{const s=m.aTiRoot[d.NPM];if(t)return this.aReady[d.NPM]=!1,s.description="-- 見つかりません",s.iconPath=r.oIcon("error"),this._onDidChangeTreeData.fire(s),void this.activityBarBadge(++e);this.aReady[d.NPM]=!0,s.description="-- "+i,s.iconPath="",this._onDidChangeTreeData.fire(s),n()}),m.chkLastVerSKYNovel()}static chkLastVerSKYNovel(){const e=a.workspace.workspaceFolders;e&&u.get("https://raw.githubusercontent.com/famibee/SKYNovel/master/package.json",t=>{let n="";t.setEncoding("utf8"),t.on("data",e=>{n+=e}),t.on("end",()=>{const t=JSON.parse(n).version,r=m.aTiRoot[d.SKYNOVEL_VER];r.description="-- "+t,m.actBar._onDidChangeTreeData.fire(r),e.find(e=>{const n=e.uri.fsPath+"/package.json";if(!c.existsSync(n))return!1;const r=c.readJsonSync(n).dependencies.skynovel.slice(1);return"ile:"!==r.slice(0,4)&&t!=r})&&a.window.showInformationMessage(`SKYNovelに更新（${t}）があります。【開発ツール】-【SKYNovel更新】のボタンを押してください`)})}).on("error",e=>console.error(e.message))}activityBarBadge(e=0){var t;const n=null===(t=a.window.activeTextEditor)||void 0===t?void 0:t.viewColumn;if(this.pnlWV)return void this.pnlWV.reveal(n);const r=this.ctx.extensionPath+"/doc";this.pnlWV=a.window.createWebviewPanel("SKYNovel-envinfo","SKYNovel情報",n||a.ViewColumn.One,{enableScripts:!1,localResourceRoots:[a.Uri.file(r)]}),this.pnlWV.onDidDispose(()=>this.pnlWV=null),c.readFile(r+"/index.htm","utf-8",(t,n)=>{if(t)throw t;this.pnlWV.webview.html=n.replace("${エラー数}",String(e)).replace(/<img src="img\//g,`<img src="vscode-resource:${r}/img/`).replace('type="text/css" href="',`type="text/css" href="vscode-resource:${r}/`)})}}t.ActivityBar=m,m.aTiRoot=[new a.TreeItem("Node.js"),new a.TreeItem("npm"),new a.TreeItem(r.is_win?"windows-build-tools":""),new a.TreeItem("SKYNovel（最新）")]},function(e,t,n){var r=n(43),i=process.cwd,s=null,a=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return s||(s=i.call(process)),s};try{process.cwd()}catch(e){}var o=process.chdir;process.chdir=function(e){s=null,o.call(process,e)},e.exports=function(e){r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,i){e.open(t,r.O_WRONLY|r.O_SYMLINK,n,(function(t,r){t?i&&i(t):e.fchmod(r,n,(function(t){e.close(r,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(t,n){var i,s=e.openSync(t,r.O_WRONLY|r.O_SYMLINK,n),a=!0;try{i=e.fchmodSync(s,n),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return i}}(e);e.lutimes||function(e){r.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,n,i,s){e.open(t,r.O_SYMLINK,(function(t,r){t?s&&s(t):e.futimes(r,n,i,(function(t){e.close(r,(function(e){s&&s(t||e)}))}))}))},e.lutimesSync=function(t,n,i){var s,a=e.openSync(t,r.O_SYMLINK),o=!0;try{s=e.futimesSync(a,n,i),o=!1}finally{if(o)try{e.closeSync(a)}catch(e){}else e.closeSync(a)}return s}):(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e);e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){});"win32"===a&&(e.rename=(t=e.rename,function(n,r,i){var s=Date.now(),a=0;t(n,r,(function o(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-s<6e4)return setTimeout((function(){e.stat(r,(function(e,s){e&&"ENOENT"===e.code?t(n,r,o):i(c)}))}),a),void(a<100&&(a+=10));i&&i(c)}))}));var t;function n(t){return t?function(n,r,i){return t.call(e,n,r,(function(e){u(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function i(t){return t?function(n,r){try{return t.call(e,n,r)}catch(e){if(!u(e))throw e}}:t}function s(t){return t?function(n,r,i,s){return t.call(e,n,r,i,(function(e){u(e)&&(e=null),s&&s.apply(this,arguments)}))}:t}function o(t){return t?function(n,r,i){try{return t.call(e,n,r,i)}catch(e){if(!u(e))throw e}}:t}function c(t){return t?function(n,r,i){function s(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?t.call(e,n,r,s):t.call(e,n,s)}:t}function l(t){return t?function(n,r){var i=r?t.call(e,n,r):t.call(e,n);return i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296),i}:t}function u(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read=function(t){function n(n,r,i,s,a,o){var c;if(o&&"function"==typeof o){var l=0;c=function(u,d,m){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,n,r,i,s,a,c);o.apply(this,arguments)}}return t.call(e,n,r,i,s,a,c)}return n.__proto__=t,n}(e.read),e.readSync=(d=e.readSync,function(t,n,r,i,s){for(var a=0;;)try{return d.call(e,t,n,r,i,s)}catch(e){if("EAGAIN"===e.code&&a<10){a++;continue}throw e}});var d}},function(e,t){e.exports=require("constants")},function(e,t,n){var r=n(27).Stream;e.exports=function(e){return{ReadStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var a=Object.keys(i),o=0,c=a.length;o<c;o++){var l=a[o];this[l]=i[l]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){s._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return s.emit("error",e),void(s.readable=!1);s.fd=t,s.emit("open",t),s._read()}))},WriteStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),a=0,o=s.length;a<o;a++){var c=s[a];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(e,t,n){"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}},function(e,t,n){"use strict";const r=n(3),i=n(1),s=n(5).mkdirsSync,a=n(31).utimesMillisSync,o=n(16);function c(e,t,n,s){if(!s.filter||s.filter(t,n))return function(e,t,n,s){const a=(s.dereference?r.statSync:r.lstatSync)(t);if(a.isDirectory())return function(e,t,n,i,s){if(!t)return function(e,t,n,i){return r.mkdirSync(n),d(t,n,i),u(n,e)}(e.mode,n,i,s);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${i}' with directory '${n}'.`);return d(n,i,s)}(a,e,t,n,s);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return function(e,t,n,i,s){return t?function(e,t,n,i){if(i.overwrite)return r.unlinkSync(n),l(e,t,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,i,s):l(e,n,i,s)}(a,e,t,n,s);if(a.isSymbolicLink())return function(e,t,n,s){let a=r.readlinkSync(t);s.dereference&&(a=i.resolve(process.cwd(),a));if(e){let e;try{e=r.readlinkSync(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return r.symlinkSync(a,n);throw e}if(s.dereference&&(e=i.resolve(process.cwd(),e)),o.isSrcSubdir(a,e))throw new Error(`Cannot copy '${a}' to a subdirectory of itself, '${e}'.`);if(r.statSync(n).isDirectory()&&o.isSrcSubdir(e,a))throw new Error(`Cannot overwrite '${e}' with '${a}'.`);return function(e,t){return r.unlinkSync(t),r.symlinkSync(e,t)}(a,n)}return r.symlinkSync(a,n)}(e,t,n,s)}(e,t,n,s)}function l(e,t,n,i){return r.copyFileSync(t,n),i.preserveTimestamps&&function(e,t,n){(function(e){return 0==(128&e)})(e)&&function(e,t){u(e,128|t)}(n,e);(function(e,t){const n=r.statSync(e);a(t,n.atime,n.mtime)})(t,n)}(e.mode,t,n),u(n,e.mode)}function u(e,t){return r.chmodSync(e,t)}function d(e,t,n){r.readdirSync(e).forEach(r=>function(e,t,n,r){const s=i.join(t,e),a=i.join(n,e),{destStat:l}=o.checkPathsSync(s,a,"copy");return c(l,s,a,r)}(r,e,t,n))}e.exports=function(e,t,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:a,destStat:l}=o.checkPathsSync(e,t,"copy");return o.checkParentPathsSync(e,a,t,"copy"),function(e,t,n,a){if(a.filter&&!a.filter(t,n))return;const o=i.dirname(n);r.existsSync(o)||s(o);return c(e,t,n,a)}(l,e,t,n)}},function(e,t,n){"use strict";const r=n(15),i=n(1),s=n(30)("10.12.0"),a=e=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(i.parse(e).root,""))){const t=new Error("Path contains invalid characters: "+e);throw t.code="EINVAL",t}}},o=e=>("number"==typeof e&&(e={mode:e}),{mode:511,...e}),c=e=>{const t=new Error(`operation not permitted, mkdir '${e}'`);return t.code="EPERM",t.errno=-4048,t.path=e,t.syscall="mkdir",t};e.exports.makeDir=async(e,t)=>{if(a(e),t=o(t),s){const n=i.resolve(e);return r.mkdir(n,{mode:t.mode,recursive:!0})}const n=async e=>{try{await r.mkdir(e,t.mode)}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(i.dirname(e)===e)throw c(e);if(t.message.includes("null bytes"))throw t;return await n(i.dirname(e)),n(e)}try{if(!(await r.stat(e)).isDirectory())throw new Error("The path is not a directory")}catch{throw t}}};return n(i.resolve(e))},e.exports.makeDirSync=(e,t)=>{if(a(e),t=o(t),s){const n=i.resolve(e);return r.mkdirSync(n,{mode:t.mode,recursive:!0})}const n=e=>{try{r.mkdirSync(e,t.mode)}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(i.dirname(e)===e)throw c(e);if(t.message.includes("null bytes"))throw t;return n(i.dirname(e)),n(e)}try{if(!r.statSync(e).isDirectory())throw new Error("The path is not a directory")}catch{throw t}}};return n(i.resolve(e))}},function(e,t,n){"use strict";const r=n(3),i=n(1),s=n(5).mkdirs,a=n(9).pathExists,o=n(31).utimesMillis,c=n(16);function l(e,t,n,r,o){const c=i.dirname(n);a(c,(i,a)=>i?o(i):a?d(e,t,n,r,o):void s(c,i=>i?o(i):d(e,t,n,r,o)))}function u(e,t,n,r,i,s){Promise.resolve(i.filter(n,r)).then(a=>a?e(t,n,r,i,s):s(),e=>s(e))}function d(e,t,n,r,i){return r.filter?u(m,e,t,n,r,i):m(e,t,n,r,i)}function m(e,t,n,i,s){(i.dereference?r.stat:r.lstat)(t,(a,o)=>a?s(a):o.isDirectory()?function(e,t,n,i,s,a){if(!t)return function(e,t,n,i,s){r.mkdir(n,r=>{if(r)return s(r);g(t,n,i,t=>t?s(t):f(n,e,s))})}(e.mode,n,i,s,a);if(t&&!t.isDirectory())return a(new Error(`Cannot overwrite non-directory '${i}' with directory '${n}'.`));return g(n,i,s,a)}(o,e,t,n,i,s):o.isFile()||o.isCharacterDevice()||o.isBlockDevice()?function(e,t,n,i,s,a){return t?function(e,t,n,i,s){if(!i.overwrite)return i.errorOnExist?s(new Error(`'${n}' already exists`)):s();r.unlink(n,r=>r?s(r):h(e,t,n,i,s))}(e,n,i,s,a):h(e,n,i,s,a)}(o,e,t,n,i,s):o.isSymbolicLink()?v(e,t,n,i,s):void 0)}function h(e,t,n,i,s){r.copyFile(t,n,r=>r?s(r):i.preserveTimestamps?function(e,t,n,r){if(function(e){return 0==(128&e)}(e))return function(e,t,n){return f(e,128|t,n)}(n,e,i=>i?r(i):p(e,t,n,r));return p(e,t,n,r)}(e.mode,t,n,s):f(n,e.mode,s))}function p(e,t,n,i){!function(e,t,n){r.stat(e,(e,r)=>e?n(e):o(t,r.atime,r.mtime,n))}(t,n,t=>t?i(t):f(n,e,i))}function f(e,t,n){return r.chmod(e,t,n)}function g(e,t,n,i){r.readdir(e,(r,s)=>r?i(r):y(s,e,t,n,i))}function y(e,t,n,r,s){const a=e.pop();return a?function(e,t,n,r,s,a){const o=i.join(n,t),l=i.join(r,t);c.checkPaths(o,l,"copy",(t,i)=>{if(t)return a(t);const{destStat:c}=i;d(c,o,l,s,t=>t?a(t):y(e,n,r,s,a))})}(e,a,t,n,r,s):s()}function v(e,t,n,s,a){r.readlink(t,(t,o)=>t?a(t):(s.dereference&&(o=i.resolve(process.cwd(),o)),e?void r.readlink(n,(t,l)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?r.symlink(o,n,a):a(t):(s.dereference&&(l=i.resolve(process.cwd(),l)),c.isSrcSubdir(o,l)?a(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&c.isSrcSubdir(l,o)?a(new Error(`Cannot overwrite '${l}' with '${o}'.`)):function(e,t,n){r.unlink(t,i=>i?n(i):r.symlink(e,t,n))}(o,n,a))):r.symlink(o,n,a)))}e.exports=function(e,t,n,r){"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),c.checkPaths(e,t,"copy",(i,s)=>{if(i)return r(i);const{srcStat:a,destStat:o}=s;c.checkParentPaths(e,a,t,"copy",i=>i?r(i):n.filter?u(l,o,e,t,n,r):l(o,e,t,n,r))})}},function(e,t,n){"use strict";const r=n(4).fromCallback,i=n(3),s=n(1),a=n(5),o=n(17),c=r((function(e,t){t=t||function(){},i.readdir(e,(n,r)=>{if(n)return a.mkdirs(e,t);r=r.map(t=>s.join(e,t)),function e(){const n=r.pop();if(!n)return t();o.remove(n,n=>{if(n)return t(n);e()})}()})}));function l(e){let t;try{t=i.readdirSync(e)}catch{return a.mkdirsSync(e)}t.forEach(t=>{t=s.join(e,t),o.removeSync(t)})}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},function(e,t,n){"use strict";const r=n(3),i=n(1),s=n(28),a="win32"===process.platform;function o(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||r[t],e[t+="Sync"]=e[t]||r[t]}),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,n){let r=0;"function"==typeof t&&(n=t,t={}),s(e,"rimraf: missing path"),s.strictEqual(typeof e,"string","rimraf: path should be a string"),s.strictEqual(typeof n,"function","rimraf: callback function required"),s(t,"rimraf: invalid options argument provided"),s.strictEqual(typeof t,"object","rimraf: options should be object"),o(t),l(e,t,(function i(s){if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&r<t.maxBusyTries){r++;return setTimeout(()=>l(e,t,i),100*r)}"ENOENT"===s.code&&(s=null)}n(s)}))}function l(e,t,n){s(e),s(t),s("function"==typeof n),t.lstat(e,(r,i)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&a?u(e,t,r,n):i&&i.isDirectory()?m(e,t,r,n):void t.unlink(e,r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return a?u(e,t,r,n):m(e,t,r,n);if("EISDIR"===r.code)return m(e,t,r,n)}return n(r)}))}function u(e,t,n,r){s(e),s(t),s("function"==typeof r),t.chmod(e,438,i=>{i?r("ENOENT"===i.code?null:n):t.stat(e,(i,s)=>{i?r("ENOENT"===i.code?null:n):s.isDirectory()?m(e,t,n,r):t.unlink(e,r)})})}function d(e,t,n){let r;s(e),s(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?p(e,t,n):t.unlinkSync(e)}function m(e,t,n,r){s(e),s(t),s("function"==typeof r),t.rmdir(e,a=>{!a||"ENOTEMPTY"!==a.code&&"EEXIST"!==a.code&&"EPERM"!==a.code?a&&"ENOTDIR"===a.code?r(n):r(a):function(e,t,n){s(e),s(t),s("function"==typeof n),t.readdir(e,(r,s)=>{if(r)return n(r);let a,o=s.length;if(0===o)return t.rmdir(e,n);s.forEach(r=>{c(i.join(e,r),t,r=>{if(!a)return r?n(a=r):void(0==--o&&t.rmdir(e,n))})})})}(e,t,r)})}function h(e,t){let n;o(t=t||{}),s(e,"rimraf: missing path"),s.strictEqual(typeof e,"string","rimraf: path should be a string"),s(t,"rimraf: missing options"),s.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&a&&d(e,t,n)}try{n&&n.isDirectory()?p(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return a?d(e,t,n):p(e,t,n);if("EISDIR"!==n.code)throw n;p(e,t,n)}}function p(e,t,n){s(e),s(t);try{t.rmdirSync(e)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(e,t){if(s(e),s(t),t.readdirSync(e).forEach(n=>h(i.join(e,n),t)),!a){return t.rmdirSync(e,t)}{const n=Date.now();do{try{return t.rmdirSync(e,t)}catch{}}while(Date.now()-n<500)}}(e,t);else if("ENOENT"!==r.code)throw r}}e.exports=c,c.sync=h},function(e,t,n){"use strict";const r=n(52),i=n(53),s=n(54);e.exports={createFile:r.createFile,createFileSync:r.createFileSync,ensureFile:r.createFile,ensureFileSync:r.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:s.createSymlink,createSymlinkSync:s.createSymlinkSync,ensureSymlink:s.createSymlink,ensureSymlinkSync:s.createSymlinkSync}},function(e,t,n){"use strict";const r=n(4).fromCallback,i=n(1),s=n(3),a=n(5);e.exports={createFile:r((function(e,t){function n(){s.writeFile(e,"",e=>{if(e)return t(e);t()})}s.stat(e,(r,o)=>{if(!r&&o.isFile())return t();const c=i.dirname(e);s.stat(c,(e,r)=>{if(e)return"ENOENT"===e.code?a.mkdirs(c,e=>{if(e)return t(e);n()}):t(e);r.isDirectory()?n():s.readdir(c,e=>{if(e)return t(e)})})})})),createFileSync:function(e){let t;try{t=s.statSync(e)}catch{}if(t&&t.isFile())return;const n=i.dirname(e);try{s.statSync(n).isDirectory()||s.readdirSync(n)}catch(e){if(!e||"ENOENT"!==e.code)throw e;a.mkdirsSync(n)}s.writeFileSync(e,"")}}},function(e,t,n){"use strict";const r=n(4).fromCallback,i=n(1),s=n(3),a=n(5),o=n(9).pathExists;e.exports={createLink:r((function(e,t,n){function r(e,t){s.link(e,t,e=>{if(e)return n(e);n(null)})}o(t,(c,l)=>c?n(c):l?n(null):void s.lstat(e,s=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),n(s);const c=i.dirname(t);o(c,(i,s)=>i?n(i):s?r(e,t):void a.mkdirs(c,i=>{if(i)return n(i);r(e,t)}))}))})),createLinkSync:function(e,t){if(s.existsSync(t))return;try{s.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=i.dirname(t);return s.existsSync(n)||a.mkdirsSync(n),s.linkSync(e,t)}}},function(e,t,n){"use strict";const r=n(4).fromCallback,i=n(1),s=n(3),a=n(5),o=a.mkdirs,c=a.mkdirsSync,l=n(55),u=l.symlinkPaths,d=l.symlinkPathsSync,m=n(56),h=m.symlinkType,p=m.symlinkTypeSync,f=n(9).pathExists;e.exports={createSymlink:r((function(e,t,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,f(t,(a,c)=>a?r(a):c?r(null):void u(e,t,(a,c)=>{if(a)return r(a);e=c.toDst,h(c.toCwd,n,(n,a)=>{if(n)return r(n);const c=i.dirname(t);f(c,(n,i)=>n?r(n):i?s.symlink(e,t,a,r):void o(c,n=>{if(n)return r(n);s.symlink(e,t,a,r)}))})}))})),createSymlinkSync:function(e,t,n){if(s.existsSync(t))return;const r=d(e,t);e=r.toDst,n=p(r.toCwd,n);const a=i.dirname(t);return s.existsSync(a)||c(a),s.symlinkSync(e,t,n)}}},function(e,t,n){"use strict";const r=n(1),i=n(3),s=n(9).pathExists;e.exports={symlinkPaths:function(e,t,n){if(r.isAbsolute(e))return i.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e}));{const a=r.dirname(t),o=r.join(a,e);return s(o,(t,s)=>t?n(t):s?n(null,{toCwd:o,toDst:e}):i.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:r.relative(a,e)})))}},symlinkPathsSync:function(e,t){let n;if(r.isAbsolute(e)){if(n=i.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const s=r.dirname(t),a=r.join(s,e);if(n=i.existsSync(a),n)return{toCwd:a,toDst:e};if(n=i.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:r.relative(s,e)}}}}},function(e,t,n){"use strict";const r=n(3);e.exports={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);r.lstat(e,(e,r)=>{if(e)return n(null,"file");t=r&&r.isDirectory()?"dir":"file",n(null,t)})},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=r.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}}},function(e,t,n){"use strict";const r=n(4).fromPromise,i=n(58);i.outputJson=r(n(60)),i.outputJsonSync=n(61),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},function(e,t,n){"use strict";const r=n(59);e.exports={readJson:r.readFile,readJsonSync:r.readFileSync,writeJson:r.writeFile,writeJsonSync:r.writeFileSync}},function(e,t,n){let r;try{r=n(3)}catch(e){r=n(7)}const i=n(4),{stringify:s,stripBom:a}=n(20);const o={readFile:i.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||r,s=!("throws"in t)||t.throws;let o,c=await i.fromCallback(n.readFile)(e,t);c=a(c);try{o=JSON.parse(c,t?t.reviver:null)}catch(t){if(s)throw t.message=`${e}: ${t.message}`,t;return null}return o})),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||r,i=!("throws"in t)||t.throws;try{let r=n.readFileSync(e,t);return r=a(r),JSON.parse(r,t.reviver)}catch(t){if(i)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:i.fromPromise((async function(e,t,n={}){const a=n.fs||r,o=s(t,n);await i.fromCallback(a.writeFile)(e,o,n)})),writeFileSync:function(e,t,n={}){const i=n.fs||r,a=s(t,n);return i.writeFileSync(e,a,n)}};e.exports=o},function(e,t,n){"use strict";const{stringify:r}=n(20),{outputFile:i}=n(21);e.exports=async function(e,t,n={}){const s=r(t,n);await i(e,s,n)}},function(e,t,n){"use strict";const{stringify:r}=n(20),{outputFileSync:i}=n(21);e.exports=function(e,t,n){const s=r(t,n);i(e,s,n)}},function(e,t,n){"use strict";e.exports={moveSync:n(63)}},function(e,t,n){"use strict";const r=n(3),i=n(1),s=n(29).copySync,a=n(17).removeSync,o=n(5).mkdirpSync,c=n(16);function l(e,t,n){try{r.renameSync(e,t)}catch(r){if("EXDEV"!==r.code)throw r;return function(e,t,n){return s(e,t,{overwrite:n,errorOnExist:true}),a(e)}(e,t,n)}}e.exports=function(e,t,n){const s=(n=n||{}).overwrite||n.clobber||!1,{srcStat:u}=c.checkPathsSync(e,t,"move");return c.checkParentPathsSync(e,u,t,"move"),o(i.dirname(t)),function(e,t,n){if(n)return a(t),l(e,t,n);if(r.existsSync(t))throw new Error("dest already exists.");return l(e,t,n)}(e,t,s)}},function(e,t,n){"use strict";const r=n(4).fromCallback;e.exports={move:r(n(65))}},function(e,t,n){"use strict";const r=n(3),i=n(1),s=n(32).copy,a=n(17).remove,o=n(5).mkdirp,c=n(9).pathExists,l=n(16);function u(e,t,n,i){r.rename(e,t,r=>r?"EXDEV"!==r.code?i(r):function(e,t,n,r){s(e,t,{overwrite:n,errorOnExist:!0},t=>t?r(t):a(e,r))}(e,t,n,i):i())}e.exports=function(e,t,n,r){"function"==typeof n&&(r=n,n={});const s=n.overwrite||n.clobber||!1;l.checkPaths(e,t,"move",(n,d)=>{if(n)return r(n);const{srcStat:m}=d;l.checkParentPaths(e,m,t,"move",n=>{if(n)return r(n);o(i.dirname(t),n=>n?r(n):function(e,t,n,r){if(n)return a(t,i=>i?r(i):u(e,t,n,r));c(t,(i,s)=>i?r(i):s?r(new Error("dest already exists.")):u(e,t,n,r))}(e,t,s,r))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkSpaces=void 0;const r=n(8),i=n(67),s=n(6),a=n(12);class o{constructor(e,t){if(this.ctx=e,this.chkLastVerSKYNovel=t,this.aTiRoot=[],this.oTiPrj={},this.TreeChild=[{icon:"gear",label:"プロジェクト設定",cmd:"skynovel.devPrjSet"},{icon:"skynovel",label:"SKYNovel更新",cmd:"skynovel.devSnUpd"},{icon:"plugin",label:"全ライブラリ更新",cmd:"skynovel.devLibUpd"},{icon:"browser",label:"ブラウザ版を起動",cmd:"skynovel.devTaskWeb"},{icon:"electron",label:"アプリ版を起動",cmd:"skynovel.devTaskStart"},{icon:"windows",label:"exe生成",cmd:"skynovel.devTaskPackWin"},{icon:"macosx",label:"app生成",cmd:"skynovel.devTaskPackMac",desc:r.is_mac?"":"OS X 上のみ"},{icon:"gear",label:"暗号化",cmd:"skynovel.devCrypto"},{icon:"gear",label:"リビルド",cmd:"skynovel.devReBuild"}],this.idxDevPrjSet=1,this.idxDevTaskPackMac=6,this.idxDevCrypto=7,this.hPrj={},this.tidDelay=null,this.decChars={aRange:[],decorator:s.window.createTextEditorDecorationType({})},this.fnc_onDidEndTaskProcess=e=>{},this._onDidChangeTreeData=new s.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.getTreeItem=e=>e,r.is_win){const e=this.TreeChild[this.idxDevTaskPackMac];e.label="",e.cmd="",e.desc="（Windowsでは使えません）"}this.refresh(),s.workspace.onDidChangeWorkspaceFolders(e=>this.refresh(e)),this.TreeChild.forEach(t=>{t.cmd&&e.subscriptions.push(s.commands.registerCommand(t.cmd,e=>this.onClickTreeItemBtn(e)))}),s.tasks.onDidEndTaskProcess(e=>this.fnc_onDidEndTaskProcess(e)),this.onUpdDoc(s.window.activeTextEditor),s.window.onDidChangeActiveTextEditor(e=>this.onUpdDoc(e),null,e.subscriptions),s.workspace.onDidCloseTextDocument(e=>{var t;(null===(t=this.teActive)||void 0===t?void 0:t.document)===e&&(this.teActive=void 0)}),s.workspace.onDidChangeTextDocument(e=>{var t;e.document===(null===(t=this.teActive)||void 0===t?void 0:t.document)&&this.onUpdDoc(this.teActive)},null,e.subscriptions)}onUpdDoc(e){e&&"skynovel"==e.document.languageId&&(this.teActive=e,this.tidDelay&&clearTimeout(this.tidDelay),this.tidDelay=setTimeout(()=>this.updDeco(),500))}updDeco(){if(!this.teActive)return;const e=this.teActive.document,t=e.getText();let n;for(s.window.setStatusBarMessage(""),this.decChars.decorator.dispose(),this.decChars={aRange:[],decorator:s.window.createTextEditorDecorationType({light:{textDecoration:"underline"},dark:{textDecoration:"underline"}})};n=o.REG_FN_OR_LABEL.exec(t);)this.decChars.aRange.push(new s.Range(e.positionAt(n.index+n[0].length-n[1].length),e.positionAt(n.index+n[0].length)));this.teActive.setDecorations(this.decChars.decorator,this.decChars.aRange)}refresh(e){const t=s.workspace.workspaceFolders;if(t){if(!e)return t.forEach(e=>this.makePrj(e)),this.aTiRoot[0].collapsibleState=s.TreeItemCollapsibleState.Expanded,void this._onDidChangeTreeData.fire(void 0);if(e.added.length>0)this.makePrj(t.slice(-1)[0]);else{const t=e.removed[0].name,n=this.aTiRoot.findIndex(e=>e.label===t);this.aTiRoot.splice(n,1);const r=e.removed[0].uri.fsPath;delete this.oTiPrj[r],this.hPrj[r].dispose()}this._onDidChangeTreeData.fire(void 0)}}makePrj(e){const t=new s.TreeItem("",s.TreeItemCollapsibleState.Collapsed),n=e.uri.fsPath;t.iconPath=s.ThemeIcon.Folder,t.tooltip=n,t.description=e.name,this.aTiRoot.push(t);const o=a.existsSync(n+"/package.json"),c=a.existsSync(n+"/doc/prj/prj.json");if(!o||!c){const e=new s.TreeItem((o?"prj":"package")+".json がありません");return e.iconPath=r.oIcon("warn"),void(this.oTiPrj[n]=[e])}this.oTiPrj[n]=this.TreeChild.map(e=>{var t;const i=new s.TreeItem(e.label);return i.iconPath=r.oIcon(e.icon),i.contextValue=i.label,i.description=null!==(t=e.desc)&&void 0!==t?t:"",i.tooltip=n,i}),this.updLocalSNVer(n),this.hPrj[n]=new i.Project(this.ctx,n,e=>{t.label=e,this._onDidChangeTreeData.fire(t)}),this.dspCryptoMode(n)}updLocalSNVer(e){var t,n;const r=a.readJsonSync(e+"/package.json"),i=null===(n=null===(t=null==r?void 0:r.dependencies)||void 0===t?void 0:t.skynovel)||void 0===n?void 0:n.slice(1);this.oTiPrj[e][this.idxDevPrjSet].description=i?"-- "+i:"取得できません"}dspCryptoMode(e){const t=this.oTiPrj[e],n=this.hPrj[e];t[this.idxDevCrypto].description="-- "+(n.isCryptoMode?"する":"しない")}onClickTreeItemBtn(e){var t;e||console.log("fn:TreeDPDev.ts line:133 onClickTreeItemBtn undefined...");const n=s.workspace.workspaceFolders;if(!n)return void s.window.showWarningMessage("[SKYNovel] フォルダを開いているときのみ使用できます");let i=n.length>1?`cd "${e.tooltip}" ${r.statBreak()} `:"";const o=null!==(t=e.tooltip)&&void 0!==t?t:"";a.existsSync(o+"/node_modules")||(i+=`npm i ${r.statBreak()} `);const c=this.TreeChild.findIndex(t=>t.label===e.label);if(-1===c)return;const l=this.TreeChild[c];switch(l.cmd){case"skynovel.devPrjSet":return void this.hPrj[o].openPrjSetting();case"skynovel.devSnUpd":i+=`npm i skynovel@latest ${r.statBreak()} npm run webpack:dev`,this.chkLastVerSKYNovel();break;case"skynovel.devLibUpd":i+=`npm update ${r.statBreak()} npm update --dev ${r.statBreak()} npm run webpack:dev`;break;case"skynovel.devTaskWeb":i+="npm run web";break;case"skynovel.devTaskStart":i+="npm run start";break;case"skynovel.devTaskPackWin":i+="npm run pack:win";break;case"skynovel.devTaskPackMac":i+="npm run pack:mac";break;case"skynovel.devCrypto":return void s.window.showInformationMessage("暗号化（する / しない）を切り替えますか？",{modal:!0},"はい").then(t=>{"はい"==t&&(this.hPrj[o].tglCryptoMode(),this.dspCryptoMode(o),this._onDidChangeTreeData.fire(e))});case"skynovel.devReBuild":i+="npm run rebuild";break;default:return}const u=new s.Task({type:"SKYNovel "+c},l.label,"SKYNovel",new s.ShellExecution(i));this.fnc_onDidEndTaskProcess="skynovel.devSnUpd"===l.cmd||"skynovel.devLibUpd"===l.cmd?e=>{e.execution.task.definition.type==u.definition.type&&e.execution.task.source==u.source&&(this.updLocalSNVer(o),this._onDidChangeTreeData.fire(void 0))}:()=>{},s.tasks.executeTask(u).then(void 0,e=>console.error("fn:TreeDPDev onClickTreeItemBtn() rj:"+e.message))}getChildren(e){return Promise.resolve(e?this.oTiPrj[e.tooltip]:this.aTiRoot)}dispose(){for(const e in this.hPrj)this.hPrj[e].dispose();this.hPrj={}}}t.WorkSpaces=o,o.REG_FN_OR_LABEL=/(?<=\s)(?:fn|label)\s*=\s*([^\]\s]+)/g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Project=void 0;const r=n(8),i=n(68),s=n(81),a=n(6),o=n(12),c=n(1),l=n(82),u=n(103),{v4:d}=n(132),m=n(127),h=n(27);class p{constructor(e,t,n){this.ctx=e,this.pathWs=t,this.chgTitle=n,this.fld_crypto_prj="crypto_prj",this.$isCryptoMode=!0,this.regNeedCrypto=/\.(sn|json|html?|jpe?g|png|svg|webp|mp3|m4a|ogg|aac|flac|wav|mp4|webm|ogv|html?)$/,this.regFullCrypto=/\.(sn|json|html?)$/,this.regRepPathJson=/\.(jpe?g|png|svg|webp|mp3|m4a|ogg|aac|flac|wav|mp4|webm|ogv)"/g,this.hExt2N={jpg:1,jpeg:1,png:2,svg:3,webp:4,mp3:10,m4a:11,ogg:12,aac:13,flac:14,wav:15,mp4:20,webm:21,ogv:22},this.regNeedHash=/\.(js|css)$/,this.hDiff=Object.create(null),this.LEN_CHKDIFF=1024,this.aRepl=["core/app4webpack.js","core/mob4webpack.js","core/web4webpack.js"],this.LEN_ENC=10240,this.regDir=/(^.+)\//,this.regSprSheetImg=/^(.+)\.(\d+)x(\d+)\.(png|jpe?g)$/,this.curPrj=t+"/doc/prj/",this.codSpt=new i.CodingSupporter(e,t,this.curPrj),this.curPlg=t+"/core/plugin/",o.ensureDirSync(this.curPlg),o.existsSync(this.pathWs+"/node_modules")?this.updPlugin():(this.rebuildTask(),a.window.showInformationMessage("初期化中です。ターミナルの処理が終わって止まるまでしばらくお待ち下さい。",{modal:!0})),this.lenCurPrj=this.curPrj.length,this.updPathJson();const c=a.workspace.createFileSystemWatcher(this.curPlg+"**/*"),l=a.workspace.createFileSystemWatcher(this.curPrj+"*/*"),m=a.workspace.createFileSystemWatcher(this.curPrj+"prj.json");this.aFSW=[c.onDidCreate(()=>this.updPlugin()),c.onDidChange(()=>this.updPlugin()),c.onDidDelete(()=>this.updPlugin()),l.onDidCreate(e=>{r.regNoUseSysPath.lastIndex=0,r.regNoUseSysPath.test(e.path)||(this.crePrj(e),this.codSpt.crePrj(e))}),l.onDidChange(e=>{r.regNoUseSysPath.lastIndex=0,r.regNoUseSysPath.test(e.path)||(this.chgPrj(e),this.codSpt.chgPrj(e))}),l.onDidDelete(e=>{r.regNoUseSysPath.lastIndex=0,r.regNoUseSysPath.test(e.path)||(this.delPrj(e),this.codSpt.delPrj(e))}),m.onDidChange(e=>this.chgPrj(e))],this.curCrypto=t+`/${this.fld_crypto_prj}/`,this.$isCryptoMode=o.existsSync(this.curCrypto);const h=this.curPlg+"pass.json",p=o.existsSync(h);this.hPass=p?o.readJsonSync(h,{throws:!1}):{pass:d(),salt:String(u.lib.WordArray.random(16)),iv:String(u.lib.WordArray.random(16)),ite:500+Math.floor((new Date).getTime()%300),stk:String(u.lib.WordArray.random(16))},p||o.outputJsonSync(h,this.hPass),this.iv=u.enc.Hex.parse(this.hPass.iv),this.pbkdf2=u.PBKDF2(u.enc.Utf8.parse(this.hPass.pass),u.enc.Hex.parse(this.hPass.salt),{keySize:this.hPass.keySize,iterations:this.hPass.ite}),this.fnDiff=t+"/core/diff.json",o.existsSync(this.fnDiff)&&(this.hDiff=o.readJsonSync(this.fnDiff)),this.ps=new s.PnlPrjSetting(e,t,n,this.codSpt),this.initCrypto()}get isCryptoMode(){return this.$isCryptoMode}openPrjSetting(){this.ps.open()}dispose(){this.aFSW.forEach(e=>e.dispose())}crePrj(e){this.encIfNeeded(e.path),this.updPathJson()}chgPrj(e){this.encIfNeeded(e.path)}delPrj(e){const t=e.path.slice(this.lenCurPrj);this.regNeedCrypto.lastIndex=0,o.removeSync(this.curCrypto+(t+'"').replace(this.regRepPathJson,".bin").replace(/"/,"")),this.updPathJson(),delete this.hDiff[t],this.updDiffJson()}initCrypto(){r.treeProc(this.curPrj,this.$isCryptoMode?e=>{this.isDiff(e)&&this.encrypter(e)}:e=>this.isDiff(e)),this.updDiffJson()}encIfNeeded(e){this.isDiff(e)&&this.$isCryptoMode&&this.encrypter(e),this.updDiffJson()}updDiffJson(){o.writeJsonSync(this.fnDiff,this.hDiff)}isDiff(e){const t=e.slice(this.lenCurPrj);let n=0;if(this.regFullCrypto.test(e))n=m.str(o.readFileSync(e,{encoding:"utf8"}));else{const t=new Uint8Array(this.LEN_CHKDIFF),r=o.openSync(e,"r");o.readSync(r,t,0,this.LEN_CHKDIFF,0),o.closeSync(r),n=m.buf(t)}return this.hDiff[t]!==n&&(this.hDiff[t]=n,!0)}tglCryptoMode(){const e=this.curPlg+"snsys_pre";if(this.$isCryptoMode=!this.$isCryptoMode,!this.$isCryptoMode)return o.removeSync(this.curCrypto),o.removeSync(e),this.aRepl.forEach(e=>r.replaceFile(this.pathWs+"/"+e,new RegExp("\\(hPlg, {.+?}\\);"),"(hPlg);")),void r.replaceFile(this.pathWs+"/package.json",new RegExp(`"${this.fld_crypto_prj}\\/",`),'"prj/",');o.ensureDir(this.curCrypto),this.aRepl.forEach(e=>r.replaceFile(this.pathWs+"/"+e,/\(hPlg\);/,`(hPlg, {cur: '${this.fld_crypto_prj}/', crypto: true});`)),r.replaceFile(this.pathWs+"/package.json",/"prj\/",/,`"${this.fld_crypto_prj}/",`),r.replaceFile(this.ctx.extensionPath+"/res/snsys_pre/index.js",/{p:0}/,JSON.stringify(this.hPass),e+"/index.js"),this.hDiff=Object.create(null),this.initCrypto()}async encrypter(e){var t;try{const n=e.slice(this.lenCurPrj),r=this.curCrypto+n;if(!this.regNeedCrypto.test(e))return void o.ensureLink(e,r).catch(e=>console.error("encrypter cp1 "+e));if(this.regFullCrypto.test(n)){let t=await o.readFile(e,{encoding:"utf8"});"path.json"===n&&(t=t.replace(this.regRepPathJson,'.bin"'));const i=u.AES.encrypt(t,this.pbkdf2,{iv:this.iv});return void await o.outputFile(r,i.toString())}const i=this.regDir.exec(n);if(i&&this.ps.cfg.code[i[1]])return void o.ensureLink(e,r).catch(e=>console.error("encrypter cp2 "+e));let s=this.LEN_ENC,a=2;const l=new Uint8Array(a+s);l[0]=0,l[1]=null!==(t=this.hExt2N[c.extname(n).slice(1)])&&void 0!==t?t:0;const d=o.createReadStream(e).on("error",e=>console.error("encrypter rs=%o",e)),m=r.replace(/\.[^.]+$/,".bin");o.ensureFileSync(m);const p=o.createWriteStream(m).on("error",e=>console.error("encrypter ws=%o",e)),f=new h.Transform({transform:(e,t,n)=>{if(0===s)return void n(null,e);const r=e.length;if(s>r)return l.set(e,a),a+=r,s-=r,void n(null);l.set(e.slice(0,s),a);const i=u.AES.encrypt(u.lib.WordArray.create(l),this.pbkdf2,{iv:this.iv}),o=Buffer.from(i.toString(),"base64"),c=Buffer.alloc(4);c.writeUInt32LE(o.length,0),f.push(c),f.push(o),n(null,s===r?null:e.slice(s)),s=0}}).on("end",()=>{if(0===s)return;const e=u.AES.encrypt(u.lib.WordArray.create(l.slice(0,a)),this.pbkdf2,{iv:this.iv}),t=Buffer.from(e.toString(),"base64"),n=Buffer.alloc(4);n.writeUInt32LE(t.length,0),p.write(n),p.write(t)});d.pipe(f).pipe(p)}catch(e){console.error("encrypter other "+e.message)}}updPlugin(){if(!o.existsSync(this.curPlg))return;const e={},t={};r.foldProc(this.curPlg,()=>{},n=>{e[n]=0;const r=`${this.curPlg}${n}/index.js`;if(!o.existsSync(r))return;const i=o.readFileSync(r,"utf8");let s;for(;s=p.regPlgAddTag.exec(i);){const e=s[2],n=e.length,o=p.regPlgAddTag.lastIndex-n-1;let c=0,l=o;for(;(l=i.lastIndexOf("\n",l-1))>=0;)++c;const u=o-i.lastIndexOf("\n",o)-1;t[e]=new a.Location(a.Uri.file(r),new a.Range(c,u,c,u+n))}}),this.codSpt.setHDefPlg(t),o.outputFile(this.curPlg.slice(0,-1)+".js",`export default ${JSON.stringify(e)};`).then(()=>this.rebuildTask()).catch(e=>console.error("PrjFileProc updPlugin "+e))}rebuildTask(){let e=`cd "${this.pathWs}" ${r.statBreak()} `;o.existsSync(this.pathWs+"/node_modules")||(e+=`npm i ${r.statBreak()} `),e+="npm run webpack:dev";const t=new a.Task({type:"SKYNovel auto"},"webpack:dev","SKYNovel",new a.ShellExecution(e));a.tasks.executeTask(t).then(void 0,e=>console.error("TreeDPDev rebuildTask() rj:"+e.message))}async updPathJson(){try{const e=this.get_hPathFn2Exts(this.curPrj);await o.outputJson(this.curPrj+"path.json",e),this.$isCryptoMode&&this.encrypter(this.curPrj+"path.json")}catch(e){console.error("PrjFileProc updPathJson "+e)}}get_hPathFn2Exts(e){const t={};return r.foldProc(e,()=>{},n=>{const i=c.resolve(e,n);r.foldProc(i,(e,s)=>{this.addPath(t,n,s);const d=s.match(this.regNeedHash);if(d){const n=o.readFileSync(e,{encoding:"utf8"}),r=u.RIPEMD160(n).toString(u.enc.Hex),i=s.slice(0,-d[0].length);t[i][d[1]+":RIPEMD160"]=r}const m=s.match(this.regSprSheetImg);if(!m)return;const h=c.resolve(i,m[1]+".json");if(o.existsSync(h))return;const p=l(e),f=r.uint(m[2]),g=r.uint(m[3]),y=p.width/f,v=p.height/g,b=m[1],S=m[4],_={frames:{},meta:{app:"skynovel",version:"1.0",image:m[0],format:"RGBA8888",size:{w:p.width,h:p.height},scale:1,animationSpeed:1}};let w=0;for(let e=0;e<f;++e)for(let t=0;t<g;++t)_.frames[b+String(++w).padStart(4,"0")+"."+S]={frame:{x:e*y,y:t*v,w:y,h:v},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:p.width,h:p.height},sourceSize:{w:y,h:v},pivot:{x:.5,y:.5}};o.writeFileSync(h,JSON.stringify(_)),a.window.showInformationMessage(`[SKYNovel] ${s} からスプライトシート用 ${m[1]}.json を自動生成しました`),this.addPath(t,n,m[1]+".json")},()=>{})}),t}addPath(e,t,n){const i=c.parse(n),s=i.ext.slice(1),l=i.name;let u=e[l];if(u){if(s in u)return void a.window.showErrorMessage(`[SKYNovel] プロジェクト内でファイル【${i.base}】が重複しています。フォルダを縦断検索するため許されません`,{modal:!0}).then(()=>a.window.showQuickPick([{label:"1) "+u[s],description:"クリックで削除対象"},{label:"2) "+(t+"/"+n),description:"クリックで削除対象"}])).then(e=>{if(!e)return;const r=Number(e.label.slice(0,1)),i=this.curPrj+(1===r?u[s]:t+"/"+n);a.window.showInformationMessage(i+" を削除しますか？",{modal:!0},"はい").then(e=>{"はい"===e&&o.removeSync(i)})});u[":cnt"]=r.uint(u[":cnt"])+1}else u=e[l]={":cnt":1};u[s]=t+"/"+n}}t.Project=p,p.regPlgAddTag=/(?<=\.\s*addTag\s*\(\s*)(["'])(.+?)\1/g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodingSupporter=void 0;const r=n(8),i=n(69),s=n(71),a=n(6),o=n(80);class c{constructor(e,t,n){this.hArgDesc={},this.tidDelay=null,this.hChgTxt={},this.hRsvNm2Then={},this.nm4rename="",this.aCITagMacro=[],this.preSigHelp=new a.SignatureHelp,this.hScr2Pro={},this.crePrj=e=>this.scrScn.goAll(),this.chgPrj=e=>this.scrScn.goFile(e),this.delPrj=e=>this.scrScn.goAll(),this.loadCfg=()=>c.pickItems.sort(this.compare).forEach(e=>e.description+="（SKYNovel）"),this.lenRootPath=t.length+1,c.initClass(e),c.pickItems.map(e=>{var t;return this.hArgDesc[e.label]={label:`[${e.label} ...]`,doc:null!==(t=e.description)&&void 0!==t?t:"タグの説明"}}),a.commands.registerCommand(c.CMD_SCANSCR_TRGPARAMHINTS,()=>a.commands.executeCommand("editor.action.triggerParameterHints")),this.aCITagMacro=[];const r={title:"「スクリプト再捜査」「引数の説明」",command:c.CMD_SCANSCR_TRGPARAMHINTS};for(const e in o){const t=o[e],n=new a.CompletionItem(e,a.CompletionItemKind.Snippet);n.detail=t.detail,n.command=r,t.comment&&(n.documentation=new a.MarkdownString(`$(book)[タグリファレンス](https://famibee.github.io/SKYNovel/tag.htm#${e})\n\n---\n${t.comment}`,!0)),this.aCITagMacro.push(n);const i=t.snippet.length;for(let e=1;e<i;++e){const i=new a.CompletionItem(t.snippet[e].nm,a.CompletionItemKind.Snippet);i.detail=t.detail,i.command=r,i.documentation=n.documentation,this.aCITagMacro.push(i)}}this.loadCfg(),e.subscriptions.push(a.workspace.onDidChangeConfiguration(()=>this.loadCfg()));const l={scheme:"file",language:"skynovel"};e.subscriptions.push(a.languages.registerHoverProvider(l,this)),e.subscriptions.push(a.languages.registerDefinitionProvider(l,this)),e.subscriptions.push(a.languages.registerReferenceProvider(l,this)),e.subscriptions.push(a.languages.registerRenameProvider(l,this)),this.clDiag=a.languages.createDiagnosticCollection(l.language),e.subscriptions.push(this.clDiag),e.subscriptions.push(a.languages.registerCompletionItemProvider(l,this,"["," ","=")),e.subscriptions.push(a.languages.registerSignatureHelpProvider(l,this," ")),e.subscriptions.push(a.languages.registerDocumentSymbolProvider(l,this)),s.initDebug(e,l),a.languages.registerEvaluatableExpressionProvider(l,{provideEvaluatableExpression(e,t){const n=e.getWordRangeAtPosition(t,c.REG_VAR);if(!n)return Promise.reject("No word here.");const r=e.getText(n),i=r.charAt(0);return"["===i||"*"===i||";"===i||"="===r.slice(-1)?Promise.reject("No word here."):new a.EvaluatableExpression(n,r)}}),a.workspace.onDidChangeTextDocument(e=>{const t=e.document;0!==e.contentChanges.length&&"skynovel"==t.languageId&&t.fileName.slice(0,this.lenRootPath-1)==a.workspace.rootPath&&(this.hChgTxt[t.fileName]=t,this.tidDelay&&clearTimeout(this.tidDelay),this.tidDelay=setTimeout(()=>this.delayedUpdate(),500))},null,e.subscriptions),this.scrScn=new i.ScriptScanner(n,this.clDiag,c.hTag)}delayedUpdate(){const e=this.hChgTxt;this.hChgTxt={};for(const t in e){const n=e[t];this.scrScn.goScriptSrc(n.uri,n.getText())}for(const e in this.hRsvNm2Then)this.hRsvNm2Then[e]();this.hRsvNm2Then={}}static initClass(e){c.initClass=()=>{};for(const e in o){const t=o[e];c.pickItems.push({label:e,description:t.detail}),c.hTag[e]=!0,t.snippet.forEach(e=>c.hSnippet[e.nm]=e.txt)}e.subscriptions.push(a.commands.registerCommand("skynovel.openReferencePallet",()=>{a.window.showQuickPick(c.pickItems,{placeHolder:"Which reference will you open?",matchOnDescription:!0}).then(e=>{e&&c.openTagRef(e)})}))}static openTagRef(e){a.commands.executeCommand("open",a.Uri.parse("https://famibee.github.io/SKYNovel/tag.htm#"+e.label))}provideHover(e,t,n){if(!e.getWordRangeAtPosition(t,c.regTagName))return Promise.reject("No word here.");const r=e.getText(e.getWordRangeAtPosition(t)),i=this.scrScn.hMacro[r];if(i){const e=i.uri.fsPath;return new a.Hover(new a.MarkdownString(`~~~skynovel\n(マクロ) [${r}]\n~~~\n定義ファイル：${e.slice(this.lenRootPath)}`))}const s=this.scrScn.hPlugin[r];if(s){const e=s.uri.fsPath;return new a.Hover(new a.MarkdownString(`~~~skynovel\n(プラグイン定義タグ) [${r}]\n~~~\n---\n定義ファイル：${e.slice(this.lenRootPath)}`))}let l="["+r;const u=o[r];return u?(u.param.forEach(e=>{const t=`${e.name}=${e.default?`%${e.name}|${e.default}`:"【必須】"}`;l+=" "+t}),new a.Hover(new a.MarkdownString(`~~~skynovel\n(タグ) ${l}]\n~~~\n---\n${u.detail}`))):Promise.reject("Nothing md file.")}provideDefinition(e,t,n){return e.getWordRangeAtPosition(t,c.regTagName)?new Promise((n,r)=>{var i;const s=e.getText(e.getWordRangeAtPosition(t)),a=null!==(i=this.scrScn.hMacro[s])&&void 0!==i?i:this.scrScn.hPlugin[s];if(a)return n(a);const o=c.pickItems.find(e=>e.label===s);return o?(c.openTagRef(o),n()):r("No definition found")}):Promise.reject("No word here.")}provideReferences(e,t,n,r){return e.getWordRangeAtPosition(t,c.regTagName)?new Promise((n,r)=>{const i=e.getText(e.getWordRangeAtPosition(t)),s=this.scrScn.hMacroUse[i];return s?n(s):r("No references found")}):Promise.reject("No word here.")}prepareRename(e,t,n){const r=e.getWordRangeAtPosition(t,c.regTagName);return r?new Promise((n,i)=>{var s;const a=e.getText(e.getWordRangeAtPosition(t));if(a in c.hTag)return i("タグは変名できません");const o=null!==(s=this.scrScn.hPlugin[a])&&void 0!==s?s:this.scrScn.hMacro[a];return o?(this.nm4rename=a,n(e.uri===o.uri&&o.range.contains(t)?o.range:r)):i("未定義マクロ・タグです")}):Promise.reject("No word here.")}provideRenameEdits(e,t,n,r){return new Promise((e,t)=>{if(/(\s|　)/.test(n))return t("空白を含む変名はできません");if(n in c.hTag)return t("既にあるタグ名です");if(n in this.scrScn.hMacro)return t("既にあるマクロ名です");if(n in this.scrScn.hPlugin)return t("既にあるプラグイン定義タグ名です");const r=new a.WorkspaceEdit,i=this.scrScn.hMacroUse[this.nm4rename];i&&(this.scrScn.hMacroUse[n]=i,delete this.scrScn.hMacroUse[this.nm4rename],i.forEach(e=>r.replace(e.uri,e.range,n)));const s=this.scrScn.hPlugin[this.nm4rename];if(s)return this.scrScn.hPlugin[n]=s,delete this.scrScn.hPlugin[this.nm4rename],r.replace(s.uri,s.range,n),e(r);const o=this.scrScn.hMacro[this.nm4rename];return this.scrScn.hMacro[n]=o,delete this.scrScn.hMacro[this.nm4rename],r.replace(o.uri,o.range,n),e(r)})}provideCompletionItems(e,t,n,r){const i=e.lineAt(t.line),s=r.triggerCharacter;if("["===s){return"[]"===i.text.slice(t.character-1,t.character+1)?this.aCITagMacro:[]}const l=this.scrScn.hTagMacroUse[e.uri.path];if(!l)return[];const u=l.find(e=>e.rng.contains(t));if(!u)return[];const d=o[u.nm];if(!d)return[];if(" "===s)return d.param.map(e=>new a.CompletionItem(e.name,a.CompletionItemKind.Field));const m=e.getWordRangeAtPosition(t,c.REG_FIELD);if(!m)return[];const h=this.searchArgName(e.getText(m),d);if(-1===h)return[];const p=d.param[h];let f=null==p?void 0:p.rangetype;if(!f)return[];switch(f){case"Boolean":f="true、false"}if(f.includes("、"))return f.split("、").map(e=>new a.CompletionItem(e,a.CompletionItemKind.Keyword));let g=a.CompletionItemKind.Value;const y=this.scrScn.hPreWords[f];if(!y)return(null==p?void 0:p.default)?[new a.CompletionItem(p.default,g)]:[];switch(f){case"イベント名":g=a.CompletionItemKind.Event;break;case"代入変数名":g=a.CompletionItemKind.Variable;break;case"ジャンプ先":g=a.CompletionItemKind.Reference;break;case"スクリプトファイル名":case"画像ファイル名":case"音声ファイル名":case"HTMLファイル名":g=a.CompletionItemKind.File;break;default:g=a.CompletionItemKind.EnumMember}return y.slice(1,-1).split(",").map(e=>new a.CompletionItem(e,"const."===e.slice(0,6)?a.CompletionItemKind.Constant:g))}resolveCompletionItem(e,t){var n,i;if(e.kind===a.CompletionItemKind.Snippet){const t=c.hSnippet[e.label];t&&(e.insertText=new a.SnippetString(this.scrScn.cnvSnippet(t,r.CmnLib.getFn(null!==(i=null===(n=a.window.activeTextEditor)||void 0===n?void 0:n.document.fileName)&&void 0!==i?i:""))))}return e}provideSignatureHelp(e,t,n,r){var s;const l=e.uri.path;let u="";const d=this.scrScn.hTagMacroUse[l];if(!d)return Promise.reject("Nothing tag file.");if(r.isRetrigger){let n=this.rngPreTag;n=n.with(void 0,n.end.translate(2,0));const r=this.scrScn.analyzToken(e.getText(n));if(!r)return Promise.reject("No tag here.");if(u=r[0],n=n.with(void 0,e.positionAt(e.offsetAt(n.start)+u.length)),!new a.Range(n.start.translate(0,1),n.end.translate(0,-1)).contains(t))return Promise.reject("Out of tag.");this.rngPreTag=n}else{const n=null===(s=d.find(e=>e.rng.contains(t)))||void 0===s?void 0:s.rng;if(!n)return Promise.reject("No args here.");this.rngPreTag=n.with(void 0,n.end.translate(0,1)),u=e.getText(this.rngPreTag)}const m=i.ScriptScanner.analyzTagArg(u),h=null==m?void 0:m.groups;if(!h)return Promise.reject("No args here.");const p=h.name,f=this.scrScn.hMacro[p];if(f)return Promise.reject(`[${p}] マクロです 定義ファイル：${f.uri.path.slice(this.lenRootPath)}`);const g=o[p];if(!g)return Promise.reject("Nothing md file.");if(!r.isRetrigger){const e=new a.SignatureHelp,t=this.hArgDesc[p];let n="["+p;const r=[];g.param.length>0&&""!=g.param[0].name&&g.param.forEach(e=>{const t=`${e.name}=${e.required?"【必須】":`%${e.name}|${e.default}`}`;n+=" "+t,r.push(new a.ParameterInformation(t,new a.MarkdownString(e.comment)))});const i=new a.SignatureInformation(n+"]",t.doc);i.parameters=r,e.signatures=[i],this.preSigHelp=e}const y=e.getWordRangeAtPosition(t,c.REG_FIELD);return this.preSigHelp.activeParameter=y?this.searchArgName(e.getText(y),g):-1,this.preSigHelp}searchArgName(e,t){const n=e.search(/(?<=[^=]+)=/);if(-1===n){const n=new RegExp("^"+e.replace(/=.*$/,""));return t.param.findIndex(e=>n.test(e.name))}const r=e.slice(0,n);return t.param.findIndex(e=>e.name===r)}provideDocumentSymbols(e,t){const n=e.uri.path;return e.isDirty&&n in this.hScr2Pro?new Promise(e=>this.hRsvNm2Then["アウトライン"]=()=>{var t;e(null!==(t=this.scrScn.hSn2aDsOutline[n])&&void 0!==t?t:[])}):(this.hScr2Pro[n]=1,new Promise(e=>{var t;return e(null!==(t=this.scrScn.hSn2aDsOutline[n])&&void 0!==t?t:[])}))}setHDefPlg(e){this.scrScn.hPlugin=e}setEscape(e){this.scrScn.setEscape(e)}compare(e,t){const n=e.label+e.description,r=t.label+t.description;return n>r?1:n===r?0:-1}}t.CodingSupporter=c,c.pickItems=[],c.hTag={},c.hSnippet={},c.CMD_SCANSCR_TRGPARAMHINTS="extension.skynovel.scanScr_trgParamHints",c.REG_VAR=/;.+|[\[*]?[\d\w\.]+=?/,c.regTagName=/[^\s\[\]="'#;]+/,c.REG_FIELD=/(?<=\s)[^\s=[\]]+(?:=(?:[^"'#\s;\]]+|(["'#]).*?\1)?)?/},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptScanner=void 0;const r=n(8),i=n(70),s=n(6),a=n(12);class o{constructor(e,t,n){this.curPrj=e,this.clDiag=t,this.hTag=n,this.hPlugin={},this.hMacro={},this.hMacroUse={},this.hTagMacroUse={},this.hSetWords={"代入変数名":new Set,"ジャンプ先":new Set,"レイヤ名":new Set,"文字レイヤ名":new Set,"画像レイヤ名":new Set,"マクロ名":new Set,"スクリプトファイル名":new Set,"画像ファイル名":new Set,"音声ファイル名":new Set,"HTMLファイル名":new Set,"差分名称":new Set,"フレーム名":new Set,"サウンドバッファ":new Set,"文字出現演出名":new Set,"文字消去演出名":new Set},this.cnvSnippet=(e,t)=>e,this.hPreWords={"イベント名":"|Click,RightClick,MiddleClick,UpWheel,DownWheel,Control,Alt,Meta,Backspace,Enter,=,A,alt+A,ctrl+A,shift+A,alt+ctrl+A,ctrl+shift+A,alt+shift+A,alt+ctrl+shift+A,' ',ArrowLeft,ArrowRight,ArrowUp,ArrowDown,Tab,Delete,Home,End,PageUp,PageDown|","animation-timing-function":"|ease,ease-in,ease-out,ease-in-out,linear,step-start,step-end,cubic-bezier(...)|","イージング名":"|Back.In,Back.InOut,Back.Out,Bounce.In,Bounce.InOut,Bounce.Out,Circular.In,Circular.InOut,Circular.Out,Cubic.In,Cubic.InOut,Cubic.Out,Elastic.In,Elastic.InOut,Elastic.Out,Exponential.In,Exponential.InOut,Exponential.Out,Linear.None,Quadratic.In,Quadratic.InOut,Quadratic.Out,Quartic.In,Quartic.InOut,Quartic.Out,Quintic.In,Quintic.InOut,Quintic.Out,Sinusoidal.In,Sinusoidal.InOut,Sinusoidal.Out|","ブレンドモード名":"|normal,add,multiply,screen|"},this.hFn2JumpSnippet={},this.nm2Diag={},this.isDuplicateMacroDef=!1,this.wasDuplicateMacroDef=!1,this.hSn2aDsOutline={},this.hScr2KeyWord={},this.alzTagArg=new i.AnalyzeTagArg,this.fncToken=this.procToken,this.hTagProc={let_ml:e=>{var t;this.fncToken=(e,t)=>{const n=t.length;let r=0,i=-1;for(;(i=t.indexOf("\n",i+1))>=0;)++r;0===r?e.col+=n:(e.line+=r,e.col=n-t.lastIndexOf("\n")-1),this.fncToken=this.procToken};const n=null===(t=this.alzTagArg.hPrm.name)||void 0===t?void 0:t.val;n&&"&"!=n.charAt(0)&&(e.add("代入変数名\t"+n),this.hSetWords["代入変数名"].add(n))},macro:(e,t,n,r,i,a,c,l)=>{var u,d;const m=null===(u=this.alzTagArg.hPrm.name)||void 0===u?void 0:u.val;if(!m)return void i.push(new s.Diagnostic(r,`マクロ定義[${m}]の属性が異常です`,s.DiagnosticSeverity.Error));if(this.hTag[m])return void i.push(new s.Diagnostic(r,`定義済みのタグ[${m}]と同名のマクロは定義できません`,s.DiagnosticSeverity.Error));if(this.hPlugin[m])return void i.push(new s.Diagnostic(r,`プラグイン定義済みのタグ[${m}]と同名のマクロは定義できません`,s.DiagnosticSeverity.Error));const h=this.hMacro[m];if(!h){const e=n.match(o.regValName);if(!e)return void i.push(new s.Diagnostic(r,`マクロ定義（[${m}]）が異常です`,s.DiagnosticSeverity.Error));const l=(null!==(d=e.index)&&void 0!==d?d:0)+(e[3]?1:0);let u=0,h=l;for(;(h=n.lastIndexOf("\n",h-1))>=0;)++u;const p=a.line-c+u,f=(0===u?a.col-n.length:0)+l-n.lastIndexOf("\n",l)-1,g=new s.Range(p,f,p,f+m.length);this.hMacro[m]=new s.Location(t,g);const y=new s.DocumentSymbol(m,"マクロ定義",s.SymbolKind.Class,g,g);return this.aDsOutline.push(y),this.aDsOutlineStack.push(this.aDsOutline),void(this.aDsOutline=y.children)}if(this.isDuplicateMacroDef=!0,!i.find(e=>e.range===h.range)){const e=new s.Diagnostic(h.range,`マクロ定義（[${m}]）が重複`,s.DiagnosticSeverity.Error);h.uri===t?i.push(e):this.clDiag.set(h.uri,[e])}i.push(new s.Diagnostic(l.with({end:new s.Position(a.line,a.col+m.length)}),`マクロ定義（[${m}]）が重複`,s.DiagnosticSeverity.Error))},endmacro:()=>{var e;return this.aDsOutline=null!==(e=this.aDsOutlineStack.pop())&&void 0!==e?e:[]},if:(e,t,n,r)=>{const i=new s.DocumentSymbol(n,"",s.SymbolKind.Function,r,r);this.aDsOutline.push(i),this.aDsOutlineStack.push(this.aDsOutline),this.aDsOutline=i.children},elsif:(e,t,n,r,i,s,a,o)=>{var c;this.hTagProc.if(e,t,n,r,i,s,a,o),this.aDsOutline=null!==(c=this.aDsOutlineStack.pop())&&void 0!==c?c:[]},endif:()=>{var e;return this.aDsOutline=null!==(e=this.aDsOutlineStack.pop())&&void 0!==e?e:[]},s:(e,t,n,r)=>{this.aDsOutline.push(new s.DocumentSymbol(n,"",s.SymbolKind.Function,r,r))},let:e=>{var t;const n=null===(t=this.alzTagArg.hPrm.name)||void 0===t?void 0:t.val;n&&"&"!=n.charAt(0)&&(this.hSetWords["代入変数名"].add(n),e.add("代入変数名\t"+n))},add_frame:e=>{var t;const n=null===(t=this.alzTagArg.hPrm.id)||void 0===t?void 0:t.val;n&&"&"!=n.charAt(0)&&(this.hSetWords["フレーム名"].add(n),e.add("フレーム名\t"+n))},playbgm:e=>{this.hSetWords["サウンドバッファ"].add("BGM"),e.add("サウンドバッファ\tBGM")},playse:e=>{var t,n;const r=null!==(n=null===(t=this.alzTagArg.hPrm.buf)||void 0===t?void 0:t.val)&&void 0!==n?n:"SE";r&&"&"!=r.charAt(0)&&this.hSetWords["サウンドバッファ"].add(r),e.add("サウンドバッファ\t"+r)},button:e=>{var t,n,r,i,s,a;const o=null!==(n=null===(t=this.alzTagArg.hPrm.clicksebuf)||void 0===t?void 0:t.val)&&void 0!==n?n:"SYS";o&&"&"!=o.charAt(0)&&this.hSetWords["サウンドバッファ"].add(o),e.add("サウンドバッファ\t"+o);const c=null!==(i=null===(r=this.alzTagArg.hPrm.entersebuf)||void 0===r?void 0:r.val)&&void 0!==i?i:"SYS";c&&"&"!=c.charAt(0)&&this.hSetWords["サウンドバッファ"].add(c),e.add("サウンドバッファ\t"+c);const l=null!==(a=null===(s=this.alzTagArg.hPrm.leavesebuf)||void 0===s?void 0:s.val)&&void 0!==a?a:"SYS";l&&"&"!=l.charAt(0)&&this.hSetWords["サウンドバッファ"].add(l),e.add("サウンドバッファ\t"+l)},link:e=>{var t,n,r,i,s,a;const o=null!==(n=null===(t=this.alzTagArg.hPrm.clicksebuf)||void 0===t?void 0:t.val)&&void 0!==n?n:"SYS";o&&"&"!=o.charAt(0)&&this.hSetWords["サウンドバッファ"].add(o),e.add("サウンドバッファ\t"+o);const c=null!==(i=null===(r=this.alzTagArg.hPrm.entersebuf)||void 0===r?void 0:r.val)&&void 0!==i?i:"SYS";c&&"&"!=c.charAt(0)&&this.hSetWords["サウンドバッファ"].add(c),e.add("サウンドバッファ\t"+c);const l=null!==(a=null===(s=this.alzTagArg.hPrm.leavesebuf)||void 0===s?void 0:s.val)&&void 0!==a?a:"SYS";l&&"&"!=l.charAt(0)&&this.hSetWords["サウンドバッファ"].add(l),e.add("サウンドバッファ\t"+l)},ch_in_style:e=>{var t;const n=null===(t=this.alzTagArg.hPrm.name)||void 0===t?void 0:t.val;n&&"&"!=n.charAt(0)&&(this.hSetWords["文字出現演出名"].add(n),e.add("文字出現演出名\t"+n))},ch_out_style:e=>{var t;const n=null===(t=this.alzTagArg.hPrm.name)||void 0===t?void 0:t.val;n&&"&"!=n.charAt(0)&&(this.hSetWords["文字消去演出名"].add(n),e.add("文字消去演出名\t"+n))},add_lay:e=>{var t,n;const r=null===(t=this.alzTagArg.hPrm.layer)||void 0===t?void 0:t.val;if(!r)return;this.hSetWords["レイヤ名"].add(r),e.add("レイヤ名\t"+r);const i=("grp"===(null===(n=this.alzTagArg.hPrm.class)||void 0===n?void 0:n.val)?"画像":"文字")+"レイヤ名";this.hSetWords[i].add(r),e.add(`${i}\t${r}`)},add_face:e=>{var t;const n=null===(t=this.alzTagArg.hPrm.name)||void 0===t?void 0:t.val;n&&"&"!=n.charAt(0)&&(this.hSetWords["差分名称"].add(n),e.add("差分名称\t"+n))}},this.aDsOutlineStack=[],this.hTagProc.let_abs=this.hTagProc.let_char_at=this.hTagProc.let_index_of=this.hTagProc.let_length=this.hTagProc.let_replace=this.hTagProc.let_round=this.hTagProc.let_search=this.hTagProc.let_substr=this.hTagProc.let,this.hTagProc.set_frame=this.hTagProc.let_frame,this.hTagProc.jump=this.hTagProc.call=this.hTagProc.event=this.hTagProc.button=this.hTagProc.link=this.hTagProc.return=this.hTagProc.s,this.hTagProc.else=this.hTagProc.elsif}bldCnvSnippet(){let e=!0;const t=this.hSetWords["マクロ名"];t.clear();for(const e in this.hMacro)t.add(e);this.hSetWords["代入変数名"].add(o.sPredefWrtVar),this.hSetWords["文字出現演出名"].add("default"),this.hSetWords["文字消去演出名"].add("default");for(const t in this.hSetWords){const n=`|${[...this.hSetWords[t].values()].sort().join(",")}|`;this.hPreWords[t]!==n&&(e=!1),this.hPreWords[t]="||"===n?":"+t:n}e||(this.hFn2JumpSnippet={},this.cnvSnippet=(e,t)=>{const n=this.hPreWords["ジャンプ先"],r=this.hFn2JumpSnippet[t];this.hPreWords["ジャンプ先"]=null!=r?r:(()=>{if("string"!=typeof n)return"ジャンプ先";let e="";const r=(n.slice(1,-1)+",").replace(new RegExp(`fn=${t},(?:fn=${t} [^,|]+,)*`),t=>(e=t,""));return this.hFn2JumpSnippet[t]=`|${(e+r).slice(0,-1)}|`})();const i=e.replace(/{{([^\}]+)}}/g,(e,t)=>this.hPreWords[t]);return this.hPreWords["ジャンプ先"]=n,i})}goAll(){this.isDuplicateMacroDef=!1,this.hMacro={},this.hMacroUse={},this.hTagMacroUse={};for(const e in this.hSetWords)this.hSetWords[e]=new Set;this.clDiag.clear(),this.nm2Diag={},this.hScr2KeyWord={},this.hSn2aDsOutline={},r.treeProc(this.curPrj,e=>this.scanFile(s.Uri.file(e)));for(const e in this.hMacro){if(e in this.hMacroUse)continue;const t=this.hMacro[e];this.nm2Diag[t.uri.path].push(new s.Diagnostic(t.range,`未使用のマクロ[${e}]があります`,s.DiagnosticSeverity.Information))}for(const e in this.hMacroUse){if(e in this.hMacro)continue;if(e in this.hPlugin)continue;this.hMacroUse[e].forEach(t=>this.nm2Diag[t.uri.path].push(new s.Diagnostic(t.range,`未定義マクロ[${e}]を使用、あるいはスペルミスです`,s.DiagnosticSeverity.Warning)))}for(const e in this.nm2Diag)this.clDiag.set(s.Uri.file(e),this.nm2Diag[e]);this.isDuplicateMacroDef&&!this.wasDuplicateMacroDef&&s.window.showErrorMessage("[SKYNovel] プロジェクト内でマクロ定義が重複しています。どちらか削除して下さい",{modal:!0}),this.wasDuplicateMacroDef=this.isDuplicateMacroDef,this.bldCnvSnippet()}goFile(e){this.goInitFile(e),this.scanFile(e),this.goFinishFile(e)}goScriptSrc(e,t){this.goInitFile(e);const n=e.path,r=this.hScr2KeyWord[n];this.hScr2KeyWord[n]=new Set,this.scanScriptSrc(e,t),this.goFinishFile(e);const i=this.hScr2KeyWord[n];for(const e of r){if(i.has(e))continue;let t=!1;for(const r in this.hScr2KeyWord)if(r!==n&&(t=this.hScr2KeyWord[r].has(e)))break;if(t)continue;const r=e.split("\t");this.hSetWords[r[0]].delete(r[1])}}goInitFile(e){const t=e.path;this.isDuplicateMacroDef=!1;const n={};for(const e in this.hMacro){const r=this.hMacro[e];r.uri.path!=t&&(n[e]=r)}this.hMacro=n;const r={};for(const e in this.hMacroUse)this.hMacroUse[e].forEach(n=>{var i;n.uri.path!=t&&(r[e]=null!==(i=r[e])&&void 0!==i?i:[]).push(n)});this.hMacroUse=r,this.hTagMacroUse[t]=[],this.clDiag.delete(e),this.nm2Diag[t]=[]}goFinishFile(e){const t=e.path;for(const e in this.hMacro){if(e in this.hMacroUse)continue;const n=this.hMacro[e];n.uri.path!==t&&this.nm2Diag[n.uri.path].push(new s.Diagnostic(n.range,`未使用のマクロ[${e}]があります`,s.DiagnosticSeverity.Information))}for(const e in this.hMacroUse){if(e in this.hMacro)continue;if(e in this.hPlugin)continue;this.hMacroUse[e].forEach(n=>{n.uri.path!==t&&this.nm2Diag[n.uri.path].push(new s.Diagnostic(n.range,`未定義マクロ[${e}]を使用、あるいはスペルミスです`,s.DiagnosticSeverity.Warning))})}this.clDiag.set(e,this.nm2Diag[t]),this.isDuplicateMacroDef&&!this.wasDuplicateMacroDef&&s.window.showErrorMessage("[SKYNovel] プロジェクト内でマクロ定義が重複しています。どちらか削除して下さい",{modal:!0}),this.wasDuplicateMacroDef=this.isDuplicateMacroDef,this.bldCnvSnippet()}scanFile(e){var t,n,i,c;const l=e.path,u=r.CmnLib.getFn(l);if(".sn"!=l.slice(-3))return void(o.EXT_SPRITE.test(l)?this.hSetWords["画像ファイル名"].add(u):o.EXT_SOUND.test(l)?this.hSetWords["音声ファイル名"].add(u):o.EXT_HTML.test(l)&&this.hSetWords["HTMLファイル名"].add(u));this.hSetWords["スクリプトファイル名"].add(u),this.nm2Diag[l]=null!==(t=this.nm2Diag[l])&&void 0!==t?t:[],this.hSetWords["ジャンプ先"].add("fn="+u),this.hTagMacroUse[l]=null!==(n=this.hTagMacroUse[l])&&void 0!==n?n:[],this.hScr2KeyWord[l]=null!==(i=this.hScr2KeyWord[l])&&void 0!==i?i:new Set;const d=s.workspace.textDocuments.find(t=>t.fileName===e.fsPath);this.scanScriptSrc(e,null!==(c=null==d?void 0:d.getText())&&void 0!==c?c:a.readFileSync(e.fsPath,{encoding:"utf8"}))}scanScriptSrc(e,t){const n=e.path,i=this.nm2Diag[n],a={},c=this.hScr2KeyWord[n];this.aDsOutline=this.hSn2aDsOutline[n]=[],this.fncToken=this.procToken=(t,l)=>{var u,d;const m=l.charCodeAt(0),h=l.length;if(9===m)return void(t.col+=h);if(10===m)return t.line+=h,void(t.col=0);if(38===m){if(t.col+=h,"&"===l.substr(-1))return;try{const e=o.splitAmpersand(l.slice(1));if("&"!=e.name.charAt(0)){const t=e.name.trimEnd();this.hSetWords["代入変数名"].add(t),c.add("代入変数名\t"+t)}}catch{}return}if(59===m){const n=l.match(/#NO_WARM_UNUSED_MACRO\s+(\S+)/);if(n){const r=n[1];(this.hMacroUse[r]=null!==(u=this.hMacroUse[r])&&void 0!==u?u:[]).push(new s.Location(e,new s.Range(t.line,t.col+22,t.line,t.col+22+h)))}return void(t.col+=h)}const p=new s.Range(t.line,t.col,t.line,t.col+h);if(42===m&&l.length>1){t.col+=h;const e=`fn=${r.CmnLib.getFn(n)} label=${l}`;if(this.hSetWords["ジャンプ先"].add(e),c.add("ジャンプ先\t"+e),this.aDsOutline.push(new s.DocumentSymbol(l,"",s.SymbolKind.Key,p,p)),"*"===l.charAt(1))return;if(l in a){const e=a[l];e&&(i.push(new s.Diagnostic(e,`同一スクリプトにラベル【${l}】が重複しています`,s.DiagnosticSeverity.Error)),a[l]=null),i.push(new s.Diagnostic(p,`同一スクリプトにラベル【${l}】が重複しています`,s.DiagnosticSeverity.Error))}else a[l]=p;return}if(91!=m)return t.col+=h,void this.aDsOutline.push(new s.DocumentSymbol(l,"",s.SymbolKind.String,p,p));const f=o.REG_TAG.exec(l);if(!f)return i.push(new s.Diagnostic(p,`タグ記述【${l}】異常です`,s.DiagnosticSeverity.Error)),void(t.col+=h);let g=0,y=-1;for(;(y=l.indexOf("\n",y+1))>=0;)++g;g<=0?t.col+=h:(t.line+=g,t.col=h-l.lastIndexOf("\n")-1,g>10&&i.push(new s.Diagnostic(new s.Range(p.start.line,p.start.character-1,t.line,0),"改行タグが10行を超えています",s.DiagnosticSeverity.Warning)));const v=f.groups.name;if(this.hTagMacroUse[n].push({nm:v,rng:p.with(void 0,new s.Position(t.line,t.col))}),v in this.hPlugin)return;const b=new s.Range(p.start,p.end.translate(0,f.groups.name.length-h)),S=new s.Range(b.start.translate(0,1),b.end.translate(0,1));if(!(v in this.hTag)){const t=null!==(d=this.hMacroUse[v])&&void 0!==d?d:[];return t.push(new s.Location(e,S)),void(this.hMacroUse[v]=t)}const _=this.hTagProc[v];_&&(this.alzTagArg.go(f.groups.args),_(c,e,l,S,i,t,g,b))};const l={line:0,col:0};this.resolveScript(t).aToken.forEach(e=>{e&&this.fncToken(l,e)})}procToken(e,t){}static splitAmpersand(e){const t=e.replace(/==/g,"＝").replace(/!=/g,"≠").split("="),n=t.length;if(n<2||n>3)throw"「&計算」書式では「=」指定が一つか二つ必要です";if("&"===t[1].charAt(0))throw"「&計算」書式では「&」指定が不要です";return{name:t[0].replace(/＝/g,"==").replace(/≠/g,"!="),text:t[1].replace(/＝/g,"==").replace(/≠/g,"!="),cast:3===n?t[2].trim():null}}resolveScript(e){var t;const n=null!==(t=e.replace(/(\r\n|\r)/g,"\n").match(this.REG_TOKEN))&&void 0!==t?t:[];for(let e=n.length-1;e>=0;--e){const t=n[e];if(o.REG_TAG_LET_ML.test(t)){const r=t.indexOf("]")+1;if(0===r)throw"[let_ml]で閉じる【]】がありません";const i=t.slice(0,r),s=t.slice(r);n.splice(e,1,i,s)}}const r={aToken:n,len:n.length,aLNum:[]};return this.replaceScript_let_ml(r),r}replaceScript_let_ml(e,t=0){var n;for(let r=e.len-1;r>=t;--r){const t=e.aToken[r];if(o.REG_TAG_LET_ML.test(t)){const i=t.indexOf("]")+1,s=t.slice(i),a=(null!==(n=s.match(/\n/g))&&void 0!==n?n:[]).length;e.aToken.splice(r,1,t.slice(0,i),s),e.aLNum.splice(r,0,e.aLNum[r]);const o=e.aToken.length;for(let t=r+2;t<o;++t)e.aLNum[t]+=a}}e.len=e.aToken.length}analyzToken(e){return this.REG_TOKEN.lastIndex=0,this.REG_TOKEN.exec(e)}setEscape(e){this.REG_TOKEN=new RegExp((e?`\\${e}\\S|`:"")+"\\n+|\\t+|\\[let_ml\\s+[^\\]]+\\].+?(?=\\[endlet_ml[\\]\\s])|\\[(?:[^\"'#;\\]]+|([\"'#]).*?\\1|;[^\\n]*)*?]|;[^\\n]*|&[^&\\n]+&|&&?[^;\\n\\t&]+|^\\*\\w+"+`|[^\\n\\t\\[;${e?"\\"+e:""}]+`,"gs"),this.goAll()}}t.ScriptScanner=o,o.sPredefWrtVar="save:sn.doRecLog\nsys:sn.auto.msecLineWait\nsys:sn.auto.msecLineWait_Kidoku\nsys:sn.auto.msecPageWait\nsys:sn.auto.msecPageWait_Kidoku\nsys:sn.skip.mode\nsys:sn.tagCh.canskip\nsys:sn.tagCh.doWait\nsys:sn.tagCh.doWait_Kidoku\nsys:sn.tagCh.msecWait\nsys:sn.tagCh.msecWait_Kidoku\nsys:TextLayer.Back.Alpha\nsn.auto.enabled\nsn.button.fontFamily\nsn.event.domdata.（任意）\nsn.eventArg\nsn.eventLabel\nsn.skip.all\nsn.skip.enabled\nsn.tagL.enabled".replace(/\n/g,","),o.EXT_SPRITE=/\.(png|jpg|jpeg|json|svg|webp|mp4|webm)$/,o.EXT_SOUND=/\.(mp3|m4a|ogg|aac|flac|wav)$/,o.EXT_HTML=/\.(htm|html)$/,o.regValName=/(?<=name\s*=\s*)([^"'#;\]]+|(["'#])(.*?)\2)/m,o.REG_TAG_LET_ML=/^\[let_ml\s/g,o.REG_TAG=/\[(?<name>[^\s;\]]+)\s*(?<args>(?:[^"'#\]]+|(["'#]).*?\3)*?)]/,o.analyzTagArg=e=>o.REG_TAG.exec(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyzeTagArg=void 0;t.AnalyzeTagArg=class{constructor(){this.REG_TAGARG=/;.*\n|(?<key>\w+)(?:\s+|;[^\n]*\n)*=(?:\s+|;.*\n)*(?:(?<val>[^\s"'#|;]+)|(["'#])(?<val2>.*?)\3)(?:\|(?:(?<def>[^\s"'#;]+)|(["'#])(?<def2>.*?)\6))?|(?<literal>[^\s;]+)/g,this.$hPrm={},this.$isKomeParam=!1}go(e){var t,n;if(this.$hPrm={},this.$isKomeParam=!1,!e)return;let r=null;for(;r=this.REG_TAGARG.exec(e);){const e=null==r?void 0:r.groups;e&&(e.key?this.$hPrm[e.key]={val:null!==(t=e.val)&&void 0!==t?t:e.val2,def:null!==(n=e.def)&&void 0!==n?n:e.def2}:e.literal&&("*"===e.literal?this.$isKomeParam=!0:this.$hPrm[e.literal]={val:"1"}))}}get hPrm(){return this.$hPrm}get isKomeParam(){return this.$isKomeParam}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initDebug=void 0;const r=n(6),i=n(72),s=n(1),a=n(78),{Subject:o}=n(79);function c(e){return new Promise(t=>setTimeout(t,e))}t.initDebug=function(e,t){var n;const i=null!==(n=t.language)&&void 0!==n?n:"";r.debug.registerDebugConfigurationProvider(i,{provideDebugConfigurations:e=>[{name:"1.アプリを起動",type:"node",request:"launch"},{name:"2.アプリに接続",type:"skynovel",request:"attach"},{name:"2b.デバッガ",type:"skynovel",request:"launch"}]}),e.subscriptions.push(r.debug.registerDebugConfigurationProvider("node",{resolveDebugConfiguration:(e,t)=>({program:"${workspaceFolder}/doc/app.js",runtimeExecutable:"${workspaceFolder}/node_modules/.bin/electron",windows:{runtimeExecutable:"${workspaceFolder}/node_modules/.bin/electron.cmd"},console:"integratedTerminal",autoAttachChildProcesses:!0,skipFiles:["<node_internals>/**/*.js"],...t,env:{SKYNOVEL_DBG:"on",...t.env}})})),e.subscriptions.push(r.debug.registerDebugConfigurationProvider(i,{resolveDebugConfiguration:(e,t)=>({cwd:"${workspaceFolder}",...t})}));const s={createDebugAdapterDescriptor:e=>new r.DebugAdapterInlineImplementation(new l)};e.subscriptions.push(r.debug.registerDebugAdapterDescriptorFactory(i,s)),"dispose"in s&&e.subscriptions.push(s)};class l extends i.LoggingDebugSession{constructor(){super("sn_debug.txt"),this.dbg=new a.Debugger,this.cfgDone=new o,this.hdlsVar=new i.Handles,this.hNm2HdlNm={},this.mapCancelationTokens=new Map,this.mapIsLongrunning=new Map,this.hScope={tmp:{},sys:{},save:{},mp:{}},this.setDebuggerLinesStartAt1(!0),this.setDebuggerColumnsStartAt1(!0),this.dbg.on("stopOnEntry",()=>{this.sendEvent(new i.StoppedEvent("entry",l.THREAD_ID))}),this.dbg.on("stopOnStep",()=>{this.sendEvent(new i.StoppedEvent("step",l.THREAD_ID))}),this.dbg.on("stopOnBreakpoint",()=>{this.sendEvent(new i.StoppedEvent("breakpoint",l.THREAD_ID))}),this.dbg.on("stopOnDataBreakpoint",()=>{this.sendEvent(new i.StoppedEvent("data breakpoint",l.THREAD_ID))}),this.dbg.on("stopOnException",()=>{this.sendEvent(new i.StoppedEvent("exception",l.THREAD_ID))}),this.dbg.on("breakpointValidated",e=>{this.sendEvent(new i.BreakpointEvent("changed",{verified:e.verified,id:e.id}))}),this.dbg.on("output",(e,t,n,r)=>{const s=new i.OutputEvent(e+"\n");"start"!==e&&"startCollapsed"!==e&&"end"!==e||(s.body.group=e,s.body.output=`group-${e}\n`),s.body.source=this.createSource(t),s.body.line=this.convertDebuggerLineToClient(n),s.body.column=this.convertDebuggerColumnToClient(r),this.sendEvent(s)}),this.dbg.on("end",()=>this.sendEvent(new i.TerminatedEvent))}initializeRequest(e,t){var n;e.body=null!==(n=e.body)&&void 0!==n?n:{},e.body.supportsConfigurationDoneRequest=!0,e.body.supportsFunctionBreakpoints=!0,e.body.supportsConditionalBreakpoints=!0,e.body.supportsHitConditionalBreakpoints=!0,e.body.supportsEvaluateForHovers=!0,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!0,e.body.supportsCompletionsRequest=!0,e.body.supportsRestartRequest=!0,e.body.supportsDataBreakpoints=!0,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,this.sendResponse(e),this.sendEvent(new i.InitializedEvent)}disconnectRequest(e,t,n){this.dbg.end()}configurationDoneRequest(e,t){this.cfgDone.notify()}launchRequest(e,t){i.logger.setup(i.Logger.LogLevel.Stop,!1),this.dbg.launch(t)}attachRequest(e,t){i.logger.setup(i.Logger.LogLevel.Stop,!1),this.dbg.attach(t)}async restartRequest(e,t){await this.dbg.restart(e.request_seq),this.sendResponse(e)}setBreakPointsRequest(e,t){var n;const r=t.source.path;this.dbg.clearBreakpoints(r),e.body={breakpoints:(null!==(n=t.breakpoints)&&void 0!==n?n:[]).map(e=>{const{verified:t,ln:n,id:s}=this.dbg.setBreakPoint(r,this.convertClientLineToDebugger(e.line),e),a=new i.Breakpoint(t,this.convertDebuggerLineToClient(n));return a.id=s,a})},this.sendResponse(e)}async setFunctionBreakPointsRequest(e,t,n){const r=[];e.body={breakpoints:[]},t.breakpoints.forEach(t=>{t.enabled&&r.push({name:t.name}),e.body.breakpoints.push({verified:Boolean(t.name)})}),await this.dbg.setFuncBreakpoint(e.request_seq,r),this.sendResponse(e)}pauseRequest(e,t){console.log("fn:DebugAdapter.ts line:288 pauseRequest args:"+JSON.stringify(t))}threadsRequest(e){e.body={threads:[new i.Thread(l.THREAD_ID,"thread 1")]},this.sendResponse(e)}async stackTraceRequest(e,t){const n="number"==typeof t.startFrame?t.startFrame:0,r=n+("number"==typeof t.levels?t.levels:1e3),s=await this.dbg.stack(e.request_seq,n,r);e.body={stackFrames:s.map((e,t)=>new i.StackFrame(t,e.nm,this.createSource(e.fn),this.convertDebuggerLineToClient(e.ln),this.convertDebuggerColumnToClient(e.col))),totalFrames:s.length},this.sendResponse(e)}scopesRequest(e,t){this.hScope={tmp:{},sys:{},save:{},mp:{}},e.body={scopes:[new i.Scope("雑用変数 tmp:",this.hdlsVar.create("tmp"),!1),new i.Scope("雑用変数 tmp:（SKYNovel組み込み）",this.hdlsVar.create("tmp:sn"),!1),new i.Scope("マクロ変数 mp:",this.hdlsVar.create("mp"),!1),new i.Scope("システム変数 sys:",this.hdlsVar.create("sys"),!1),new i.Scope("システム変数 sys:（SKYNovel組み込み）",this.hdlsVar.create("sys:sn"),!1),new i.Scope("セーブ変数 save:",this.hdlsVar.create("save"),!1),new i.Scope("セーブ変数 save:（SKYNovel組み込み）",this.hdlsVar.create("save:sn"),!1)]},this.sendResponse(e)}async variablesRequest(e,t,n){const r=[];if(this.mapIsLongrunning.get(t.variablesReference)){console.log("fn:DebugAdapter.ts line:329 "),n&&this.mapCancelationTokens.set(n.seq,!1);for(let e=0;e<100&&(await c(1e3),r.push({name:"i_"+e,type:"integer",value:""+e,variablesReference:0}),!n||!this.mapCancelationTokens.get(n.seq));e++);n&&this.mapCancelationTokens.delete(n.seq)}else{let n=this.hdlsVar.get(t.variablesReference);if(n){let t=!0;":sn"===n.slice(-3)&&(t=!1,n=n.slice(0,-3));let i={};if(n in this.hScope)this.hScope[n]=i=await this.dbg.var(e.request_seq,n);else{const e=(n+":").split(":",2),t=this.hScope[e[0]];if(t){const n=t[e[1]];n&&(i=JSON.parse(String(n)))}}for(const e in i){if(l.REG_SN_VAR.test(e)===t)continue;const s=String(i[e]),a={name:e,type:this.getType(s),value:s,presentationHint:{kind:"property",visibility:"public"},variablesReference:0};"const."===e.slice(0,6)&&(a.presentationHint.attributes=["readOnly"]),"[object Object]"===s?a.value=JSON.stringify(i[e]):"object"!==a.type&&"array"!==a.type||(this.hNm2HdlNm[`${n}:${e}`]=a.variablesReference=this.hdlsVar.create(`${n}:${e}`)),r.push(a)}}}e.body={variables:r.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)},this.sendResponse(e)}getType(e){let t="string";if("true"===e||"false"===e)t="boolean";else if("[object Object]"===e)t="object";else if(/^[+-]?[0-9]+([0-9]*)?$/.test(e))t="integer";else if(/^[+-]?[0-9]+(\.[0-9]*)?([eE][+-]?[0-9]+)?$/.test(e))t="float";else if(e){const n=e.charAt(0);"{"!==n&&"["!==n||(t="{"===n?"object":"array")}return t}async setVariableRequest(e,t,n){await this.dbg.setVariable(e.request_seq,t.name,t.value),e.body={value:t.value},this.sendResponse(e)}continueRequest(e,t){this.dbg.continue(),this.sendResponse(e)}reverseContinueRequest(e,t){this.dbg.continue(!0),this.sendResponse(e)}nextRequest(e,t){this.dbg.step(),this.sendResponse(e)}stepInRequest(e,t,n){this.dbg.stepin(),this.sendResponse(e)}stepOutRequest(e,t,n){this.dbg.stepout(),this.sendResponse(e)}stepBackRequest(e,t){this.dbg.step(!0),this.sendResponse(e)}async evaluateRequest(e,t){var n;switch(t.context){case"hover":const r=this.getVar(t.expression);if(!r.exist){e.body={result:`変数 ${r.fullnm} はありません`,variablesReference:0};break}const i=this.hNm2HdlNm[null!==(n=r.fullnm)&&void 0!==n?n:""];e.body={result:`変数（${r.fullnm}）の値${i?"":`【${r.ret}】`}`,presentationHint:{kind:"property",visibility:"public",attributes:r.const?["readOnly"]:void 0},variablesReference:null!=i?i:0};break;case"watch":{const n=await this.dbg.eval(e.request_seq,t.expression);e.body=n?{result:n,presentationHint:{kind:"formula",visibility:"public"},variablesReference:0}:{result:"【null】",variablesReference:0}}break;case"repl":{const n=await this.dbg.eval(e.request_seq,t.expression);e.body={result:n?"="+n:"【null】",variablesReference:0}}}this.sendResponse(e)}getVar(e){const t=(e+":").split(":",2),n=""===t[1]?"tmp":t[0],r=""===t[1]?t[0]:t[1];switch(n){case"tmp":case"sys":case"save":case"mp":break;default:return{exist:!1}}const i="const."===r.slice(0,6),s=this.hScope[n];return r in s?{exist:!0,fullnm:`${n}:${r}`,ret:s[r],const:i}:{exist:!1,fullnm:`${n}:${r}`}}breakpointLocationsRequest(e,t,n){if(console.log("fn:DebugAdapter.ts line:644 breakpointLocationsRequest() args.source.path:"+t.source.path),t.source.path){const n=this.dbg.getBreakpoints(t.source.path,this.convertClientLineToDebugger(t.line));e.body={breakpoints:n.map(e=>({line:t.line,column:this.convertDebuggerColumnToClient(e)}))}}else e.body={breakpoints:[]};this.sendResponse(e)}dataBreakpointInfoRequest(e,t){if(t.variablesReference&&t.name){const n=this.getVar(t.name);n.exist&&(e.body={dataId:n.fullnm,description:"変数値変更："+n.fullnm,accessTypes:["write"],canPersist:!0})}else e.body={dataId:null,description:"cannot break on data access"};this.sendResponse(e)}async setDataBreakpointsRequest(e,t){const n=[];e.body={breakpoints:[]},t.breakpoints.forEach(t=>{t.enabled&&n.push({dataId:t.dataId}),e.body.breakpoints.push({verified:Boolean(t.dataId)})}),await this.dbg.setDataBreakpoint(e.request_seq,n),this.sendResponse(e)}completionsRequest(e,t){e.body={targets:[{label:"item 10",sortText:"10"},{label:"item 1",sortText:"01"},{label:"item 2",sortText:"02"},{label:"array[]",selectionStart:6,sortText:"03"},{label:"func(arg)",selectionStart:5,selectionLength:3,sortText:"04"}]},this.sendResponse(e)}cancelRequest(e,t){t.requestId&&this.mapCancelationTokens.set(t.requestId,!0)}createSource(e){return new i.Source(s.basename(e),this.convertDebuggerPathToClient(e),void 0,void 0,"mock-adapter-data")}}l.THREAD_ID=1,l.REG_SN_VAR=/^(?:const\.)?sn\./},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(22);t.DebugSession=r.DebugSession,t.InitializedEvent=r.InitializedEvent,t.TerminatedEvent=r.TerminatedEvent,t.StoppedEvent=r.StoppedEvent,t.ContinuedEvent=r.ContinuedEvent,t.OutputEvent=r.OutputEvent,t.ThreadEvent=r.ThreadEvent,t.BreakpointEvent=r.BreakpointEvent,t.ModuleEvent=r.ModuleEvent,t.LoadedSourceEvent=r.LoadedSourceEvent,t.CapabilitiesEvent=r.CapabilitiesEvent,t.ProgressStartEvent=r.ProgressStartEvent,t.ProgressUpdateEvent=r.ProgressUpdateEvent,t.ProgressEndEvent=r.ProgressEndEvent,t.Thread=r.Thread,t.StackFrame=r.StackFrame,t.Scope=r.Scope,t.Variable=r.Variable,t.Breakpoint=r.Breakpoint,t.Source=r.Source,t.Module=r.Module,t.CompletionItem=r.CompletionItem,t.ErrorDestination=r.ErrorDestination;const i=n(75);t.LoggingDebugSession=i.LoggingDebugSession;const s=n(34);t.Logger=s;const a=n(24);t.Event=a.Event,t.Response=a.Response;const o=n(77);t.Handles=o.Handles;const c=s.logger;t.logger=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23),i=n(24);class s{get event(){return this._event||(this._event=(e,t)=>{let n;return this._listener=e,this._this=t,n={dispose:()=>{this._listener=void 0,this._this=void 0}},n}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch(e){}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}}class a extends r.EventEmitter{constructor(){super(),this._sendMessage=new s,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,n=this._pendingRequests.get(t.request_seq);n&&(this._pendingRequests.delete(t.request_seq),n(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=new Buffer(0),e.on("data",e=>this._handleData(e)),e.on("close",()=>{this._emitEvent(new i.Event("close"))}),e.on("error",e=>{this._emitEvent(new i.Event("error","inStream error: "+(e&&e.message)))}),t.on("error",e=>{this._emitEvent(new i.Event("error","outStream error: "+(e&&e.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error("attempt to send more than one response for command "+e.command):this._send("response",e)}sendRequest(e,t,n,r){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this._send("request",s),r){this._pendingRequests.set(s.seq,r);const e=setTimeout(()=>{clearTimeout(e);const t=this._pendingRequests.get(s.seq);t&&(this._pendingRequests.delete(s.seq),t(new i.Response(s,"timeout")))},n)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){const e=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(e,"utf8")}\r\n\r\n${e}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){const e=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,e.length>0)try{let t=JSON.parse(e);this.handleMessage(t)}catch(e){this._emitEvent(new i.Event("error","Error handling data: "+(e&&e.message)))}continue}}else{const e=this._rawData.indexOf(a.TWO_CRLF);if(-1!==e){const t=this._rawData.toString("utf8",0,e).split("\r\n");for(let e=0;e<t.length;e++){const n=t[e].split(/: +/);"Content-Length"==n[0]&&(this._contentLength=+n[1])}this._rawData=this._rawData.slice(e+a.TWO_CRLF.length);continue}}break}}}a.TWO_CRLF="\r\n\r\n",t.ProtocolServer=a},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),i=r.logger,s=n(22);class a extends s.DebugSession{constructor(e,t,n){super(t,n),this.obsolete_logFilePath=e,this.on("error",e=>{i.error(e.body)})}start(e,t){super.start(e,t),i.init(e=>this.sendEvent(e),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof r.LogOutputEvent)){let t=e;e instanceof s.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t=Object.assign({},e),t.body=Object.assign({},e.body,{output:"<output not logged>"})),i.verbose("To client: "+JSON.stringify(t))}super.sendEvent(e)}sendRequest(e,t,n,r){i.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${n}`),super.sendRequest(e,t,n,r)}sendResponse(e){i.verbose("To client: "+JSON.stringify(e)),super.sendResponse(e)}dispatchRequest(e){i.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}}t.LoggingDebugSession=a},function(e,t,n){var r=n(1),i=n(7),s=parseInt("0777",8);function a(e,t,n,o){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,l=t.fs||i;void 0===c&&(c=s),o||(o=null);var u=n||function(){};e=r.resolve(e),l.mkdir(e,c,(function(n){if(!n)return u(null,o=o||e);switch(n.code){case"ENOENT":if(r.dirname(e)===e)return u(n);a(r.dirname(e),t,(function(n,r){n?u(n,r):a(e,t,u,r)}));break;default:l.stat(e,(function(e,t){e||!t.isDirectory()?u(n,o):u(null,o)}))}}))}e.exports=a.mkdirp=a.mkdirP=a,a.sync=function e(t,n,a){n&&"object"==typeof n||(n={mode:n});var o=n.mode,c=n.fs||i;void 0===o&&(o=s),a||(a=null),t=r.resolve(t);try{c.mkdirSync(t,o),a=a||t}catch(i){switch(i.code){case"ENOENT":a=e(r.dirname(t),n,a),e(t,n,a);break;default:var l;try{l=c.statSync(t)}catch(e){throw i}if(!l.isDirectory())throw i}}return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Handles=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle="number"==typeof e?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0;const r=n(7),i=n(23),s=n(33);class a extends i.EventEmitter{constructor(){super(...arguments),this.hProcSnRes={stopOnStep:e=>(this.sendEvent2Adpt(e.type),!1),stopOnBreakpoint:e=>(this.sendEvent2Adpt(e.type),!1),stopOnDataBreakpoint:e=>(this.sendEvent2Adpt(e.type),!1)},this.sktDbg=null,this.sktBuf="",this.idBreakpoint=0,this.mapPath2InfBP=new Map,this.setDataBreakpoint=(e,t)=>new Promise(n=>{this.send2SN({type:"set_data_break",ri:e,a:t}),this.hProcSnRes[e]=e=>(n(e.v),!0)}),this.setFuncBreakpoint=(e,t)=>new Promise(n=>{this.send2SN({type:"set_func_break",ri:e,a:t}),this.hProcSnRes[e]=e=>(n(e.v),!0)}),this.setVariable=(e,t,n)=>new Promise(r=>{this.send2SN({type:"set_var",ri:e,nm:t,val:n}),this.hProcSnRes[e]=e=>(r(e.v),!0)}),this.scriptFn_=""}launch(e){const t=e.cwd+"/.vscode/sn_launch.sock";try{r.unlinkSync(t)}catch{}s.createServer(()=>this.attach(e,"launch")).listen(t)}attach(e,t="attach"){this.sktDbg=s.createConnection(e.cwd+"/.vscode/skynovel.sock").on("data",e=>{const t=e.toString();""==t.charAt(0)&&t.slice(1).split("").forEach(e=>{const t=JSON.parse(e);this.hProcSnRes[t.type](t)&&(this.hProcSnRes[t.type]=()=>!1)})}).on("close",()=>{this.send2SN=()=>{},this.sktDbg=null}).on("error",e=>console.error(e.message)),this.sktDbg.write(this.sktBuf),this.sktBuf="",this.send2SN=e=>{var t;return null===(t=this.sktDbg)||void 0===t?void 0:t.write(""+JSON.stringify(e))},this.loadSource(e.cwd+"/doc/prj/script/main.sn"),this.verifyBreakpoints(this.scriptFn_),this.send2SN({type:t})}send2SN(e){this.sktBuf=this.sktBuf+""+JSON.stringify(e)}end(){var e;this.send2SN({type:"disconnect"}),null===(e=this.sktDbg)||void 0===e||e.end()}continue(e=!1){this.send2SN({type:"continue",reverse:e})}step(e=!1){this.send2SN({type:"stepover",reverse:e})}stepin(){this.send2SN({type:"stepin"})}stepout(){this.send2SN({type:"stepout"})}restart(e){return new Promise(t=>{this.send2SN({type:"restart",ri:e}),this.hProcSnRes[e]=()=>(t(),!0)})}var(e,t){return new Promise(n=>{this.send2SN({type:"var",ri:e,scope:t}),this.hProcSnRes[e]=e=>(n(e.v),!0)})}stack(e,t,n){return new Promise(r=>{this.send2SN({type:"stack",ri:e}),this.hProcSnRes[e]=e=>(r(Array.isArray(e.a)?e.a.slice(t,n):[]),!0)})}eval(e,t){return new Promise(n=>{this.send2SN({type:"eval",ri:e,txt:t}),this.hProcSnRes[e]=e=>(n(e.v),!0)})}getBreakpoints(e,t){console.log(`fn:Debugger.ts line:78 getBreakpoints(fn:${e}, ln:${t})`);let n=!0;const r=[],i=this.aLinesScript[t],s=i.length;for(let e=0;e<s;++e)" "!==i[e]?n&&(r.push(e),n=!1):n=!0;return r}setBreakPoint(e,t,n){const r={verified:!1,ln:t,id:++this.idBreakpoint},i=this.mapPath2InfBP.get(e);return i?i.push(r):this.mapPath2InfBP.set(e,[r]),this.verifyBreakpoints(e),this.send2SN({...n,type:"add_break",fn:e,ln:t}),r}delBreakPoint(e,t){const n=this.mapPath2InfBP.get(e);if(!n)return;const r=n.findIndex(e=>e.ln===t);if(-1==r)return;const i=n[r];return n.splice(r,1),this.send2SN({type:"del_break",fn:e,ln:t}),i}clearBreakpoints(e){this.mapPath2InfBP.delete(e),this.send2SN({type:"clear_break",fn:e})}verifyBreakpoints(e){const t=this.mapPath2InfBP.get(e);t&&(this.loadSource(e),t.forEach(e=>{if(e.verified||e.ln>=this.aLinesScript.length)return;const t=this.aLinesScript[e.ln].trim();0!==t.length&&";"!==t.charAt(0)||++e.ln,e.verified=!0,this.sendEvent2Adpt("breakpointValidated",e)}))}get scriptFn(){return this.scriptFn_}loadSource(e){this.scriptFn_!==e&&(this.scriptFn_=e,this.aLinesScript=r.readFileSync(this.scriptFn_).toString().split("\n"))}sendEvent2Adpt(e,...t){setImmediate(n=>this.emit(e,...t))}}t.Debugger=a},function(e,t){function n(){this.waiters=[]}n.prototype.wait=function(e){var t=this,n={};this.waiters.push(n);var r=new Promise((function(e){var r=!1;n.resolve=function(i){if(!r){if(r=!0,n.timeout&&(clearTimeout(n.timeout),n.timeout=null),!i){var s=t.waiters.indexOf(n);s>-1&&t.waiters.splice(s,1)}e()}}}));return e>0&&isFinite(e)&&(n.timeout=setTimeout((function(){n.timeout=null,n.resolve()}),e)),r},n.prototype.notify=function(){this.waiters.length>0&&this.waiters.pop().resolve(!0)},n.prototype.notifyAll=function(){for(var e=this.waiters.length-1;e>=0;e--)this.waiters[e].resolve(!0);this.waiters=[]},t.Subject=n},function(e){e.exports=JSON.parse('{"add_face":{"detail":"差分名称の定義  \\n差分名称を定義する","param":[{"name":"name","required":"y","default":"","rangetype":"差分名称","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)タグface属性で指定する差分名称"},{"name":"fn","required":"","default":"属性nameの値","rangetype":"画像ファイル名","comment":"表示する画像、アニメpng"},{"name":"dx","required":"","default":"0","rangetype":"基本画像左上を(0, 0)とする座標","comment":"差分画像の表示横位置"},{"name":"dy","required":"","default":"0","rangetype":"基本画像左上を(0, 0)とする座標","comment":"差分画像の表示縦位置"},{"name":"blendmode","required":"","default":"何もしない","rangetype":"ブレンドモード名","comment":"このレイヤと下のレイヤとの重なりにおいて、ドット単位で色のブレンド演算を行なう"}],"snippet":[{"nm":"add_face","txt":"add_face name=${1{{画像ファイル名}}}"}],"comment":"本タグだけでは差分画像を表示しない。画像レイヤの[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)タグface属性で指定する差分名称を登録するのみ。\\n\\n例えば同じ画像で差分表示位置やブレンドモードが違う登録をしたい場合、\\n### コード例\\n~~~skynovel\\n[add_face name=a_normal fn=画像 dx=0 dy=0]\\n[add_face name=a_10_10 fn=画像 dx=10 dy=10]\\n[add_face name=a_screen fn=画像 dx=0 dy=0 blendmode=screen]\\n~~~\\nとnameを変えることで登録できます。\\n\\n\\n機能ギャラリーにサンプルがあります。$(play)[画像も動画も表情差分](https://famibee.github.io/SKYNovel_gallery/?cur=tag_lay_face)"},"add_frame":{"detail":"フレーム追加  \\nHTMLファイルをベースとする「フレーム」を追加する","param":[{"name":"id","required":"y","default":"","rangetype":"String","comment":"フレーム名。他のタグなどで操作・参照する歳の名前となる。"},{"name":"src","required":"y","default":"","rangetype":"HTMLファイル名","comment":"フレームとして読み込むhtmlファイルのファイル名（画像や音声などのfn属性と同じように）"},{"name":"alpha","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"透過度。0（完全透明）〜0.5（半透明）〜1（不透明）"},{"name":"scale_x","required":"","default":"1.0","rangetype":"正負の実数値","comment":"横方向を何倍に拡大／縮小するか。負の値ならレイヤを左右反転"},{"name":"scale_y","required":"","default":"1.0","rangetype":"正負の実数値","comment":"縦方向を何倍に拡大／縮小するか。負の値ならレイヤを上下反転"},{"name":"rotate","required":"","default":"0","rangetype":"Number","comment":"回転角度（単位：deg 度）、正の値は時計回り"},{"name":"visible","required":"","default":"true","rangetype":"Boolean","comment":"trueで行末クリック待ち記号を表示、falseで非表示"},{"name":"b_color","required":"","default":"透過","rangetype":"色指定。0x000000など","comment":"背後の矩形色。初期値は 透過（htmlで画像を表示すれば表示）"},{"name":"x","required":"","default":"0","rangetype":"画面左上を(0, 0)とする座標","comment":"画面内におけるフレームの横位置を指定"},{"name":"y","required":"","default":"0","rangetype":"画面左上を(0, 0)とする座標","comment":"画面内におけるフレームの縦位置を指定"},{"name":"width","required":"","default":"フレームの横サイズ","rangetype":"1〜","comment":"表示するフレームの横ドットサイズ。元のサイズと異なる場合は拡大・縮小される。"},{"name":"height","required":"","default":"フレームの縦サイズ","rangetype":"1〜","comment":"保存するフレームの縦ドットサイズ。元のサイズと異なる場合は拡大・縮小される"}],"snippet":[{"nm":"add_frame","txt":"add_frame id=${1{{フレーム名}}} src=${2{{HTMLファイル名}}} visible=${3|true,false|}"}],"comment":"$(warning)注：これは HTML要素の iframe（インラインフレーム要素）で、フレームは全てのレイヤの手前に表示され、互い違いに重ねられない。   \\nconst.sn.frm.（フレーム名）系の値もセットする。\\n\\n### コード例\\n~~~skynovel\\n[add_frame id=config src=_config visible=false]\\n[event key=\'dom=config:#close\' label=*exit global=true]\\n\\n[let_frame id=config var_name=val_sldBackAlpha]\\n&sys:TextLayer.Back.Alpha = const.sn.frm.config.val_sldBackAlpha/100\\n[return]\\n\\n*val2ctrl\\n[set_frame id=config var_name=val_sldBackAlpha text=&sys:TextLayer.Back.Alpha*100]\\n[let_frame id=config var_name=val2ctrl function=true]\\n[return]\\n~~~\\n\\n機能ギャラリーにサンプルがあります。$(play)[HTMLフレーム](https://famibee.github.io/SKYNovel_gallery/?cur=frame)"},"add_lay":{"detail":"レイヤを追加する  \\nレイヤはページの裏表があり、文字レイヤや画像レイヤなどの種類があります","param":[{"name":"layer","required":"y","default":"","rangetype":"String","comment":"レイヤ名を指定する。未使用のレイヤ名でなければエラー＆アプリ停止"},{"name":"class","required":"y","default":"","rangetype":"grp、txt","comment":"grp（画像レイヤ）、txt（文字レイヤ）のレイヤ種別"}],"snippet":[{"nm":"add_lay","txt":"add_lay layer=${1:レイヤ名} class=${2|grp,txt|}"}],"comment":"### コード例\\n~~~skynovel\\n[add_lay layer=base class=grp]\\n[add_lay layer=0 class=grp]\\n[add_lay layer=mes class=txt]\\n~~~"},"autowc":{"detail":"文字ごとのウェイト  \\n特定の文字の直後に自動的にウェイトを入れる。\\ntextに指定した文字に対し、timeに指定した数値が対応する。\\n通常の文字表示速度にtimeの数値を掛け算する","param":[{"name":"enabled","required":"","default":"現在値","rangetype":"Boolean","comment":"自動ウェイトを有効にするか。初期値false"},{"name":"text","required":"両方同時に指定、或いは省略","default":"現在値","rangetype":"String","comment":"ウェイトを指定する文字の集まり"},{"name":"time","required":"(↑と同じ)","default":"現在値","rangetype":"カンマ区切りの数値","comment":"文字表示ウェイト倍数"}],"snippet":[{"nm":"autowc","txt":"autowc enabled=${1|true,false|} text=${2:\'、。\'} time=${3:\'50,100\'}"}],"comment":"以下のように指定する。\\n\\n### コード例\\n~~~skynovel\\n[autowc enabled=true text=\\"４５６\\" time=\\"50,100,150\\"]\\n[autowc enabled=true text=\\"４５６\\" time=\\"100,100,100\\"]\\n[autowc enabled=false]\\n~~~\\n\\n　以下はエラーとなる。\\n### コード例\\n~~~skynovel\\n;x [autowc enabled=true text=\\"４５６\\" time=\\"100,100\\"]\\n;x [autowc enabled=true text=\\"４５６\\" time=\\"100,100,100,100\\"]\\n;x [autowc enabled=true text=\\"４５６\\"]\\n;x [autowc enabled=true time=\\"100,100,100\\"]\\n;x [autowc enabled=true]\\n;x [autowc enabled=true text=\\"\\" time=\\"\\"]\\n;x [autowc text=\\"\\" time=\\"\\"]\\n~~~"},"bracket2macro":{"detail":"括弧マクロの定義  \\n属性textを持つマクロやタグを、任意の二つの文字を括弧とし、括弧で囲った記述で代用できるよう","param":[{"name":"text","required":"y","default":"","rangetype":"特定の文字","comment":"括弧にする任意の二つの文字。  \\nマクロに出来るのは英文字、空白、;、[、]、、=、&、｜、《、》以外のみ。  \\n正規表現で言えば　/[\\\\w\\\\s;[]=&｜《》]/　以外。  \\n一文字マクロや定義済みの括弧文字は使用できない。"},{"name":"name","required":"y","default":"","rangetype":"定義済みのマクロ名","comment":"半角文字に割り当てるマクロ名を指定。  \\n組み込みタグか、[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)による定義済みマクロ名で無ければならない。  \\n組み込みタグやマクロは属性textだけを指定しても問題なく動作し、 それを処理すること。渡される属性textは空文字の場合もある"}],"snippet":[{"nm":"bracket2macro","txt":"bracket2macro text=${1:【】} name=${2{{マクロ名}}}"}],"comment":"※適用範囲について\\n本タグより前にロードされたスクリプトファイルには適用されません。\\nまたスクリプトファイルに本タグが記述された場合、本タグより前に出現した半角文字にも適用されません\\n\\n機能ギャラリーにサンプルがあります。$(play)[履歴と機能追加](https://famibee.github.io/SKYNovel_gallery/?cur=log_and_play)"},"button":{"detail":"ボタンを表示  \\n文字レイヤにボタンを配置する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"ボタンを配置する文字レイヤ"},{"name":"page","required":"","default":"back","rangetype":"fore、back","comment":"ページの裏表"},{"name":"pic","required":"y","default":"","rangetype":"画像ファイル名","comment":"画像ボタンとして配置する画像を指定する。  \\nただし画像は縦に三等分し、左から「通常時」「クリック押下時」「マウスカーソルを載せた時」の画像として表示する。"},{"name":"text","required":"...","default":"","rangetype":"ボタンにする文字列","comment":"文字ボタンとして配置する文字列を指定する。  \\npicかtextのどちらかの指定を必須とする"},{"name":"b_pic","required":"","default":"","rangetype":"画像ファイル名","comment":"文字ボタンの背景画像が指定できる。画像の大きさにかかわらず、文字ボタンのちょうど真ん中に来るよう配置される。"},{"name":"width","required":"","default":"100","rangetype":"1〜","comment":"文字ボタンの横幅を指定する。画像ボタンの場合はこの指定を無視し、画像横幅の1/3にする。"},{"name":"height","required":"","default":"30","rangetype":"1〜","comment":"文字ボタンの縦幅を指定する。画像ボタンの場合はこの指定を無視し、画像横幅の1/3にする。  \\nまた、文字は必ず横一列になるため、この設定値はフォントサイズと兼用になる。"},{"name":"style","required":"","default":"","rangetype":"CSS style（一部）","comment":"文字ボタン上にマウスカーソルが乗っていない状態のCSS スタイル。"},{"name":"style_hover","required":"","default":"","rangetype":"CSS style（一部）","comment":"文字ボタン上にマウスカーソルが乗っている状態（クリックしていない）のCSS スタイル。  \\n設定できる値はstyleと同様。"},{"name":"style_clicked","required":"","default":"","rangetype":"CSS style（一部）","comment":"文字ボタン上にマウスカーソルが乗っている状態（クリックしている）のCSS スタイル。  \\n設定できる値はstyleと同様。"},{"name":"alpha","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"透過度。0（完全透明）〜0.5（半透明）〜1（不透明）"},{"name":"left","required":"","default":"0","rangetype":"","comment":""},{"name":"top","required":"","default":"0","rangetype":"","comment":"詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照"},{"name":"rotation","required":"","default":"0","rangetype":"-180〜180","comment":"回転角を度単位で指定。時計回りは0～180、反時計回りは0～-180を指定。 左上を中心に回る"},{"name":"scale_x","required":"","default":"1.0","rangetype":"正負の実数値","comment":"横方向を何倍に拡大／縮小するか。負の値ならレイヤを左右反転"},{"name":"scale_y","required":"","default":"1.0","rangetype":"正負の実数値","comment":"縦方向を何倍に拡大／縮小するか。負の値ならレイヤを上下反転"},{"name":"enabled","required":"","default":"true","rangetype":"Boolean","comment":"falseだと押せないボタンとなり、クリックイベントが発生しない。  \\nこれにより文字レイヤの任意の位置に画像表示できる機能を提供する。  \\n画像は三等分しない。イベントや効果音指定は無効だが、ヒント機能は有効。"},{"name":"call","required":"","default":"false","rangetype":"Boolean","comment":"trueの場合は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)、falseは[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)。  \\nただしcall=trueによりサブルーチンコールした場合、[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)によって「コールする前のイベント予約状態＆待ち状態」に戻る。"},{"name":"fn","required":"","default":"処理中のスクリプトファイル","rangetype":"ジャンプ先","comment":"クリック時にジャンプする先"},{"name":"label","required":"","default":"スクリプトファイルの先頭","rangetype":"ラベル名","comment":"コール先のスクリプトファイルにあるラベル","undefined":"クリック時ジャンプ先で「&sn.eventLabel」にて値を受け取れる"},{"name":"global","required":"","default":"false","rangetype":"Boolean","comment":"詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)と同様。  \\nボタンを[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)する場合はtrueにしておく"},{"name":"arg","required":"","default":"","rangetype":"String","comment":"指定した場合、クリック時ジャンプ先で「&sn.eventArg」にて値を受け取れる"},{"name":"onenter","required":"","default":"何もしない","rangetype":"ラベル名","comment":"マウス重なり（フォーカス取得）時、指定したラベルをコールする。 必ず[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で戻ること。"},{"name":"onleave","required":"","default":"何もしない","rangetype":"ラベル名","comment":"マウス重なり外れ（フォーカス外れ）時、指定したラベルをコールする。 必ず[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で戻ること。"},{"name":"clickse","required":"","default":"省略時は無音","rangetype":"音声ファイル名","comment":"指定すると、クリック時に効果音を再生する"},{"name":"enterse","required":"","default":"省略時は無音","rangetype":"音声ファイル名","comment":"指定すると、ボタン上にマウスカーソルが載った時に効果音を再生する"},{"name":"leavese","required":"","default":"省略時は無音","rangetype":"音声ファイル名","comment":"指定すると、ボタン上からマウスカーソルが外れた時に効果音を再生する"},{"name":"clicksebuf","required":"","default":"SYS","rangetype":"サウンドバッファ","comment":"クリック時効果音を再生するサウンドバッファを指定する"},{"name":"entersebuf","required":"","default":"SYS","rangetype":"サウンドバッファ","comment":"クリック時効果音を再生するサウンドバッファを指定する"},{"name":"leavesebuf","required":"","default":"SYS","rangetype":"サウンドバッファ","comment":"クリック時効果音を再生するサウンドバッファを指定する"}],"snippet":[{"nm":"button","txt":"button text=${1:ボタンにする文字列} left=${2:0} top=${3:0} ${4{{ジャンプ先}}}"}],"comment":"選択肢として使用する場合、ジャンプ先のラベル直後には必ず[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を記述して、ジャンプ直後でセーブしても正しくセーブされるようにして下さい\\n\\n機能ギャラリーにサンプルがあります。$(play)[フォント利用](https://famibee.github.io/SKYNovel_gallery/?cur=ch_button)"},"call":{"detail":"サブルーチンコール  \\nスクリプト処理の現在位置をコールスタックに積み、ジャンプする","param":[{"name":"fn","required":"","default":"処理中のスクリプトファイル","rangetype":"ジャンプ先","comment":"コール先のスクリプトファイル[call fn=ext_*]のようにワイルドカードをサポート。マッチするスクリプトを順不同にコールする。（ワイルドカードは後方のみ）"},{"name":"label","required":"","default":"スクリプトファイルの先頭","rangetype":"ラベル名","comment":"コール先のスクリプトファイルにあるラベル","undefined":"クリック時ジャンプ先で「&sn.eventLabel」にて値を受け取れる"},{"name":"count","required":"","default":"false","rangetype":"Boolean","comment":"タグ位置を既読とするか"},{"name":"clear_local_event","required":"","default":"何もしない","rangetype":"Boolean","comment":"trueの場合は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を行なってからコールする"}],"snippet":[{"nm":"call","txt":"call ${1{{ジャンプ先}}}"}],"comment":"ジャンプ先での[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)により本タグの次の位置に戻る事が出来る。\\n\\n$(info)マニアックな話ですが、あらゆるタグの中で唯一「通常、既読としない」タグです。"},"ch":{"detail":"文字を追加する  \\n文字レイヤに文字を出力する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"text","required":"y","default":"","rangetype":"String","comment":"表示したい文字列。ルビ文法（《》）も解析する。改行も [[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1) で出来る"},{"name":"record","required":"","default":"true","rangetype":"Boolean","comment":"履歴に保存するか"},{"name":"wait","required":"","default":"現在の文字表示速度","rangetype":"ミリ秒","comment":"一時的な文字表示速度。0で瞬時。"},{"name":"style","required":"","default":"何もしない","rangetype":"CSS style","comment":"CSS styleを指定する。このタグによる表示のみに適用、以降は元に戻る"},{"name":"ch_in_style","required":"","default":"何もしない","rangetype":"文字出現演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字出現演出名"},{"name":"ch_out_style","required":"","default":"何もしない","rangetype":"文字消去演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字消去演出名"}],"snippet":[{"nm":"ch","txt":"ch layer=${1{{文字レイヤ名}}} page=${2|fore,back|} text=${3:表示したい文字列} ch_in_style=${4{{文字出現演出名}}} ch_out_style=${5{{文字消去演出名}}}"}],"comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を使わない、より簡潔な記述文法があります。\\n以下の記述は、\\n[ch text=&test]\\n[ch text=test]\\n[ch text=\\"&a + b\\"]\\n\\n以下のようにも書けます。&から&までを[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)文と解釈します。\\n&test&\\n&\'test\'&\\n&a + b&\\n\\nでは「&（半角）」を表示するには？（これらの文法のせいで普通に書けない）\\n[ch text=\\"&\'&\'\\"]として下さい"},"ch_in_style":{"detail":"文字出現演出定義  \\n文字出現演出アニメを定義する","param":[{"name":"name","required":"y","default":"","rangetype":"文字出現演出名","comment":"文字出現演出を特定する名前"},{"name":"wait","required":"","default":"500","rangetype":"ミリ秒","comment":"一時的な文字表示速度。0で瞬時。"},{"name":"alpha","required":"","default":"0.0","rangetype":"0.0〜1.0（実数）","comment":"透過度。0（完全透明）〜0.5（半透明）〜1（不透明）"},{"name":"x","required":"","default":"\'=0\'","rangetype":"相対位置指定","comment":"以下のような相対位置指定が出来る  \\n500 ──　X位置を500に  \\n\'=500\' ──　文字表示位置を基準に+500加算した位置  \\n\'=-500\' ──　文字表示位置を基準に-500加算した位置","undefined":"変化の初期値"},{"name":"y","required":"","default":"\'=0\'","rangetype":"相対位置指定"},{"name":"scale_x","required":"","default":"1.0","rangetype":"正負の実数値","comment":"横方向を何倍に拡大／縮小するか。負の値ならレイヤを左右反転"},{"name":"scale_y","required":"","default":"1.0","rangetype":"正負の実数値","comment":"縦方向を何倍に拡大／縮小するか。負の値ならレイヤを上下反転"},{"name":"rotate","required":"","default":"0","rangetype":"Number","comment":"回転角度（単位：deg 度）、正の値は時計回り"},{"name":"join","required":"","default":"true","rangetype":"Boolean","comment":"文字を順番に出すか（true）同時か（false）"},{"name":"ease","required":"","default":"\'ease-out\'","rangetype":"animation-timing-function","comment":"[CSSのanimation-timing-function プロパティ](https://developer.mozilla.org/ja/docs/Web/CSS/animation-timing-function)"}],"snippet":[{"nm":"ch_in_style","txt":"ch_in_style name=${1:文字出現演出名} wait=${2:500}"}],"comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)などの ch_in_style属性で指定すると、定義どおりの文字出現演出アニメを行なう。\\n参考）[CSSのanimation-timing-function プロパティ](https://developer.mozilla.org/ja/docs/Web/CSS/animation-timing-function)\\n\\n機能ギャラリーにサンプルがあります。$(play)[文字出現演出](https://famibee.github.io/SKYNovel_gallery/?cur=ch_in_out)"},"ch_out_style":{"detail":"文字消去演出定義  \\n文字消去演出アニメを定義する","param":[{"name":"name","required":"y","default":"","rangetype":"文字消去演出名","comment":"文字消去演出を特定する名前"},{"name":"wait","required":"","default":"500","rangetype":"ミリ秒","comment":"一時的な文字消去速度。0で瞬時。"},{"name":"alpha","required":"","default":"0.0","rangetype":"0.0〜1.0（実数）","comment":"透過度。0（完全透明）〜0.5（半透明）〜1（不透明）"},{"name":"x","required":"","default":"\'=0\'","rangetype":"相対位置指定","comment":"以下のような相対位置指定が出来る  \\n500 ──　X位置を500に  \\n\'=500\' ──　文字位置を基準に+500加算した位置  \\n\'=-500\' ──　文字位置を基準に-500加算した位置","undefined":"変化の目標値"},{"name":"y","required":"","default":"\'=0\'","rangetype":"相対位置指定"},{"name":"scale_x","required":"","default":"1.0","rangetype":"正負の実数値","comment":"横方向を何倍に拡大／縮小するか。負の値ならレイヤを左右反転"},{"name":"scale_y","required":"","default":"1.0","rangetype":"正負の実数値","comment":"縦方向を何倍に拡大／縮小するか。負の値ならレイヤを上下反転"},{"name":"rotate","required":"","default":"0","rangetype":"Number","comment":"回転角度（単位：deg 度）、正の値は時計回り"},{"name":"join","required":"","default":"false","rangetype":"Boolean","comment":"文字を順番に出すか（true）同時か（false）"},{"name":"ease","required":"","default":"\'ease-out\'","rangetype":"animation-timing-function","comment":"[CSSのanimation-timing-function プロパティ](https://developer.mozilla.org/ja/docs/Web/CSS/animation-timing-function)"}],"snippet":[{"nm":"ch_out_style","txt":"ch_out_style name=${1:文字消去演出名} wait=${2:500}"}],"comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)などの ch_out_style属性で指定すると、定義どおりの文字消去演出アニメを行なう。  \\n文字消去演出は、次ページの文字出現演出と同時に行なわれる。文字消去演出を待ちたい場合は、[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)などで待つ。\\n参考）[CSSのanimation-timing-function プロパティ](https://developer.mozilla.org/ja/docs/Web/CSS/animation-timing-function)\\n\\n機能ギャラリーにサンプルがあります。$(play)[文字出現演出](https://famibee.github.io/SKYNovel_gallery/?cur=ch_in_out)"},"char2macro":{"detail":"一文字マクロの定義  \\n属性無しのマクロやタグを、半角文字の記述で代用できるよう定義する","param":[{"name":"char","required":"y","default":"","rangetype":"特定の半角文字","comment":"マクロにする半角文字。  \\nマクロに出来るのは英文字、空白、;、[、]、、=、&、｜、《、》以外のみ。  \\n正規表現で言えば　/[\\\\w\\\\s;[]=&｜《》]/　以外。  \\n括弧文字や定義済みの一文字マクロは使用できない。"},{"name":"name","required":"y","default":"","rangetype":"定義済みのマクロ名","comment":"半角文字に割り当てるマクロ名を指定。  \\n組み込みタグか、[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)による定義済みマクロ名で無ければならない"}],"snippet":[{"nm":"char2macro","txt":"char2macro char=${1:マクロにする半角文字} name=${2{{マクロ名}}}"}],"comment":"本タグより前にロードされたスクリプトファイルには適用されません。\\nまたスクリプトファイルに本タグが記述された場合、本タグより前に出現した半角文字にも適用されません\\n\\n機能ギャラリーにサンプルがあります。$(play)[メッセージウインドウ](https://famibee.github.io/SKYNovel_gallery/?cur=txt_back)"},"clear_event":{"detail":"イベントを全消去  \\nイベント予約を全て削除する","param":[{"name":"global","required":"","default":"false","rangetype":"Boolean","comment":"trueを指定すると全ての大域イベントを削除する。  \\nfalseの場合は大域以外の全てのイベントを削除する"}],"snippet":[{"nm":"clear_event","txt":"clear_event global=${1|false,true|}"}],"comment":""},"clear_lay":{"detail":"レイヤ設定の消去  \\n画像や文字などレイヤ状態をクリアする","param":[{"name":"layer","required":"","default":"全てのレイヤ","rangetype":"レイヤ名（半角カンマ区切りで複数レイヤを指定可能）","comment":""},{"name":"page","required":"","default":"fore","rangetype":"fore、back、both","comment":"ページの裏表（both指定で両面）"},{"name":"filter","required":"","default":"false","rangetype":"Boolean","comment":"true：フィルタもクリア"}],"snippet":[{"nm":"clear_lay","txt":"clear_lay layer=${1{{レイヤ名}}} page=${2|fore,back|}"}],"comment":"alpha、blendMode、rotation、scaleX、scaleYを初期値にする\\n※背景や背景画像はクリアしません（b_left、b_top、b_width、b_height、b_color、b_alpha） 　クリアしたい場合は、[lay back_clear=true]"},"clear_text":{"detail":"文字消去  \\n文字のみをクリアする","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"}],"snippet":[{"nm":"clear_text","txt":"clear_text layer=${1{{文字レイヤ名}}} page=${2|fore,back|}"}],"comment":""},"clearsysvar":{"detail":"システム変数の全消去   \\nsys:変数を全消去。削除すると言うより、初期化する","param":[],"snippet":[{"nm":"clearsysvar","txt":"clearsysvar"}],"comment":""},"clearvar":{"detail":"ゲーム変数の全消去   \\nsave:変数を全消去。削除すると言うより、初期化する","param":[],"snippet":[{"nm":"clearvar","txt":"clearvar"}],"comment":""},"close":{"detail":"アプリの終了  \\nアプリケーションを終了する","param":[],"snippet":[{"nm":"close","txt":"close"}],"comment":""},"copybookmark":{"detail":"しおりの複写  \\nしおりデータを複写する","param":[{"name":"from","required":"y","default":"","rangetype":"Number","comment":"複写元のしおり番号"},{"name":"to","required":"y","default":"","rangetype":"Number","comment":"複写先のしおり番号"}],"snippet":[{"nm":"copybookmark","txt":"copybookmark from=${1:複写元のしおり番号} to=${2:複写先のしおり番号}"}],"comment":""},"current":{"detail":"デフォルト文字レイヤ設定  \\nデフォルト文字レイヤを設定する","param":[{"name":"layer","required":"y","default":"","rangetype":"文字レイヤ名","comment":"デフォルトとするレイヤ"}],"snippet":[{"nm":"current","txt":"current layer=${1{{文字レイヤ名}}}"}],"comment":""},"dump_lay":{"detail":"レイヤのダンプ  \\nレイヤの内容をデバッグ表示する","param":[{"name":"layer","required":"","default":"全てのレイヤ","rangetype":"レイヤ名","comment":"デバッグ表示するレイヤ名を指定。半角カンマ区切りで複数レイヤを指定可能"}],"snippet":[{"nm":"dump_lay","txt":"dump_lay layer=${1{{レイヤ名}}}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[デバッグ機能](https://famibee.github.io/SKYNovel_gallery/?cur=debug)"},"dump_script":{"detail":"スクリプトのダンプ  \\n内部API","param":[],"snippet":[{"nm":"dump_script","txt":"dump_script"}],"comment":""},"dump_stack":{"detail":"スタックのダンプ  \\n[call]等によるコールスタックの内容をデバッグ表示する","param":[],"snippet":[{"nm":"dump_stack","txt":"dump_stack"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[デバッグ機能](https://famibee.github.io/SKYNovel_gallery/?cur=debug)"},"dump_val":{"detail":"変数のダンプ  \\n変数の内容をデバッグ表示する","param":[],"snippet":[{"nm":"dump_val","txt":"dump_val"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[デバッグ機能](https://famibee.github.io/SKYNovel_gallery/?cur=debug)"},"else":{"detail":"その他ifブロック開始  \\nプログラム言語における、条件分岐のelse文。\\n詳細は【開発者向け情報：式の評価と条件分岐】をご覧下さい","param":[],"snippet":[{"nm":"else","txt":"else"}],"comment":""},"elsif":{"detail":"別条件のifブロック開始  \\nプログラム言語における、条件分岐のelsif文。\\n詳細は【開発者向け情報：式の評価と条件分岐】をご覧下さい","param":[{"name":"exp","required":"y","default":"","rangetype":"Boolean","comment":"trueの場合処理は直後にうつる。  \\nfalseなら次の[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)や[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)の評価を行なう"}],"snippet":[{"nm":"elsif","txt":"elsif exp=${1:Boolean式}"}],"comment":""},"enable_event":{"detail":"イベント有無の切替  \\n文字レイヤごとのイベント発生有効無効を設定する\\n無効にするとマウスイベントが無効になり、[s]待ちなどでイベントが発生しなくなるが、イベント予約は別の話であり、削除などされない。 有効にすればマウスイベントが発生するようになり、再びイベント待ちされるようになる","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"イベント有効無効を設定するレイヤ"},{"name":"abled","required":"","default":"true","rangetype":"Boolean","comment":"イベントを有効にするか"}],"snippet":[{"nm":"enable_event","txt":"enable_event global=${1|false,true|}"}],"comment":""},"endif":{"detail":"ifブロックの終端  \\nプログラム言語における、条件分岐のendif文。\\n詳細は【開発者向け情報：式の評価と条件分岐】をご覧下さい","param":[],"snippet":[{"nm":"endif","txt":"endif"}],"comment":""},"endlet_ml":{"detail":"インラインテキスト代入の終端\\n[let_ml]〜[endlet_ml]で囲んだ複数行テキストを代入する","param":[],"snippet":[{"nm":"endlet_ml","txt":"endlet_ml"}],"comment":""},"endlink":{"detail":"ハイパーリンクの終了  \\n[link]（ハイパーリンク）で開始したリンク区間を終了する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"}],"snippet":[{"nm":"endlink","txt":"endlink layer=${1{{文字レイヤ名}}} page=${2|fore,back|}"}],"comment":""},"endmacro":{"detail":"マクロ定義の終了  \\n[macro]と[endmacro]に囲まれた部分をマクロとして定義する","param":[],"snippet":[{"nm":"endmacro","txt":"endmacro"}],"comment":""},"er":{"detail":"ページ両面の文字消去  \\nデフォルト文字レイヤの裏と表の両方に対して[clear_lay]を行う","param":[{"name":"rec_page_break","required":"","default":"true","rangetype":"Boolean","comment":"履歴を改ページするか"}],"snippet":[{"nm":"er","txt":"er"}],"comment":""},"erasebookmark":{"detail":"しおりの消去  \\nしおりデータを削除する","param":[{"name":"place","required":"y","default":"","rangetype":"Number","comment":"処理対象のしおり番号"}],"snippet":[{"nm":"erasebookmark","txt":"erasebookmark place=${1:処理対象のしおり番号}"}],"comment":""},"event":{"detail":"イベントを予約  \\n次の[s]などのイベント待ちに向けてイベント処理を予約する","param":[{"name":"key","required":"y","default":"","rangetype":"イベントのキー名","comment":"イベントを発生させるトリガーイベント  \\n修飾キーの同時押し（あるいは修飾キーを押しといて通常キー）を任意に組み合わせられます。「半角プラスで」「ABC順に」「イベントのキー名の前に」繋げて下さい。  \\n（例1）key=alt+enter  \\n（例2）key=alt+ctrl+shift+enter"},{"name":"fn","required":"y","default":"","rangetype":"ジャンプ先","comment":"イベント発生時にジャンプする先。指定方法は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)と同様。  \\ncallの場合、ジャンプ先から[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で戻ると、再度[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)などのイベント待ち状態に戻る。"},{"name":"label","required":"y","default":"","rangetype":"ラベル名","comment":"イベント発生時にジャンプする先。指定方法は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)と同様。  \\nクリック時ジャンプ先で「&sn.eventLabel」にて値を受け取れる"},{"name":"global","required":"","default":"false","rangetype":"Boolean","comment":"trueを指定すると大域的なイベント扱いとなり、イベント発生時にイベント予約が削除されない"},{"name":"arg","required":"","default":"null","rangetype":"String","comment":"指定した場合、クリック時ジャンプ先で「&sn.eventArg」にて値を受け取れる"},{"name":"url","required":"","default":"開くURL","rangetype":"URL文字列","comment":"開くURL"},{"name":"del","required":"","default":"false","rangetype":"Boolean","comment":"trueを指定すると予約済みイベントを削除する。  \\nfn/label/callとdelは同時指定できません"}],"snippet":[{"nm":"event","txt":"event key=${1{{イベント名}}} ${2{{ジャンプ先}}} global=${3|true,false|}"}],"comment":"あるイベントが発生した際、global=falseのイベント予約は全て削除される"},"export":{"detail":"プレイデータをエクスポート  \\nプレイデータをファイルとしてエクスポートする\\n\\n保存ダイアログが表示され、選択したフォルダにプレイデータファイルが保存される。\\nプレイデータ拡張子、ウェブ版は.swpd、アプリ版は.spdで互換性はない。\\n暗号化するプロジェクトの場合、出力するプレイデータファイルも暗号化される。\\nブラウザならファイルをダウンロードする。\\n\\nエクスポート完了時には【sn:exported】というイベントを発火する。\\n【[event key=\'sn:exported\' 〜]】という記述でジャンプできる。\\n\\n機能ギャラリーにサンプルがあります。$(play)[プレイデータ](https://famibee.github.io/SKYNovel_gallery/?cur=import)","param":[],"snippet":[{"nm":"export","txt":"export"}],"comment":""},"fadebgm":{"detail":"BGMのフェード  \\nBGMを指定した音量に、段階的に変化させる","param":[{"name":"volume","required":"y","default":"","rangetype":"0.0〜1.0（実数）","comment":"音量"},{"name":"time","required":"y","default":"","rangetype":"ミリ秒","comment":"フェード時間"},{"name":"delay","required":"","default":"0","rangetype":"ミリ秒","comment":"変化する前に待機する遅延時"}],"snippet":[{"nm":"fadebgm","txt":"fadebgm volume=${1:0.0} time=${2:1000}"}],"comment":""},"fadeoutbgm":{"detail":"BGMのフェードアウト  \\nBGMを無音に、段階的に変化させる","param":[{"name":"time","required":"y","default":"","rangetype":"ミリ秒","comment":"フェード時間"},{"name":"stop","required":"","default":"true","rangetype":"Boolean","comment":"trueで「フェード終了時の再生停止」、falseなら行なわない"},{"name":"delay","required":"","default":"0","rangetype":"ミリ秒","comment":"変化する前に待機する遅延時"}],"snippet":[{"nm":"fadeoutbgm","txt":"fadeoutbgm time=${1:1000}"}],"comment":""},"fadeoutse":{"detail":"効果音のフェードアウト  \\n効果音を無音に、段階的に変化させる","param":[{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"効果音を識別するサウンドバッファ。サウンドバッファを変えれば同時に複数の音を操作することが出来ます"},{"name":"time","required":"y","default":"","rangetype":"ミリ秒","comment":"フェード時間"},{"name":"stop","required":"","default":"true","rangetype":"Boolean","comment":"trueで「フェード終了時の再生停止」、falseなら行なわない"},{"name":"delay","required":"","default":"0","rangetype":"ミリ秒","comment":"変化する前に待機する遅延時"}],"snippet":[{"nm":"fadeoutse","txt":"fadeoutse buf=${1{{サウンドバッファ}}} time=${2:1000}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[効果音とBGM](https://famibee.github.io/SKYNovel_gallery/?cur=sound)"},"fadese":{"detail":"効果音のフェード  \\n効果音を指定した音量に、段階的に変化させる","param":[{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"効果音を識別するサウンドバッファ。サウンドバッファを変えれば同時に複数の音を操作することが出来ます"},{"name":"volume","required":"y","default":"","rangetype":"0.0〜1.0（実数）","comment":"音量"},{"name":"time","required":"y","default":"","rangetype":"ミリ秒","comment":"フェード時間"},{"name":"delay","required":"","default":"0","rangetype":"ミリ秒","comment":"変化する前に待機する遅延時"}],"snippet":[{"nm":"fadese","txt":"fadese buf=${1{{サウンドバッファ}}} volume=${2:0.0} time=${3:1000}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[効果音とBGM](https://famibee.github.io/SKYNovel_gallery/?cur=sound)"},"finish_trans":{"detail":"トランス強制終了  \\n[trans]で開始したトランスをすぐ終了させる","param":[],"snippet":[{"nm":"finish_trans","txt":"finish_trans"}],"comment":""},"frame":{"detail":"フレームに設定  \\nフレームそのものの属性を設定する","param":[{"name":"id","required":"y","default":"","rangetype":"フレーム名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義したフレーム名"},{"name":"alpha","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"透過度。0（完全透明）〜0.5（半透明）〜1（不透明）"},{"name":"scale_x","required":"","default":"1.0","rangetype":"正負の実数値","comment":"横方向を何倍に拡大／縮小するか。負の値ならレイヤを左右反転"},{"name":"scale_y","required":"","default":"1.0","rangetype":"正負の実数値","comment":"縦方向を何倍に拡大／縮小するか。負の値ならレイヤを上下反転"},{"name":"rotate","required":"","default":"0","rangetype":"Number","comment":"回転角度（単位：deg 度）、正の値は時計回り"},{"name":"visible","required":"","default":"true","rangetype":"Boolean","comment":"trueで行末クリック待ち記号を表示、falseで非表示"},{"name":"b_color","required":"","default":"透過","rangetype":"色指定。0x000000など","comment":"背後の矩形色。初期値は 透過（htmlで画像を表示すれば表示）"},{"name":"x","required":"","default":"0","rangetype":"画面左上を(0, 0)とする座標","comment":"画面内におけるフレームの横位置を指定"},{"name":"y","required":"","default":"0","rangetype":"画面左上を(0, 0)とする座標","comment":"画面内におけるフレームの縦位置を指定"},{"name":"width","required":"","default":"フレームの横サイズ","rangetype":"1〜","comment":"表示するフレームの横ドットサイズ。元のサイズと異なる場合は拡大・縮小される。"},{"name":"height","required":"","default":"フレームの縦サイズ","rangetype":"1〜","comment":"保存するフレームの縦ドットサイズ。元のサイズと異なる場合は拡大・縮小される"}],"snippet":[{"nm":"frame","txt":"frame id=${1{{フレーム名}}}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[HTMLフレーム](https://famibee.github.io/SKYNovel_gallery/?cur=frame)"},"graph":{"detail":"インライン画像表示  \\n文字レイヤに画像を文字として表示する。ルビは同時に設定する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"pic","required":"y","default":"","rangetype":"画像ファイル名","comment":"表示する画像やアニメpng"},{"name":"r","required":"","default":"ルビ無し","rangetype":"String","comment":"ルビ文字列（ただしあまりに他の文字サイズと大きく異なる場合は正しい位置に表示されない）"},{"name":"width","required":"","default":"画像の横サイズ（※）","rangetype":"1〜","comment":"表示する画像の横ドットサイズ。  \\n元のサイズと異なる場合は拡大・縮小される。"},{"name":"height","required":"","default":"画像の縦サイズ（※）","rangetype":"1〜","comment":"保存する画像の縦ドットサイズ。  \\n元のサイズと異なる場合は拡大・縮小される。"},{"name":"style","required":"","default":"何もしない","rangetype":"CSS style","comment":"※文字表示中の場合はすべてのスタイルが変更される"},{"name":"ch_in_style","required":"","default":"何もしない","rangetype":"文字出現演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字出現演出名"},{"name":"ch_out_style","required":"","default":"何もしない","rangetype":"文字消去演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字消去演出名"},{"name":"wait","required":"","default":"現在の文字表示速度","rangetype":"ミリ秒","comment":"一時的な文字表示速度。0で瞬時"}],"snippet":[{"nm":"graph","txt":"graph pic=${1{{画像ファイル名}}}"}],"comment":"フォントにない外字やアニメpng画像表示に使える。\\n※省略時は画像サイズになるが、ロード完了直後に文字配置を決めるのでちらつく。それを嫌う際に指定する\\n※特にモバイルなどでゲーム画面が自動で拡大縮小される場合、省略したらその時の本文文字サイズとして扱われる。なるべくサイズ指定を推奨。"},"if":{"detail":"ifブロックの開始  \\nプログラム言語における、条件分岐のif文","param":[{"name":"exp","required":"y","default":"","rangetype":"Boolean","comment":"trueの場合処理は直後にうつる。  \\nfalseなら次の[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)や[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)の評価を行なう"}],"snippet":[{"nm":"if","txt":"if exp=${1:Boolean式}][endif"}],"comment":"詳細は【[開発者向け情報：式の評価と条件分岐](https://famibee.github.io/SKYNovel/dev.htm#cond)】をご覧下さい。\\n\\n機能ギャラリーにサンプルがあります。$(play)[直感的なルビ文法](https://famibee.github.io/SKYNovel_gallery/?cur=ruby)"},"import":{"detail":"プレイデータをインポート  \\nプレイデータファイルをインポートする\\n\\n読み込みダイアログが表示され、選択したプレイデータファイルをインポートする。\\nプレイデータ拡張子、ウェブ版は.swpd、アプリ版は.spdで互換性はない。\\n\\nタグはダイアログを表示次第すぐ次の処理に移り、ユーザーの選択を待たない。\\nインポート完了時には【sn:imported】というイベントを発火する。\\n【[event key=\'sn:imported\' 〜]】という記述でジャンプできる。\\n\\n機能ギャラリーにサンプルがあります。$(play)[プレイデータ](https://famibee.github.io/SKYNovel_gallery/?cur=import)","param":[],"snippet":[{"nm":"import","txt":"import"}],"comment":""},"jump":{"detail":"シナリオジャンプ  \\n指定位置のスクリプトにジャンプする","param":[{"name":"fn","required":"","default":"処理中のスクリプトファイル","rangetype":"ジャンプ先","comment":"ジャンプ先のスクリプトファイル"},{"name":"label","required":"","default":"スクリプトファイルの先頭","rangetype":"ラベル名","comment":"ジャンプ先のスクリプトファイルにあるラベル"},{"name":"count","required":"","default":"false","rangetype":"Boolean","comment":"タグ位置を既読とするか"}],"snippet":[{"nm":"jump","txt":"jump ${1{{ジャンプ先}}}"}],"comment":"ラベルは例えば以下のように使います。\\n\\n### コード例\\n~~~skynovel\\n*aaa\\n無限ループ\\n[jump label=*aaa]\\n~~~\\n\\nさらにラベル名を考えるのが面倒なとき、「無名ラベル」ともいうべき機能が使えます。  \\n「**after」は「そのタグ以降で最初に見つかった**ラベルに」  \\n「**before」は「そのタグ以前で最初に見つかった**ラベルに」  \\nジャンプ・コールする、という指定です。次のように書きます。\\n\\n### コード例\\n~~~skynovel\\n[jump label=****after]\\n*** ; 最後のbeforeはここに戻る\\n**\\nも\\n[jump label=**after]\\n;**\\nっ\\n**\\n[l]\\nぷ\\n[jump label=**before]\\n**\\n＠[s]\\n**\\n****    ; 最初のafterはここへ\\nす\\n[jump label=***before]\\n~~~\\nこの例では「すもぷぷぷ……」と文字が表示されます。\\n「**」とか「***」とかアスタリスクは二個以上の任意の数が使え、同じ数同士が対応するラベルとなります。\\nが、上記例で見るとおりあんまり複雑に使うと可読性が下がってしまう気がしますので、局所的な用途に限ったほうが良さげです"},"l":{"detail":"行末クリック待ち\\nシナリオファイルの順次処理を停止し、クリックやキー押下（→詳細は[waitclick]）を待つ","param":[{"name":"visible","required":"","default":"true","rangetype":"Boolean","comment":"trueで行末クリック待ち記号を表示、falseで非表示"}],"snippet":[{"nm":"l","txt":"l visible=${1|true,false|}"}],"comment":"「breakline」という画像やアニメpngファイルが用意されていれば、行末クリック待ちマークとして表示する。\\nクリックやキー押下が発生した場合、処理を再開する。\\n[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)などでイベントが登録されていれば、イベント発生待ちを行う"},"lay":{"detail":"レイヤ設定  \\nレイヤに各種設定を行う","param":[{"name":"layer","required":"y","default":"","rangetype":"レイヤ名","comment":"処理対象のレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"visible","required":"","default":"現在値","rangetype":"Boolean","comment":"true：表示、false：非表示"},{"name":"alpha","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"レイヤの透過度。0（完全透明）〜0.5（半透明）〜1（不透明）"},{"name":"blendmode","required":"","default":"何もしない","rangetype":"ブレンドモード名","comment":"このレイヤと下のレイヤとの重なりにおいて、ドット単位で色のブレンド演算を行なう"},{"name":"pos","required":"","default":"c","rangetype":"c、l、r、横座標","comment":"主に立ち絵に使う。横と縦座標を同時に設定する。横座標は指定した値（文字cの場合は画面中央、lは左寄り、rは右寄り）に設定し、画像下端を画面下端に接するように自動計算する"},{"name":"left","required":"","default":"0","rangetype":"画面左上を(0, 0)とする横座標","comment":"レイヤやボタン左端の画面左端からの距離"},{"name":"center","required":"","default":"0","rangetype":"画面左上を(0, 0)とする横座標","comment":"レイヤやボタン中央の画面左端からの距離"},{"name":"right","required":"","default":"0","rangetype":"画面左上を(0, 0)とする横座標","comment":"レイヤやボタン右端の画面左端からの距離"},{"name":"s_right","required":"","default":"0","rangetype":"画面左上を(0, 0)とする横座標","comment":"レイヤやボタン右端の画面右端からの距離"},{"name":"top","required":"","default":"0","rangetype":"画面左上を(0, 0)とする縦座標","comment":"レイヤやボタン上端の画面上端からの距離"},{"name":"middle","required":"","default":"0","rangetype":"画面左上を(0, 0)とする縦座標","comment":"レイヤやボタン中央の画面上端からの距離"},{"name":"bottom","required":"","default":"0","rangetype":"画面左上を(0, 0)とする縦座標","comment":"レイヤやボタン下端の画面上端からの距離"},{"name":"s_bottom","required":"","default":"0","rangetype":"画面左上を(0, 0)とする縦座標","comment":"レイヤやボタン下端の画面下端からの距離"},{"name":"rotation","required":"","default":"0","rangetype":"-180〜180","comment":"回転角を度単位で指定。時計回りは0～180、反時計回りは0～-180を指定。左上を中心に回る"},{"name":"scale_x","required":"","default":"1.0","rangetype":"正負の実数値","comment":"横方向を何倍に拡大／縮小するか。負の値ならレイヤを左右反転"},{"name":"scale_y","required":"","default":"1.0","rangetype":"正負の実数値","comment":"縦方向を何倍に拡大／縮小するか。負の値ならレイヤを上下反転"},{"name":"float","required":"","default":"何もしない","rangetype":"Boolean","comment":"true：レイヤを最前面に移動する。"},{"name":"index","required":"","default":"何もしない","rangetype":"0〜","comment":"レイヤをindexで指定したインデックスに移動する。  \\n0がもっとも背後。レイヤを重ねるたびに1加算したindexになる"},{"name":"dive","required":"","default":"何もしない","rangetype":"レイヤ名","comment":"レイヤをdiveで指定したレイヤのすぐ後ろに潜り込ませる。  \\n「plg:プラグイン名」と記述する事でプラグインも指定できる。"},{"name":"style","required":"","default":"何もしない","rangetype":"CSS style","comment":"※文字表示中の場合はすべてのスタイルが変更される"},{"name":"ch_in_style","required":"","default":"何もしない","rangetype":"文字出現演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字出現演出名"},{"name":"ch_out_style","required":"","default":"何もしない","rangetype":"文字消去演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字消去演出名"},{"name":"fn","required":"y","default":"何もしない","rangetype":"画像ファイル名","comment":"基本画像ファイルを指定する"},{"name":"face","required":"","default":"何もしない","rangetype":"差分名称","comment":"差分名称を指定する（半角カンマ区切りで複数可能）。[fg fn=\\"a\\" face=\\"b,c,d\\"]なら「基本a」の上に「差分b」を重ね、「差分c」を重ね、「差分d」を重ねる"}],"snippet":[{"nm":"lay","txt":"lay layer=${1{{レイヤ名}}} page=${2|fore,back|}"},{"nm":"lay（文字レイヤ）","txt":"lay layer=${1{{文字レイヤ名}}}"},{"nm":"lay（画像レイヤ）","txt":"lay layer=${1{{画像レイヤ名}}} fn=${2{{画像ファイル名}}} face=${3{{差分名称}}}"}],"comment":""},"let":{"detail":"変数代入・演算  \\n変数に値を代入する","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"},{"name":"text","required":"y","default":"","rangetype":"String","comment":"セットする値"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。  \\nnum……数値（実数）。「01」は数値の1となる。  \\nint……数値（符合付き整数）  \\nuint……数値（符合なし整数）  \\nbool……Boolean  \\nstr……文字列。「01」は「01」のまま"}],"snippet":[{"nm":"let","txt":"let name=${1{{代入変数名}}} text=${2:セットする値}"}],"comment":"### コード例\\n~~~skynovel\\n[let name=a text=\'てんぐ👺🌈𩸽🌕\']\\n[trace text=&a] ; -> \'てんぐ👺🌈𩸽🌕\'\\n&a=\'abcde\'\\n[trace text=&a] ; -> \'abcde\'\\n\\n\\n[let_substr name=a text=&a pos=2 len=3]\\n[trace text=&a] ; -> \'cde\'\\n[let_substr name=a text=&a pos=1 len=all]\\n[trace text=&a] ; -> \'de\'\\n~~~"},"let_abs":{"detail":"絶対値   \\n絶対値を求める。結果を変数に代入する","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"},{"name":"text","required":"y","default":"","rangetype":"Number","comment":"絶対値を求める数"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。（詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照）"}],"snippet":[{"nm":"let_abs","txt":"let_abs name=${1{{代入変数名}}} text=${2:絶対値を求める数}"}],"comment":"### コード例\\n~~~skynovel\\n[let_abs name=a text=-3.56]\\n[trace text=&a] ; -> 3.56\\n~~~"},"let_char_at":{"detail":"文字列から一字取りだし   \\n文字列中の一文字を取り出す。結果を変数に代入する","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"},{"name":"text","required":"y","default":"","rangetype":"String","comment":"元になる文字列"},{"name":"pos","required":"","default":"0","rangetype":"0（先頭）〜","comment":"何番目の文字を取り出すか"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。（詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照）"}],"snippet":[{"nm":"let_char_at","txt":"let_char_at name=${1{{代入変数名}}} text=${2:元になる文字列} pos=${3:取り出す位置}"}],"comment":"### コード例\\n~~~skynovel\\n&a=\'abcde\'\\n[let_char_at name=a text=&a pos=1]\\n[trace text=&a] ; -> \'b\'\\n~~~"},"let_frame":{"detail":"フレーム変数を取得  \\nフレーム内の変数から、値を取得する","param":[{"name":"id","required":"y","default":"","rangetype":"フレーム名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義したフレーム名"},{"name":"var_name","required":"y","default":"","rangetype":"String","comment":"フレーム内の変数/関数名"}],"snippet":[{"nm":"let_frame","txt":"let_frame id=${1{{フレーム名}}} var_name=${2:フレーム内の変数/関数名}"}],"comment":"関数名を指定した場合は関数を実行し、その戻り値を取得する。  \\n【const.sn.frm.（id名）.（var_name名）】に値がセットされる。\\n\\n### コード例\\n~~~skynovel\\n[add_frame id=config src=_config visible=false]\\n[event key=\'dom=config:#close\' label=*exit global=true]\\n\\n[let_frame id=config var_name=val_sldBackAlpha]\\n&sys:TextLayer.Back.Alpha = const.sn.frm.config.val_sldBackAlpha/100\\n[return]\\n\\n*val2ctrl\\n[set_frame id=config var_name=val_sldBackAlpha text=&sys:TextLayer.Back.Alpha*100]\\n[let_frame id=config var_name=val2ctrl function=true]\\n[return]\\n~~~\\n\\n機能ギャラリーにサンプルがあります。$(play)[HTMLフレーム](https://famibee.github.io/SKYNovel_gallery/?cur=frame)"},"let_index_of":{"detail":"文字列で検索  \\n文字列内を検索し、文字列内の start 以降で、最初に val が見つかった位置を返す","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数。-1の場合は見つからなかった"},{"name":"text","required":"y","default":"","rangetype":"String","comment":"元になる文字列"},{"name":"val","required":"y","default":"","rangetype":"String","comment":"探す文字列"},{"name":"start","required":"","default":"0","rangetype":"0（先頭）〜","comment":"検索を開始する位置"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。（詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照）"}],"snippet":[{"nm":"let_index_of","txt":"let_index_of name=${1{{代入変数名}}} text=${2:元になる文字列} val=${3:探す文字列}"}],"comment":"### コード例\\n~~~skynovel\\n&a=\'abcdeFGHIabcde\'\\n[let_index_of name=a text=&a val=cd start=5]\\n[trace text=&a] ; -> 11\\n[let_index_of name=a text=&a val=GG]\\n[trace text=&a] ; -> -1\\n~~~"},"let_length":{"detail":"文字列の長さ  \\n文字列の長さを求める","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"},{"name":"text","required":"y","default":"","rangetype":"String","comment":"長さを求める文字列"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。（詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照）"}],"snippet":[{"nm":"let_length","txt":"let_length name=${1{{代入変数名}}} text=${2:長さを求める文字列}"}],"comment":"### コード例\\n~~~skynovel\\n&a=\'abcde\'\\n[let_length name=a text=&a]\\n[trace text=&a] ; -> 5\\n~~~"},"let_ml":{"detail":"インラインテキスト代入  \\n[let_ml]〜[endlet_ml]で囲んだ複数行テキストを代入する","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"}],"snippet":[{"nm":"let_ml","txt":"let_ml name=${1{{代入変数名}}}]\\n\\tここに自由な複数行テキストを\\n[endlet_ml"}],"comment":"【JSON文字列を「.」表記で取り出せる書式】との組み合わせで、以下のようなことができます。\\n\\n### コード例\\n~~~skynovel\\n[let_ml name=a]\\n\\t{\\n\\t\\t\\"b\\": 3,\\n\\t\\t\\"c\\": 5\\n\\t}\\n[endlet_ml]\\n[trace text=&a] ; -> {\\"b\\": 3, \\"c\\": 5}\\n[trace text=&a.b] ; -> 3\\n[trace text=&a.c] ; -> 5\\n~~~\\n\\n機能ギャラリー【[フラグメントシェーダで[trans ]](https://famibee.github.io/SKYNovel_gallery/?cur=glsl_slide)】では、GLSLというシェーダー記述言語を扱うのに使用しています。\\n\\n### コード例\\n~~~skynovel\\n[let_ml name=ml]\\n\\tprecision mediump float;\\n\\tvarying vec2 vTextureCoord;\\n\\tuniform sampler2D uSampler;\\n\\tuniform float tick;\\n\\n\\tvoid main(void) {\\n\\t\\tvec2 pos = vTextureCoord;\\n\\t\\tpos.x = pos.x + tick;\\n\\t\\tif (pos.x > 1.0) gl_FragColor = vec4(0);\\n\\t\\telse gl_FragColor = texture2D(uSampler, pos);\\n\\t}\\n[endlet_ml]\\n~~~"},"let_replace":{"detail":"正規表現で置換  \\n文字列を正規表現で検索し、マッチする箇所を文字列で置き換える","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"},{"name":"text","required":"y","default":"","rangetype":"String","comment":"置換対象の文字列"},{"name":"reg","required":"y","default":"","rangetype":"String","comment":"正規表現"},{"name":"flags","required":"","default":"（なし）","rangetype":"String","comment":"正規表現のフラグ"},{"name":"val","required":"y","default":"","rangetype":"String","comment":"置き換える文字列"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。（詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照）"}],"snippet":[{"nm":"let_replace","txt":"let_replace name=${1{{代入変数名}}} text=${2:置換対象の文字列} reg=${3:正規表現} val=${4:置き換える文字列}"}],"comment":"### コード例\\n~~~skynovel\\n&a=\'abcde\'\\n[let_replace name=a text=&a reg=\'cd\' val=GG]\\n[trace text=&a] ; -> abGGe\\n~~~"},"let_round":{"detail":"四捨五入  \\n四捨五入する","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"},{"name":"text","required":"y","default":"","rangetype":"Number","comment":"四捨五入する数"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。（詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照）"}],"snippet":[{"nm":"let_round","txt":"let_round name=${1{{代入変数名}}} text=${2:四捨五入する数}"}],"comment":"### コード例\\n~~~skynovel\\n[let_round name=a text=3.45]\\n[trace text=&a] ; <- 3\\n~~~"},"let_search":{"detail":"正規表現で検索  \\n文字列内を正規表現で検索し、最初に val が見つかった位置を返す","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"},{"name":"text","required":"y","default":"","rangetype":"String","comment":"検索対象の文字列"},{"name":"reg","required":"y","default":"","rangetype":"String","comment":"正規表現"},{"name":"flags","required":"","default":"（なし）","rangetype":"String","comment":"正規表現のフラグ"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。（詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照）"}],"snippet":[{"nm":"let_search","txt":"let_search name=${1{{代入変数名}}} text=${2:検索対象の文字列} reg=${3:正規表現}"}],"comment":"### コード例\\n~~~skynovel\\n&a=\'abcde\'\\n[let_search name=a text=&a reg=\'cd\']\\n[trace text=&a] ; -> 2。a(=0),b(=1),c(=2)の2\\n~~~"},"let_substr":{"detail":"文字列から抜きだし  \\n文字列の一部を取り出す","param":[{"name":"name","required":"y","default":"","rangetype":"代入変数名","comment":"代入する変数"},{"name":"text","required":"y","default":"","rangetype":"String","comment":"元になる文字列"},{"name":"pos","required":"","default":"0","rangetype":"0（先頭）〜または〜-1（末尾）","comment":"何番目の文字から取り出すか。負の値なら「後ろから何個目か」。-1が最後の文字。【pos=-3 len=all】とすると、後ろから３文字を取り出す。"},{"name":"len","required":"","default":"1","rangetype":"文字数またはall","comment":"何文字取り出すか。all でpos以降の全て"},{"name":"cast","required":"","default":"出来るだけ数値変換","rangetype":"num、int、uint、bool、str","comment":"値をセットする際の型。（詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照）"}],"snippet":[{"nm":"let_substr","txt":"let_substr name=${1{{代入変数名}}} text=${2:元になる文字列} pos=${3:取り出す位置} len=${4:文字数またはall}"}],"comment":"### コード例\\n~~~skynovel\\n&a=\'abcde\'\\n[let_substr name=a text=&a pos=2 len=3]\\n[trace text=&a] ; -> \'cde\'\\n[let_substr name=a text=&a pos=1 len=all]\\n[trace text=&a] ; -> \'de\'\\n~~~"},"link":{"detail":"ハイパーリンク  \\n指定した文字レイヤの表ページに、ハイパーリンクを作成する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ名"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"style","required":"","default":"何もしない","rangetype":"CSS style","comment":"※文字表示中の場合はすべてのスタイルが変更される"},{"name":"ch_in_style","required":"","default":"何もしない","rangetype":"文字出現演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字出現演出名"},{"name":"ch_out_style","required":"","default":"何もしない","rangetype":"文字消去演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字消去演出名"},{"name":"wait","required":"","default":"現在の文字表示速度","rangetype":"ミリ秒","comment":"一時的な文字表示速度。0で瞬時。"},{"name":"call","required":"","default":"false","rangetype":"Boolean","comment":"trueの場合は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)、falseは[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)。  \\nただしcall=trueによりサブルーチンコールした場合、[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)によって「コールする前のイベント予約状態＆待ち状態」に戻る。"},{"name":"fn","required":"","default":"処理中のスクリプトファイル","rangetype":"ジャンプ先","comment":"クリック時にジャンプする先"},{"name":"label","required":"","default":"スクリプトファイルの先頭","rangetype":"ラベル名","comment":"コール先のスクリプトファイルにあるラベル","undefined":"クリック時ジャンプ先で「&sn.eventLabel」にて値を受け取れる"},{"name":"global","required":"","default":"false","rangetype":"Boolean","comment":"詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)と同様。  \\n※ボタンを[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)する場合はtrueにしておく"},{"name":"arg","required":"","default":"","rangetype":"String","comment":"指定した場合、クリック時ジャンプ先で「&sn.eventArg」にて値を受け取れる"},{"name":"onenter","required":"","default":"何もしない","rangetype":"ラベル名","comment":"マウス重なり（フォーカス取得）時、指定したラベルをコールする。 必ず[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で戻ること。"},{"name":"onleave","required":"","default":"何もしない","rangetype":"ラベル名","comment":"マウス重なり外れ（フォーカス外れ）時、指定したラベルをコールする。 必ず[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で戻ること。"},{"name":"clickse","required":"","default":"省略時は無音","rangetype":"音声ファイル名","comment":"指定すると、クリック時に効果音を再生する"},{"name":"enterse","required":"","default":"省略時は無音","rangetype":"音声ファイル名","comment":"指定すると、ボタン上にマウスカーソルが載った時に効果音を再生する"},{"name":"leavese","required":"","default":"省略時は無音","rangetype":"音声ファイル名","comment":"指定すると、ボタン上からマウスカーソルが外れた時に効果音を再生する"},{"name":"clicksebuf","required":"","default":"SYS","rangetype":"サウンドバッファ","comment":"クリック時効果音を再生するサウンドバッファを指定する"},{"name":"entersebuf","required":"","default":"SYS","rangetype":"サウンドバッファ","comment":"クリック時効果音を再生するサウンドバッファを指定する"},{"name":"leavesebuf","required":"","default":"SYS","rangetype":"サウンドバッファ","comment":"クリック時効果音を再生するサウンドバッファを指定する"}],"snippet":[{"nm":"link","txt":"link ${1{{ジャンプ先}}}][endlink"}],"comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)から[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)（ハイパーリンクの終了）までで囲った範囲をリンク区間と呼び、\\nその区間の文字や縦中横がハイパーリンクになる。（リンク区間は入れ子に出来ません）\\n※選択肢として使用する場合、ジャンプ先のラベル直後には必ず[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を記述して、ジャンプ直後でセーブしても正しくセーブされるようにして下さい\\n\\n機能ギャラリーにサンプルがあります。$(play)[フォント利用](https://famibee.github.io/SKYNovel_gallery/?cur=ch_button)"},"load":{"detail":"しおりの読込  \\nしおりデータを読み込み、スクリプト処理を再開する","param":[{"name":"place","required":"y","default":"","rangetype":"Number","comment":"処理対象のしおり番号"},{"name":"fn","required":"","default":"処理中のスクリプトファイル","rangetype":"スクリプトファイル名","comment":"ロード後最初にしたい共通処理をコールする（処理は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で終わらせる）。指定方法は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)と同様。ただし指定する際、fnとlabelは両方指定しなければならない。"},{"name":"label","required":"","default":"スクリプトファイルの先頭","rangetype":"ラベル名","comment":"コール先のスクリプトファイルにあるラベル"}],"snippet":[{"nm":"load","txt":"load place=${1:処理対象のしおり番号} ${2{{ジャンプ先}}}"}],"comment":""},"loadplugin":{"detail":"プラグインの読み込み  \\nプラグインとして読み込む","param":[{"name":"fn","required":"y","default":"","rangetype":"CSSファイルURL","comment":"読み込むプラグインのファイル名（拡張子はcssのみ、Webフォント用）"},{"name":"join","required":"","default":"true","rangetype":"Boolean","comment":"trueで読み込みを待って次のタグへ進む"}],"snippet":[{"nm":"loadplugin","txt":"loadplugin fn=${1:WebフォントのCSSファイルURL} join=${2|true,false|}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[フォント利用](https://famibee.github.io/SKYNovel_gallery/?cur=font)"},"log":{"detail":"ログ出力  \\nダウンロードフォルダにテキスト出力する（追記ではなく上書き。追記する。出力日時・分・スクリプト名や行番号やプロジェクト名も出力","param":[{"name":"text","required":"y","default":"","rangetype":"String","comment":"ログ出力する値"}],"snippet":[{"nm":"log","txt":"log text=&${1{{代入変数名}}}"}],"comment":"### コード例\\n~~~skynovel\\n[log text=\'てんぐ👺🌈𩸽🌕\']\\n~~~"},"macro":{"detail":"マクロ定義の開始  \\n[macro]と[endmacro]に囲まれた部分をマクロとして定義する。定義したマクロは既存のタグと同様に使用できる。渡した属性は、マクロ側で「mp:」スコープにより参照できる","param":[{"name":"name","required":"y","default":"マクロ名","rangetype":"String","comment":"既存のタグやマクロと重複しないマクロ名"}],"snippet":[{"nm":"macro","txt":"macro name=${1:マクロ名}]\\n\\t; ここにマクロの処理内容を\\n[endmacro"}],"comment":""},"navigate_to":{"detail":"ＵＲＬを開く  \\nWebページを開く","param":[{"name":"url","required":"y","default":"","rangetype":"URL文字列","comment":"開くURL"}],"snippet":[{"nm":"navigate_to","txt":"navigate_to url=${1:WebページURL}"}],"comment":""},"p":{"detail":"改ページクリック待ち  \\nシナリオファイルの順次処理を停止し、クリックやキー押下（→詳細は[waitclick]）を待つ","param":[{"name":"visible","required":"","default":"true","rangetype":"Boolean","comment":"trueで改ページ記号を表示、falseで非表示"},{"name":"er","required":"","default":"何もしない","rangetype":"Boolean","comment":"trueで改ページ待ち後に[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)処理を行なう"}],"snippet":[{"nm":"p","txt":"p visible=${1|true,false|}"}],"comment":"「breakpage」という画像やアニメpngファイルが用意されていれば、改ページクリック待ちマークとして表示する。\\nクリックやキー押下が発生した場合、処理を再開する。\\n[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)などでイベントが登録されていれば、イベント発生待ちを行う。"},"pause_tsy":{"detail":"一時停止  \\nレイヤーやフレームのトゥイーンアニメを一時停止させる","param":[{"name":"layer","required":"y","default":"","rangetype":"レイヤ名","comment":"処理対象のレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"id","required":"y","default":"","rangetype":"フレーム名","comment":"処理対象のフレーム"}],"snippet":[{"nm":"pause_tsy","txt":"pause_tsy layer=${1{{レイヤ名}}}"}],"comment":"「layer（とpage）」を指定した場合はレイヤーの操作、  \\n「id」を指定した場合はフレームの操作を行なう\\n\\n機能ギャラリーにサンプルがあります。$(play)[フォント利用](https://famibee.github.io/SKYNovel_gallery/?cur=tag_tsy)"},"playbgm":{"detail":"BGM の演奏  \\nBGMを再生する。[playse]とは違い、キー押下Skip中でも必ず再生を行なう。（canskip = false）","param":[{"name":"fn","required":"y","default":"","rangetype":"音声ファイル名","comment":"再生する音声ファイル名"},{"name":"loop","required":"","default":"true","rangetype":"Boolean","comment":"trueでBGMのようにループ再生する。"},{"name":"volume","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"再生音量。ただし音量を示すシステム変数（sys:const.an.sound.BGM.volume）は変更しない"},{"name":"speed","required":"","default":"1.0","rangetype":"0.0<（実数）","comment":"再生速度。（=1:元のまま、<1:遅い、>1:早い）"},{"name":"join","required":"","default":"true","rangetype":"Boolean","comment":"trueで読み込みを待って次のタグへ進む"},{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"trueでキー押下Skip中なら再生をしない"},{"name":"start_ms","required":"","default":"0","rangetype":"ミリ秒","comment":"再生の開始位置を指定する。0は冒頭"},{"name":"end_ms","required":"","default":"","rangetype":"ミリ秒","comment":"再生の終了位置を指定する。省略時は末端。  \\n正の値は「冒頭から何ms目を終端とするか」  \\n負の値は「末尾から何ms手前を終端とするか」の指定。"},{"name":"ret_ms","required":"","default":"0","rangetype":"ミリ秒","comment":"ループ戻り位置を指定する。0は冒頭。  \\nループ再生中にend_ms指定位置（省略時は末尾）に到達した場合、この指定位置に戻る。 ループ再生しない（loop=false）際は無視される。"}],"snippet":[{"nm":"playbgm","txt":"playbgm fn=${1{{音声ファイル名}}}"}],"comment":""},"playse":{"detail":"効果音の再生  \\n効果音を再生する","param":[{"name":"fn","required":"y","default":"","rangetype":"音声ファイル名","comment":"再生する音声ファイル名"},{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"効果音を識別するサウンドバッファ。サウンドバッファを変えれば同時に複数の音を操作することが出来ます"},{"name":"loop","required":"","default":"false","rangetype":"Boolean","comment":"trueでBGMのようにループ再生する。"},{"name":"volume","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"再生音量。ただし音量を示すシステム変数（sys:const.an.sound.BGM.volume）は変更しない"},{"name":"speed","required":"","default":"1.0","rangetype":"0.0<（実数）","comment":"再生速度。（=1:元のまま、<1:遅い、>1:早い）"},{"name":"join","required":"","default":"true","rangetype":"Boolean","comment":"trueで読み込みを待って次のタグへ進む"},{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"trueでキー押下Skip中なら再生をしない"},{"name":"start_ms","required":"","default":"0","rangetype":"ミリ秒","comment":"再生の開始位置を指定する。0は冒頭"},{"name":"end_ms","required":"","default":"","rangetype":"ミリ秒","comment":"再生の終了位置を指定する。省略時は末端。  \\n正の値は「冒頭から何ms目を終端とするか」  \\n負の値は「末尾から何ms手前を終端とするか」の指定。"},{"name":"ret_ms","required":"","default":"0","rangetype":"ミリ秒","comment":"ループ戻り位置を指定する。0は冒頭。  \\nループ再生中にend_ms指定位置（省略時は末尾）に到達した場合、この指定位置に戻る。 ループ再生しない（loop=false）際は無視される。"}],"snippet":[{"nm":"playse","txt":"playse fn=${1{{音声ファイル名}}} buf=${2{{サウンドバッファ}}}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[効果音とBGM](https://famibee.github.io/SKYNovel_gallery/?cur=sound)"},"pop_stack":{"detail":"コールスタック破棄  \\nコールスタックを一つ破棄する\\n極力使用しないコーディングを推奨します","param":[{"name":"clear","required":"","default":"false","rangetype":"Boolean","comment":"true：全て破棄する。空でもエラーを出さない  \\nfalse：スタックを一つ破棄する。空の場合はエラーメッセージ＆アプリ停止"}],"snippet":[{"nm":"pop_stack","txt":"pop_stack clear=${1|false,true|}"}],"comment":""},"quake":{"detail":"画面を揺らす  \\n画面全体を揺らす","param":[{"name":"time","required":"y","default":"","rangetype":"ミリ秒数","comment":"揺らす時間"},{"name":"hmax","required":"","default":"10","rangetype":"Integer","comment":"横方向の最大揺らし幅。幅はランダム値を取る"},{"name":"vmax","required":"","default":"10","rangetype":"Integer","comment":"縦方向の最大揺らし幅。幅はランダム値を取る"},{"name":"ease","required":"","default":"Linear.None（イージング無し）","rangetype":"イージング名","comment":"揺れのイージング（値の変化の仕方）を指定する。[イージングの変化はこちらの図](https://createjs.com/demos/tweenjs/tween_sparktable)（または[こちら](https://sole.github.io/tween.js/examples/03_graphs.html)）が分かりやすい。指定できる値は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照"}],"snippet":[{"nm":"quake","txt":"quake time=${1:500} hmax=${2:10} vmax=${3:10}][wq"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[文字出現演出](https://famibee.github.io/SKYNovel_gallery/?cur=tag_quake)"},"r":{"detail":"改行  \\n指定した文字レイヤの表ページに、改行を出力する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"}],"snippet":[{"nm":"r","txt":"r"}],"comment":""},"rec_ch":{"detail":"履歴書き込み  \\n履歴に文字や付加情報を出力する","param":[{"name":"text","required":"","default":"","rangetype":"String","comment":"表示したい文字列。ルビ文法（《》）も解析する"}],"snippet":[{"nm":"rec_ch","txt":"rec_ch text=${1:表示したい文字列}"}],"comment":"「現在のページ」のテキストに文字を追加する。\\n「現在のページ」に対する、任意の属性も自由に追加できる。その属性はconst.sn.log.jsonにも含まれ、フレームに渡しJavaScriptなどで（JSON.parse()して）利用できる"},"rec_r":{"detail":"履歴改行  \\n履歴に改行を出力する","param":[],"snippet":[{"nm":"rec_r","txt":"rec_r"}],"comment":""},"record_place":{"detail":"セーブポイント指定\\n本タグの位置を、スクリプト読み込み時に再開する位置として設定する","param":[{"name":"layer","required":"","default":"全てのレイヤ","rangetype":"レイヤ名","comment":"保存対象レイヤ名（カンマ区切りで複数可能）。しおりに状態を保存するレイヤ。Save/Load画面レイヤや設定画面レイヤなど、保存すべきでないレイヤを除いて指定すべき"},{"name":"reset_sound","required":"","default":"true","rangetype":"Boolean","comment":"全てのサウンドを停止・再度再生開始するか"}],"snippet":[{"nm":"record_place","txt":"record_place"}],"comment":""},"reload_script":{"detail":"スクリプト再読込\\n現在処理中のスクリプトをリロードする。実行位置は[record_place]によるセーブポイントまで戻って再開する。  \\n※スクリプトを大幅に変えた後だと、正常に再開できない場合があります。","param":[],"snippet":[{"nm":"reload_script","txt":"reload_script"}],"comment":""},"reset_rec":{"detail":"履歴リセット  \\n履歴をクリアする。応用として、履歴に加工した文字列を設定し、履歴画面に機能を追加する事も","param":[{"name":"text","required":"","default":"全てクリア","rangetype":"String","comment":"履歴に設定したい文字列"}],"snippet":[{"nm":"reset_rec","txt":"reset_rec"}],"comment":""},"resume_tsy":{"detail":"一時停止再開  \\nレイヤーやフレームのトゥイーンアニメ一時停止を再開させる","param":[{"name":"layer","required":"y","default":"","rangetype":"レイヤ名","comment":"処理対象のレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"id","required":"y","default":"","rangetype":"フレーム名","comment":"処理対象のフレーム"}],"snippet":[{"nm":"resume_tsy","txt":"resume_tsy layer=${1{{レイヤ名}}}"}],"comment":"「layer（とpage）」を指定した場合はレイヤーの操作、  \\n「id」を指定した場合はフレームの操作を行なう\\n\\n機能ギャラリーにサンプルがあります。$(play)[フォント利用](https://famibee.github.io/SKYNovel_gallery/?cur=tag_tsy)"},"return":{"detail":"サブルーチンから戻る  \\nコールスタックに積まれているジャンプ先にジャンプする。\\n最後に積んだスタックを一つ破棄する","param":[],"snippet":[{"nm":"return","txt":"return"}],"comment":""},"ruby2":{"detail":"文字列と複数ルビの追加  \\n親文字列とルビ文字列のセットで文字を追加する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"t","required":"y","default":"","rangetype":"String","comment":"親文字列"},{"name":"r","required":"y","default":"","rangetype":"String","comment":"ルビ文字列"}],"snippet":[{"nm":"ruby2","txt":"ruby2 t=${1:親文字列} r=${2:ルビ文字列}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[直感的なルビ文法](https://famibee.github.io/SKYNovel_gallery/?cur=ruby)"},"s":{"detail":"停止する  \\nシナリオファイルの順次処理を停止する\\n[event]などでイベントが登録されていれば、イベント発生待ちを行う","param":[],"snippet":[{"nm":"s","txt":"s"}],"comment":""},"save":{"detail":"しおりの保存  \\nしおりデータを保存する","param":[{"name":"place","required":"y","default":"","rangetype":"Number","comment":"処理対象のしおり番号"}],"snippet":[{"nm":"save","txt":"save place=${1:処理対象のしおり番号}"}],"comment":"しおりデータを保存する。  \\n読み込み時に再開するスクリプトの位置は最後に[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)をコールした位置。  \\n\\n[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)がゲーム状態（レイヤ状態など）をバッファに退避し、  \\n[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)は指定しおりに書き出す機能。"},"set_cancel_skip":{"detail":"スキップ中断予約  \\n（内部APIにつき説明省略）","param":[],"snippet":[{"nm":"set_cancel_skip","txt":"set_cancel_skip"}],"comment":""},"set_focus":{"detail":"フォーカス移動  \\n（未作成）","param":[],"snippet":[{"nm":"set_focus","txt":"set_focus"}],"comment":""},"set_frame":{"detail":"フレーム変数に設定  \\nフレーム内の変数に、値を設定する","param":[{"name":"id","required":"y","default":"","rangetype":"フレーム名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義したフレーム名"},{"name":"var_name","required":"y","default":"","rangetype":"String","comment":"フレーム内の変数名"},{"name":"text","required":"y","default":"セットする値","rangetype":"String","comment":"フレーム内の変数にセットする値"}],"snippet":[{"nm":"set_frame","txt":"set_frame id=${1{{フレーム名}}} var_name=${2:フレーム内の変数名} text=${3:セットする値}"}],"comment":"### コード例\\n~~~skynovel\\n[add_frame id=config src=_config visible=false]\\n[event key=\'dom=config:#close\' label=*exit global=true]\\n\\n[let_frame id=config var_name=val_sldBackAlpha]\\n&sys:TextLayer.Back.Alpha = const.sn.frm.config.val_sldBackAlpha/100\\n[return]\\n\\n*val2ctrl\\n[set_frame id=config var_name=val_sldBackAlpha text=&sys:TextLayer.Back.Alpha*100]\\n[let_frame id=config var_name=val2ctrl function=true]\\n[return]\\n~~~\\n\\n機能ギャラリーにサンプルがあります。$(play)[HTMLフレーム](https://famibee.github.io/SKYNovel_gallery/?cur=frame)"},"snapshot":{"detail":"スナップショット  \\nアプリ表示部分全体を画像として保存する","param":[{"name":"layer","required":"","default":"全てのレイヤ","rangetype":"レイヤ名","comment":"半角カンマ区切りで複数レイヤを指定可能"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"fn","required":"","default":"snapshot","rangetype":"String","comment":"保存するファイル名  \\n省略時はデスクトップに保存  \\n保存する画像フォーマット（png、jpg）は拡張子で指定"},{"name":"width","required":"","default":"アプリ表示部分の横サイズ","rangetype":"1〜","comment":"保存する画像の横ドットサイズ。  \\n元のサイズと異なる場合は拡大・縮小される。"},{"name":"height","required":"","default":"アプリ表示部分の縦サイズ","rangetype":"1〜","comment":"保存する画像の縦ドットサイズ。  \\n元のサイズと異なる場合は拡大・縮小される。"},{"name":"smoothing","required":"","default":"false","rangetype":"Boolean","comment":"拡大・縮小保存される場合、スムージングするか"},{"name":"b_color","required":"","default":"config.anprjで指定した背景色","rangetype":"色指定。0xFF000000（黒）など  \\n16進数では透過2桁＋赤2桁＋緑2桁＋青2桁で指定","comment":"テキスト背後の矩形色。pngで 0x0 にすると透過する。  \\n透過しない黒は 0xFF000000"}],"snippet":[{"nm":"snapshot","txt":"snapshot layer=${1:レイヤ名}"}],"comment":"画面スナップショットをダウンロードフォルダに保存する。\\nファイル名にはプロジェクト名と日時どが追加される。\\n\\n※文字の表示とスナップショットは、厳密には同じではないので注意。"},"span":{"detail":"インラインスタイル設定  \\nこの指定以降の文字のレイアウト（フォントや文字色など）を指定する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"wait","required":"","default":"現在の文字表示速度","rangetype":"ミリ秒","comment":"一時的な文字表示速度。0で瞬時。"},{"name":"style","required":"","default":"何もしない","rangetype":"CSSstyle","comment":"※文字表示中の場合はすべてのスタイルが変更される"},{"name":"ch_in_style","required":"","default":"何もしない","rangetype":"文字出現演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字出現演出名"},{"name":"ch_out_style","required":"","default":"何もしない","rangetype":"文字消去演出名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義した文字消去演出名"},{"name":"r_align","required":"","default":"現在値","rangetype":"left、center、right、justify、121、even、1ruby","comment":"ルビ揃えを指定する。  \\n> left ……（肩付き）先頭親文字から、ルビ間は密着  \\n> center ……（中付き）センター合わせ、〃  \\n> right ……（右／下揃え）末尾親文字から、〃  \\n> justify ……（両端揃え）先頭から末尾親文字間に、ルビ間は均等にあける  \\n> 121 ……（1-2-1(JIS)）ルビの前後を比率1、ルビ間を比率2であける  \\n> even ……（均等アキ）ルビの前後、ルビ間も均等にあける  \\n> 1ruby ……（1ルビ文字アキ）ルビの前後をルビ一文字空け、ルビ間は均等にあける  \\n  \\n初期値は center。  \\n  \\n※親文字よりルビの方が長い場合は、親文字に対する「中付き」表示になる  \\n→参考（[機能ギャラリー・直感的なルビ文法](https://famibee.github.io/SKYNovel_gallery/index.html?cur=built_in_ruby)）"}],"snippet":[{"nm":"span","txt":"span style=${1:CSSstyle}"}],"comment":"一時的に文字レイヤのlayout属性への指定を上書きするイメージ。 文字レイヤをクリア（[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)、[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)）するとリセット、以降は元通り文字レイヤのlayout属性に従う"},"stop_allse":{"detail":"全効果音再生の停止  \\n全てのサウンドを停止する。ぴたっと止める。","param":[],"snippet":[{"nm":"stop_allse","txt":"stop_allse"}],"comment":""},"stop_quake":{"detail":"画面揺らし中断  \\n画面揺らしを中断する","param":[{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"trueでクリックキャンセル可能にする"}],"snippet":[{"nm":"stop_quake","txt":"stop_quake canskip=${1|true,false|}"}],"comment":""},"stop_tsy":{"detail":"トゥイーン中断  \\nレイヤーやフレームのトゥイーンアニメを中断、終了する","param":[{"name":"layer","required":"y","default":"","rangetype":"レイヤ名","comment":"処理対象のレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"id","required":"y","default":"","rangetype":"フレーム名","comment":"処理対象のフレーム"}],"snippet":[{"nm":"stop_tsy","txt":"stop_tsy layer=${1{{レイヤ名}}}"}],"comment":"「layer（とpage）」を指定した場合はレイヤーの操作、  \\n「id」を指定した場合はフレームの操作を行なう\\n\\n機能ギャラリーにサンプルがあります。$(play)[フォント利用](https://famibee.github.io/SKYNovel_gallery/?cur=tag_tsy)"},"stopbgm":{"detail":"BGM 演奏の停止   \\nBGM 演奏を停止する。ぴたっと止める。","param":[],"snippet":[{"nm":"stopbgm","txt":"stopbgm"}],"comment":""},"stopfadese":{"detail":"音声フェードの停止  \\n音声フェードを停止する","param":[{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"効果音を識別するサウンドバッファ。サウンドバッファを変えれば同時に複数の音を操作することが出来ます"}],"snippet":[{"nm":"stopfadese","txt":"stopfadese buf=${1{{サウンドバッファ}}}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[効果音とBGM](https://famibee.github.io/SKYNovel_gallery/?cur=sound)"},"stopse":{"detail":"効果音再生の停止  \\n効果音再生を停止する","param":[{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"効果音を識別するサウンドバッファ。サウンドバッファを変えれば同時に複数の音を操作することが出来ます"}],"snippet":[{"nm":"stopse","txt":"stopse buf=${1{{サウンドバッファ}}}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[効果音とBGM](https://famibee.github.io/SKYNovel_gallery/?cur=sound)"},"tcy":{"detail":"縦中横を表示する  \\n縦中横文字を追加する。ルビは同時に設定する","param":[{"name":"layer","required":"","default":"デフォルト文字レイヤ","rangetype":"文字レイヤ名","comment":"文字を表示するレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"t","required":"y","default":"","rangetype":"String","comment":"縦中横文字列、通常半角文字を指定する"},{"name":"r","required":"","default":"ルビ無し","rangetype":"String","comment":"ルビ文字列"}],"snippet":[{"nm":"tcy","txt":"tcy t=${1:縦中横文字列}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[トップページの「451」](https://famibee.github.io/SKYNovel_gallery/)"},"title":{"detail":"タイトル指定  \\nアプリウインドウのタイトル文字列を設定する","param":[{"name":"text","required":"y","default":"","rangetype":"String","comment":"タイトル文字列"}],"snippet":[{"nm":"title","txt":"title text=${1:タイトル文字列}"}],"comment":""},"toggle_full_screen":{"detail":"全画面状態切替\\n呼び出す度にアプリの全画面／ウインドウモードを切り替える","param":[{"name":"key","required":"","default":"イベント登録せずモード切替","rangetype":"イベントのキー名※1","comment":"イベントを発生させるトリガーイベントを予約する。key属性の値は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照"}],"snippet":[{"nm":"toggle_full_screen","txt":"toggle_full_screen key=${1{{イベント名}}}"}],"comment":"現在の状態は文字列変数「tmp:const.sn.displayState」で分かる。trueならフルスクリーン"},"trace":{"detail":"デバッグ表示へ出力  \\n属性をデバッグ表示する","param":[{"name":"text","required":"y","default":"","rangetype":"String","comment":"デバッグ表示する値"}],"snippet":[{"nm":"trace","txt":"trace text=&${1{{代入変数名}}}"}],"comment":""},"trans":{"detail":"ページ裏表を交換  \\n裏ページを表ページとクロスフェードする","param":[{"name":"layer","required":"","default":"全てのレイヤ","rangetype":"レイヤ名","comment":"クロスフェードするレイヤ（カンマ区切りで複数可能）。指定以外のレイヤは変化させない"},{"name":"time","required":"","default":"0","rangetype":"ミリ秒","comment":"変化にかける時間"},{"name":"delay","required":"","default":"0","rangetype":"ミリ秒","comment":"変化する前に待機する遅延時間"},{"name":"rule","required":"","default":"","rangetype":"画像ファイル名","comment":"指定した場合はルール画像として、ピクセル単位でクロスフェードするタイミングをずらす。ルール画像の黒いピクセル（と同じ位置にあるピクセル）が先に処理され、白が最後になる。  \\n省略時は画面全体ピクセルで同時にクロスフェードする"},{"name":"vague","required":"","default":"0.04","rangetype":"トランジション期間全体を1とした値","comment":"表レイヤと裏レイヤの境界を曖昧にぼかす度合い"},{"name":"ease","required":"","default":"Linear.None（イージング無し）","rangetype":"イージング名","comment":"揺れのイージング（値の変化の仕方）を指定する。  \\n[イージングの変化はこちらの図](https://createjs.com/demos/tweenjs/tween_sparktable)（または[こちら](https://sole.github.io/tween.js/examples/03_graphs.html)）が分かりやすい。  \\n指定できる値は以下の通り。  \\nBack.In、Back.InOut、Back.Out  \\nBounce.In、Bounce.InOut、Bounce.Out  \\nCircular.In、Circular.InOut、Circular.Out  \\nCubic.In、Cubic.InOut、Cubic.Out  \\nElastic.In、Elastic.InOut、Elastic.Out  \\nExponential.In、Exponential.InOut、Exponential.Out  \\nLinear.None  \\nQuadratic.In、Quadratic.InOut、Quadratic.Out  \\nQuartic.In、Quartic.InOut、Quartic.Out  \\nQuintic.In、Quintic.InOut、Quintic.Out  \\nSinusoidal.In、Sinusoidal.InOut、Sinusoidal.Out  \\n- [tween.js/README.md at master · tweenjs/tween.js](https://github.com/tweenjs/tween.js/blob/master/README.md)  \\n- [CreateJS でのトゥイーンの作成方法 - ICS MEDIA](https://ics.media/tutorial-createjs/tween/)"},{"name":"glsl","required":"","default":"","rangetype":"シェーダー記述言語GLSL","comment":"機能ギャラリーに[フラグメントシェーダの動作サンプル](https://famibee.github.io/SKYNovel_gallery/?cur=glsl_slide)がありますので、詳細はそちらで。  \\nざっくり説明すると、  \\n【vTextureCoord】がピクセルの位置、  \\n【uSampler】が一ピクセル単位の画像データ、  \\n【tick】が時間経過、です"}],"snippet":[{"nm":"trans","txt":"trans layer=${1{{レイヤ名}}} time=${2:500} rule=${3{{画像ファイル名}}}][wt"}],"comment":"クロスフェードを開始すると、終了を待たずに次のタグへと処理を進める。\\n終了を待ちたい場合は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を使用する。\\n\\nクロスフェード終了後は元・裏ページから元・表ページに内容をコピーし、同じ内容になる。\\n\\nルール画像は白黒かグレースケールを推奨。（見た目と動きが一致する）\\n\\n$(warning)また[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)～[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)間で文字表示や[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)は動作未定義、非推奨。\\n[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)終了を待たず何かをするのは避けた方がよいでしょう。"},"tsy":{"detail":"トゥイーン開始  \\nレイヤーにトゥイーンアニメ（変形・移動・回転アニメーション）を加える","param":[{"name":"layer","required":"y","default":"","rangetype":"レイヤ名","comment":"処理対象のレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"time","required":"y","default":"","rangetype":"ミリ秒数","comment":"トゥイーンにかける時間"},{"name":"delay","required":"","default":"0","rangetype":"ミリ秒数","comment":"トゥイーンを始める前の、何もしない待ち時間- "},{"name":"repeat","required":"","default":"1","rangetype":"0〜","comment":"繰返し回数。0 で無限ループ。1を設定すると「繰り返しなし」、2を設定すると「二回同じ動き」を行なう。"},{"name":"arrive","required":"","default":"false","rangetype":"Boolean","comment":"trueならクリックキャンセルでアニメ終端までSkip。falseならその場で停止"},{"name":"backlay","required":"","default":"false","rangetype":"Boolean","comment":"trueならトゥイーン終了時、fore→backへ属性をコピーする。  \\nコピーする属性はalpha, height, rotation, scale_x, scale_y, width, left, top。"},{"name":"ease","required":"","default":"Linear.None（イージング無し）","rangetype":"イージング名","comment":"揺れのイージング（値の変化の仕方）を指定する。[イージングの変化はこちらの図](https://createjs.com/demos/tweenjs/tween_sparktable)（または[こちら](https://sole.github.io/tween.js/examples/03_graphs.html)）が分かりやすい。指定できる値は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照"},{"name":"yoyo","required":"","default":"false","rangetype":"Boolean","comment":"（暫定）ヨーヨーのように逆方向に戻って繰り返す"},{"name":"chain","required":"","default":"なにもしない","rangetype":"レイヤ名","comment":"指定したレイヤのトゥイーンアニメが終了してから、このトゥイーンを続けて開始する"},{"name":"alpha","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"レイヤの透過度。0（完全透明）〜0.5（半透明）〜1（不透明）  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"width","required":"","default":"なにもしない","rangetype":"Number","comment":"横幅  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"height","required":"","default":"なにもしない","rangetype":"Number","comment":"縦幅  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"rotation","required":"","default":"0","rangetype":"-180〜180","comment":"回転角を度単位で指定。時計回りは0～180、反時計回りは0～-180を指定。左上を中心に回る  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"scale_x","required":"","default":"1.0","rangetype":"正負の実数値","comment":"横方向を何倍に拡大／縮小するか。負の値ならレイヤを左右反転  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"scale_y","required":"","default":"1.0","rangetype":"正負の実数値","comment":"縦方向を何倍に拡大／縮小するか。負の値ならレイヤを上下反転  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"x","required":"","default":"0","rangetype":"Number","comment":"leftの変化目標値  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"y","required":"","default":"0","rangetype":"Number","comment":"topの変化目標値  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"}],"snippet":[{"nm":"tsy","txt":"tsy layer=${1{{レイヤ名}}} time=${2:トゥイーンにかける時間}"}],"comment":"「目標値」を設定する時、相対値あるいは絶対値を指定できる\\n\\n| 指定\\t\\t\\t | 説明\\t|\\n--|--\\n| x=500\\t\\t\\t| X位置を500に |\\n| x=\'=500\'\\t\\t| 現在のX位置に+500加算した位置 |\\n| x=\'=-500\'\\t\\t| 現在のX位置に-500加算した位置 |\\n| x=\'250,500\'\\t| +250から＋500までの間でランダムな位置 |\\n| x=\'=250,500\'\\t| +250から＋500までの間でランダムな値を現在のX位置に加算した位置 |\\n\\n\\n機能ギャラリーにサンプルがあります。$(play)[トゥイーンアニメを行なう](https://famibee.github.io/SKYNovel_gallery/?cur=tag_tsy)"},"tsy_frame":{"detail":"フレームをトゥイーン開始  \\nフレームのトゥイーンアニメを行なう","param":[{"name":"id","required":"y","default":"","rangetype":"フレーム名","comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)で定義したフレーム名"},{"name":"time","required":"y","default":"","rangetype":"ミリ秒数","comment":"トゥイーンにかける時間"},{"name":"delay","required":"","default":"0","rangetype":"ミリ秒数","comment":"トゥイーンを始める前の、何もしない待ち時間"},{"name":"repeat","required":"","default":"1","rangetype":"0〜","comment":"繰返し回数。0 で無限ループ。1を設定すると「繰り返しなし」、2を設定すると「二回同じ動き」を行なう。"},{"name":"ease","required":"","default":"Linear.None（イージング無し）","rangetype":"イージング名","comment":"揺れのイージング（値の変化の仕方）を指定する。[イージングの変化はこちらの図](https://createjs.com/demos/tweenjs/tween_sparktable)（または[こちら](https://sole.github.io/tween.js/examples/03_graphs.html)）が分かりやすい。指定できる値は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)を参照"},{"name":"yoyo","required":"","default":"false","rangetype":"Boolean","comment":"（暫定）ヨーヨーのように逆方向に戻って繰り返す"},{"name":"chain","required":"","default":"なにもしない","rangetype":"レイヤ名","comment":"指定したレイヤのトゥイーンアニメが終了してから、このトゥイーンを続けて開始する"},{"name":"alpha","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"レイヤの透過度。0（完全透明）〜0.5（半透明）〜1（不透明）  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"width","required":"","default":"なにもしない","rangetype":"Number","comment":"横幅  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"height","required":"","default":"なにもしない","rangetype":"Number","comment":"縦幅  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"rotation","required":"","default":"0","rangetype":"-180〜180","comment":"回転角を度単位で指定。時計回りは0～180、反時計回りは0～-180を指定。左上を中心に回る  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"scale_x","required":"","default":"1.0","rangetype":"正負の実数値","comment":"横方向を何倍に拡大／縮小するか。負の値ならレイヤを左右反転  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"scale_y","required":"","default":"1.0","rangetype":"正負の実数値","comment":"縦方向を何倍に拡大／縮小するか。負の値ならレイヤを上下反転  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"x","required":"","default":"0","rangetype":"Number","comment":"leftの変化目標値  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"},{"name":"y","required":"","default":"0","rangetype":"Number","comment":"topの変化目標値  \\n> **相対値あるいは絶対値を指定できる**  \\n> x=500 .......... 500  \\n> x=\'=500\' ....... 現在のxに+500加算した値  \\n> x=\'=-500\' ...... 現在のxに-500加算した値  \\n> x=\'250,500\' .... +250から＋500までの間でランダムな値  \\n> x=\'=250,500\' ... +250から＋500までの間でランダムな値を現在のxに加算した値"}],"snippet":[{"nm":"tsy_frame","txt":"tsy_frame id=${1{{フレーム名}}} time=${2:トゥイーンにかける時間}"}],"comment":"「目標値」を設定する時、相対値あるいは絶対値を指定できる\\n\\n| 指定\\t\\t\\t | 説明\\t|\\n--|--\\n| x=500\\t\\t\\t| X位置を500に |\\n| x=\'=500\'\\t\\t| 現在のX位置に+500加算した位置 |\\n| x=\'=-500\'\\t\\t| 現在のX位置に-500加算した位置 |\\n| x=\'250,500\'\\t| +250から＋500までの間でランダムな位置 |\\n| x=\'=250,500\'\\t| +250から＋500までの間でランダムな値を現在のX位置に加算した位置 |"},"update_check":{"detail":"更新チェック機能  \\nネットにアプリの更新を確認し、ダウンロードもサポートする","param":[{"name":"url","required":"y","default":"","rangetype":"URL文字列","comment":"latest(-mac).ymlや、dmg(exe)を置いたWebサーバーのフォルダURLを指定する。終端は「/」をつけること"}],"snippet":[{"nm":"update_check","txt":"update_check url=${1:WebページURL}"}],"comment":"アプリの最新バージョンをネットで確認する。（アプリ版でのみ動作）\\n処理は非同期に行われ、更新があった時のみ更新確認ウインドウが表示される。\\nダウンロードフォルダにアプリパッケージの dmg（インストーラー exe）をダウンロードする"},"volume":{"detail":"BGMや効果音の音量を指定  \\nBGMや効果音を指定した音量にする","param":[{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"効果音を識別するサウンドバッファ。サウンドバッファを変えれば同時に複数の音を操作することが出来ます"},{"name":"volume","required":"","default":"1.0","rangetype":"0.0〜1.0（実数）","comment":"再生音量。ただし音量を示すシステム変数（sys:const.an.sound.BGM.volume）は変更しない"}],"snippet":[{"nm":"volume","txt":"volume buf=${1{{サウンドバッファ}}} volume=${2:1.0}"}],"comment":""},"wait":{"detail":"ウェイトを入れる\\n指定時間スクリプト処理を待ち、再開する\\n[event]などでイベントが登録されていても、イベント発生待ちを行わない","param":[{"name":"time","required":"y","default":"","rangetype":"ミリ秒","comment":"処理を待つ時間"},{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"クリックなど（→詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)）でウエイトをキャンセルできるか"}],"snippet":[{"nm":"wait","txt":"wait time=${1:処理を待つ時間}"}],"comment":""},"wait_tsy":{"detail":"トゥイーン終了待ち  \\nレイヤーやフレームの終了を待ち、再開する","param":[{"name":"layer","required":"y","default":"","rangetype":"レイヤ名","comment":"処理対象のレイヤ"},{"name":"page","required":"","default":"fore","rangetype":"fore、back","comment":"ページの裏表"},{"name":"id","required":"y","default":"","rangetype":"フレーム名","comment":"処理対象のフレーム"},{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"クリックなどでウエイトをキャンセルできるか"}],"snippet":[{"nm":"wait_tsy","txt":"wait_tsy layer=${1{{レイヤ名}}} canskip=${2|true,false|}"}],"comment":"[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)などでイベントが登録されていても、イベント発生待ちを行わない。 繰返し回数が0（無限ループ）の場合、何もせず終了する。  \\n「layer（とpage）」を指定した場合はレイヤーの操作、  \\n「id」を指定した場合はフレームの操作を行なう\\n\\n機能ギャラリーにサンプルがあります。$(play)[フォント利用](https://famibee.github.io/SKYNovel_gallery/?cur=tag_tsy)"},"waitclick":{"detail":"クリックを待つ  \\nシナリオファイルの順次処理を停止し、クリックやキー押下を待つ","param":[],"snippet":[{"nm":"waitclick","txt":"waitclick"}],"comment":""},"wb":{"detail":"BGM フェードの終了待ち  \\nBGM フェードの終了を待つ","param":[{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"trueでクリックキャンセル可能にする"}],"snippet":[{"nm":"wb","txt":"wb canskip=${1|false,true|}"}],"comment":""},"wf":{"detail":"効果音フェードの終了待ち  \\n効果音 フェードの終了を待つ","param":[{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"効果音を識別するサウンドバッファ。サウンドバッファを変えれば同時に複数の音を操作することが出来ます"},{"name":"canskip","required":"","default":"false","rangetype":"Boolean","comment":"trueでクリックキャンセル可能にする"}],"snippet":[{"nm":"wf","txt":"wf buf=${1{{サウンドバッファ}}}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[効果音とBGM](https://famibee.github.io/SKYNovel_gallery/?cur=sound)"},"window":{"detail":"アプリウインドウ設定  \\nゲームアプリのウインドウサイズや位置などを変更する","param":[{"name":"width","required":"","default":"現在値","rangetype":"1〜","comment":"アプリウインドウの横幅を指定"},{"name":"height","required":"","default":"現在値","rangetype":"1〜","comment":"アプリウインドウの高さを指定"},{"name":"framerate","required":"","default":"現在値","rangetype":"1〜","comment":"アプリ全体のフレームレートを変更"},{"name":"centering","required":"","default":"何もしない","rangetype":"Boolean","comment":"trueを指定すると、アプリウインドウをデスクトップの中央に移動する"},{"name":"x","required":"","default":"何もしない","rangetype":"画面左上を(0, 0)とする座標","comment":"デスクトップにおけるアプリウインドウの横位置を指定"},{"name":"y","required":"","default":"何もしない","rangetype":"(↑と同じ)","comment":"デスクトップにおけるアプリウインドウの縦位置を指定"}],"snippet":[{"nm":"window","txt":"window"}],"comment":""},"wl":{"detail":"BGM 再生の終了待ち  \\nBGM 再生の終了を待つ。\\nloop=true（[playbgm]のデフォルト値）なら待たない。\\n利用時は【音声再生[playbgm]がjoin=true(ちなみにデフォルト)であること】を必須条件とします","param":[],"snippet":[{"nm":"wl","txt":"wl"}],"comment":""},"wq":{"detail":"画面揺らし終了待ち  \\n画面揺らしの終了を待ち、再開する。\\n[event]などでイベントが登録されていても、イベント発生待ちを行わない","param":[{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"trueでクリックキャンセル可能にする"}],"snippet":[{"nm":"wq","txt":"wq canskip=${1|true,false|}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[文字出現演出](https://famibee.github.io/SKYNovel_gallery/?cur=tag_quake)"},"ws":{"detail":"効果音再生の終了待ち  \\n効果音再生の終了を待つ  \\nloop=trueなら待たない。 利用時は【音声再生[playse]がjoin=true(ちなみにデフォルト)であること】を必須条件とします","param":[{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"効果音を識別するサウンドバッファ。サウンドバッファを変えれば同時に複数の音を操作することが出来ます"},{"name":"canskip","required":"","default":"false","rangetype":"Boolean","comment":"trueでクリックキャンセル可能にする"}],"snippet":[{"nm":"ws","txt":"ws buf=${1{{サウンドバッファ}}}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[効果音とBGM](https://famibee.github.io/SKYNovel_gallery/?cur=sound)"},"wt":{"detail":"トランス終了待ち  \\n[trans]で開始したトランスの終了を待つ","param":[{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"trueでクリックキャンセル可能にする"}],"snippet":[{"nm":"wt","txt":"wt canskip=${1|true,false|}"}],"comment":"終了次第、スクリプト処理を次へ進める。\\n\\n$(warning)また[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)～[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)間で文字表示や[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)は動作未定義、非推奨。\\n[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)終了を待たず何かをするのは避けた方がよいでしょう。"},"wv":{"detail":"動画再生終了待ち  \\n[lay]で開始したムービー再生の終了を待つ","param":[{"name":"canskip","required":"","default":"true","rangetype":"Boolean","comment":"クリックなど（→詳細は[[$1]](https://famibee.github.io/SKYNovel/tag.htm#$1)）でウエイトをキャンセルできるか"}],"snippet":[{"nm":"wv","txt":"wv canskip=${1|true,false|}"}],"comment":"何かしらの画像レイヤで再生している動画の終了を待つ"},"xchgbuf":{"detail":"サウンドバッファの交換  \\n二つのバッファを交換する。未再生でも再生中でも良いが、フェード中は避けること","param":[{"name":"buf","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"サウンドバッファ"},{"name":"buf2","required":"","default":"SE","rangetype":"サウンドバッファ","comment":"もう一つのサウンドバッファ"}],"snippet":[{"nm":"xchgbuf","txt":"xchgbuf buf=${1{{サウンドバッファ}}} buf2=${2{{サウンドバッファ}}}"}],"comment":"機能ギャラリーにサンプルがあります。$(play)[効果音とBGM](https://famibee.github.io/SKYNovel_gallery/?cur=sound)"}}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PnlPrjSetting=void 0;const r=n(8),i=n(6),s=n(12);class a{constructor(e,t,n,o){var c,l,u;if(this.ctx=e,this.dir=t,this.chgTitle=n,this.ss=o,this.oCfg={book:{title:"",creator:"",cre_url:"",publisher:"",pub_url:"",detail:"",version:"1.0"},save_ns:"",window:{width:300,height:300},log:{max_len:1024},init:{bg_color:0,tagch_msecwait:10,auto_msecpagewait:3500,escape:""},debug:{devtool:!1,token:!1,tag:!1,putCh:!1,debugLog:!1,baseTx:!1,masume:!1,variable:!1},code:{}},this.pnlWV=null,this.hRep={save_ns:async e=>{await r.replaceFile(this.fnPkgJs,/("name"\s*:\s*").*(")/,`$1${e}$2`),await r.replaceFile(this.fnPkgJs,/("(?:appBundleId|appId)"\s*:\s*").*(")/g,`$1com.fc2.blog.famibee.skynovel.${e}$2`)},"window.width":e=>r.replaceFile(this.fnAppJs,/(width\s*: ).*(,)/,`$1${e}$2`),"window.height":e=>r.replaceFile(this.fnAppJs,/(height\s*: ).*(,)/,`$1${e}$2`),"book.version":e=>r.replaceFile(this.fnPkgJs,/("version"\s*:\s*").*(")/,`$1${e}$2`),"book.title":e=>{this.chgTitle(e),r.replaceFile(this.fnPkgJs,/("productName"\s*:\s*").*(")/,`$1${e}$2`)},"book.creator":async e=>{await r.replaceFile(this.fnPkgJs,/("author"\s*:\s*").*(")/,`$1${e}$2`),await r.replaceFile(this.fnPkgJs,/("appCopyright"\s*:\s*").*(")/,`$1(c)${e}$2`),await r.replaceFile(this.fnAppJs,/(companyName\s*:\s*)(['"]).*\2/,`$1"${e}"`)},"book.pub_url":async e=>{await r.replaceFile(this.fnPkgJs,/("homepage"\s*:\s*").*(")/,`$1${e}$2`),await r.replaceFile(this.fnAppJs,/((?:submitURL|homepage)\s*:\s*)(['"]).*\2/g,`$1"${e}"`),await r.replaceFile(this.fnAppJs,/(npm_package_appCopyright \+' )\d+/,"$1"+(new Date).getFullYear())},"book.detail":e=>r.replaceFile(this.fnPkgJs,/("description"\s*:\s*").*(")/,`$1${e}$2`)},this.fnPrj=t+"/doc/prj/",this.fnPrjJs=this.fnPrj+"prj.json",this.fnAppJs=t+"/doc/app.js",this.fnPkgJs=t+"/package.json",a.htmSrc)return void("hatsune"!==this.oCfg.save_ns&&"uc"!==this.oCfg.save_ns||this.open());this.oCfg={...this.oCfg,...s.readJsonSync(this.fnPrjJs,{encoding:"utf8"})},"slideBaseSpan"in this.oCfg.debug&&(delete this.oCfg.debug.slideBaseSpan,this.oCfg.debug.debugLog=!1),n(this.oCfg.book.title),this.ss.setEscape(null!==(u=null===(l=null===(c=this.oCfg)||void 0===c?void 0:c.init)||void 0===l?void 0:l.escape)&&void 0!==u?u:"");const d=e.extensionPath+"/res/setting/";this.localResourceRoots=i.Uri.file(d),s.readFile(d+"index.htm",{encoding:"utf8"},(e,t)=>{e&&console.error("PrjSetting constructor "+e),a.htmSrc=String(t),"hatsune"!==this.oCfg.save_ns&&"uc"!==this.oCfg.save_ns||this.open()})}get cfg(){return this.oCfg}open(){var e;const t=null===(e=i.window.activeTextEditor)||void 0===e?void 0:e.viewColumn;if(this.pnlWV)return this.pnlWV.reveal(t),void this.openSub();const n=this.pnlWV=i.window.createWebviewPanel("SKYNovel-prj_setting","プロジェクト設定",t||i.ViewColumn.One,{enableScripts:!0,localResourceRoots:[this.localResourceRoots]});n.onDidDispose(()=>this.pnlWV=null),n.webview.onDidReceiveMessage(e=>{switch(e.cmd){case"get":n.webview.postMessage({cmd:"res",o:this.oCfg});break;case"info":i.window.showInformationMessage(e.text);break;case"warn":i.window.showWarningMessage(e.text);break;case"openURL":i.env.openExternal(i.Uri.parse(e.url));break;case"input":this.inputProc(e.id,e.val)}},!1),this.openSub()}openSub(){const e=[];r.foldProc(this.fnPrj,()=>{},t=>{e.push(t),this.oCfg.code[t]}),this.pnlWV.webview.html=a.htmSrc.replace(/(href|src)="\.\//g,`$1="${this.pnlWV.webview.asWebviewUri(this.localResourceRoots)}/`).replace(/(.+)"code.\w+"(.+)<span>\w+(.+)\n/,e.map(e=>`$1"code.${e}"$2<span>${e}$3\n`).join(""))}inputProc(e,t){const n=/^[-]?([1-9]\d*|0)$/.test(t)?Number(t):/^(true|false)$/.test(t)?t:String(t).replace(/"/g,"%22"),r=e.indexOf(".");if(r>=0){const t=e.slice(r+1),i=e.slice(0,r);this.oCfg[i][t]=n,"init"===i&&"escape"===t&&this.ss.setEscape(n)}else this.oCfg[e]=n;s.outputJson(this.fnPrjJs,this.oCfg);const i=this.hRep[e];i&&i(n)}}t.PnlPrjSetting=a,a.htmSrc=""},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{c(r.next(e))}catch(e){s(e)}}function o(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),s=n(1),a=n(83),o=n(35),c=n(101);n(102);const l=new a.default({concurrency:100,autostart:!0});function u(e,t){const n=c.detector(e);if(n&&n in o.typeHandlers){const r=o.typeHandlers[n].calculate(e,t);if(void 0!==r)return r.type=n,r}throw new TypeError("unsupported file type: "+n+" (file: "+t+")")}function d(e,t){if(Buffer.isBuffer(e))return u(e);if("string"!=typeof e)throw new TypeError("invalid invocation");const n=s.resolve(e);if("function"!=typeof t){return u(function(e){const t=i.openSync(e,"r"),n=i.fstatSync(t).size,r=Math.min(n,524288),s=Buffer.alloc(r);return i.readSync(t,s,0,r,0),i.closeSync(t),s}(n),n)}l.push(()=>function(e){return r(this,void 0,void 0,(function*(){const t=yield i.promises.open(e,"r"),{size:n}=yield t.stat();if(n<=0)throw new Error("Empty file");const r=Math.min(n,524288),s=Buffer.alloc(r);return yield t.read(s,0,r,0),yield t.close(),s}))}(n).then(e=>process.nextTick(t,null,u(e,n))).catch(t))}e.exports=t=d,t.imageSize=d,t.setConcurrency=e=>{l.concurrency=e},t.types=Object.keys(o.typeHandlers)},function(e,t,n){var r=n(84),i=n(23).EventEmitter;function s(e){if(!(this instanceof s))return new s(e);i.call(this),e=e||{},this.concurrency=e.concurrency||1/0,this.timeout=e.timeout||0,this.autostart=e.autostart||!1,this.results=e.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}e.exports=s,e.exports.default=s,r(s,i);["pop","shift","indexOf","lastIndexOf"].forEach((function(e){s.prototype[e]=function(){return Array.prototype[e].apply(this.jobs,arguments)}})),s.prototype.slice=function(e,t){return this.jobs=this.jobs.slice(e,t),this},s.prototype.reverse=function(){return this.jobs.reverse(),this};function a(){for(var e in this.timers){var t=this.timers[e];delete this.timers[e],clearTimeout(t)}}function o(e){var t=this;function n(e){t.end(e)}this.on("error",n),this.on("end",(function r(i){t.removeListener("error",n),t.removeListener("end",r),e(i,this.results)}))}function c(e){this.session++,this.running=!1,this.emit("end",e)}["push","unshift","splice"].forEach((function(e){s.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this.autostart&&this.start(),t}})),Object.defineProperty(s.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),s.prototype.start=function(e){if(e&&o.call(this,e),this.running=!0,!(this.pending>=this.concurrency))if(0!==this.jobs.length){var t=this,n=this.jobs.shift(),r=!0,i=this.session,s=null,a=!1,l=null,u=n.timeout||this.timeout;u&&(s=setTimeout((function(){a=!0,t.listeners("timeout").length>0?t.emit("timeout",m,n):m()}),u),this.timers[s]=s),this.results&&(l=this.results.length,this.results[l]=null),this.pending++,t.emit("start",n);var d=n(m);d&&d.then&&"function"==typeof d.then&&d.then((function(e){return m(null,e)})).catch((function(e){return m(e||!0)})),this.running&&this.jobs.length>0&&this.start()}else 0===this.pending&&c.call(this);function m(e,o){r&&t.session===i&&(r=!1,t.pending--,null!==s&&(delete t.timers[s],clearTimeout(s)),e?t.emit("error",e,n):!1===a&&(null!==l&&(t.results[l]=Array.prototype.slice.call(arguments,1)),t.emit("success",o,n)),t.session===i&&(0===t.pending&&0===t.jobs.length?c.call(t):t.running&&t.start()))}},s.prototype.stop=function(){this.running=!1},s.prototype.end=function(e){a.call(this),this.jobs.length=0,this.pending=0,c.call(this,e)}},function(e,t,n){try{var r=n(19);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(85)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BMP={validate:e=>"BM"===e.toString("ascii",0,2),calculate:e=>({height:Math.abs(e.readInt32LE(22)),width:e.readUInt32LE(18)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36);t.CUR={validate:e=>0===e.readUInt16LE(0)&&2===e.readUInt16LE(2),calculate:e=>r.ICO.calculate(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DDS={validate:e=>542327876===e.readUInt32LE(0),calculate:e=>({height:e.readUInt32LE(12),width:e.readUInt32LE(16)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=/^GIF8[79]a/;t.GIF={validate(e){const t=e.toString("ascii",0,6);return r.test(t)},calculate:e=>({height:e.readUInt16LE(8),width:e.readUInt16LE(6)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function i(e,t){const n=t+4;return[e.toString("ascii",t,n),e.readUInt32BE(n)]}function s(e){const t=r[e];return{width:t,height:t,type:e}}t.ICNS={validate:e=>"icns"===e.toString("ascii",0,4),calculate(e){const t=e.length,n=e.readUInt32BE(4);let r=8,a=i(e,r),o=s(a[0]);if(r+=a[1],r===n)return o;const c={height:o.height,images:[o],width:o.width};for(;r<n&&r<t;)a=i(e,r),o=s(a[0]),r+=a[1],c.images.push(o);return c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.J2C={validate:e=>"ff4fff51"===e.toString("hex",0,4),calculate:e=>({height:e.readUInt32BE(12),width:e.readUInt32BE(8)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="66747970",i="6a703268",s="6a502020",a="72726571",o=e=>({height:e.readUInt32BE(4),width:e.readUInt32BE(8)});t.JP2={validate(e){const t=e.toString("hex",4,8),n=e.readUInt32BE(0);if(t!==s||n<1)return!1;const i=n+4,a=e.readUInt32BE(n);return e.slice(i,i+a).toString("hex",0,4)===r},calculate(e){const t=e.readUInt32BE(0);let n=t+4+e.readUInt16BE(t+2);switch(e.toString("hex",n,n+4)){case a:return n=n+4+4+(e=>{const t=e.readUInt8(0);let n=1+2*t;n=n+2+e.readUInt16BE(n)*(2+t);return n+2+e.readUInt16BE(n)*(16+t)})(e.slice(n+4)),o(e.slice(n+8,n+24));case i:return o(e.slice(n+8,n+24));default:throw new TypeError("Unsupported header found: "+e.toString("ascii",n,n+4))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(37);function i(e){return"45786966"===e.toString("hex",2,6)}function s(e,t){return{height:e.readUInt16BE(t),width:e.readUInt16BE(t+2)}}function a(e,t){const n=e.slice(2,t),i=n.toString("hex",6,8),s="4d4d"===i;if(s||"4949"===i)return function(e,t){const n=r.readUInt(e,16,14,t);for(let i=0;i<n;i++){const n=16+12*i,s=n+12;if(n>e.length)return;const a=e.slice(n,s);if(274===r.readUInt(a,16,0,t)){if(3!==r.readUInt(a,16,2,t))return;if(1!==r.readUInt(a,32,4,t))return;return r.readUInt(a,16,8,t)}}}(n,s)}function o(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==e[t])throw new TypeError("Invalid JPG, marker table corrupted")}t.JPG={validate:e=>"ffd8"===e.toString("hex",0,2),calculate(e){let t,n;for(e=e.slice(4);e.length;){const r=e.readUInt16BE(0);if(i(e)&&(t=a(e,r)),o(e,r),n=e[r+1],192===n||193===n||194===n){const n=s(e,r+5);return t?{height:n.height,orientation:t,width:n.width}:n}e=e.slice(r+2)}throw new TypeError("Invalid JPG, no size found")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.KTX={validate:e=>"KTX 11"===e.toString("ascii",1,7),calculate:e=>({height:e.readUInt32LE(40),width:e.readUInt32LE(36)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PNG={validate(e){if("PNG\r\n\n"===e.toString("ascii",1,8)){let t=e.toString("ascii",12,16);if("CgBI"===t&&(t=e.toString("ascii",28,32)),"IHDR"!==t)throw new TypeError("Invalid PNG");return!0}return!1},calculate:e=>"CgBI"===e.toString("ascii",12,16)?{height:e.readUInt32BE(36),width:e.readUInt32BE(32)}:{height:e.readUInt32BE(20),width:e.readUInt32BE(16)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},i=Object.keys(r),s={default:e=>{let t=[];for(;e.length>0;){const n=e.shift();if("#"!==n[0]){t=n.split(" ");break}}if(2===t.length)return{height:parseInt(t[1],10),width:parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{const t={};for(;e.length>0;){const n=e.shift();if(n.length>16||n.charCodeAt(0)>128)continue;const[r,i]=n.split(" ");if(r&&i&&(t[r.toLowerCase()]=parseInt(i,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}};t.PNM={validate(e){const t=e.toString("ascii",0,2);return i.includes(t)},calculate(e){const t=e.toString("ascii",0,2),n=r[t],i=e.toString("ascii",3).split(/[\r\n]+/);return(s[n]||s.default)(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PSD={validate:e=>"8BPS"===e.toString("ascii",0,4),calculate:e=>({height:e.readUInt32BE(14),width:e.readUInt32BE(18)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,i={height:/\sheight=(['"])([^%]+?)\1/,root:r,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},s={cm:96/2.54,em:16,ex:8,m:96/2.54*100,mm:96/2.54/10,pc:96/72/12,pt:96/72};function a(e){const t=/([0-9.]+)([a-z]*)/.exec(e);if(t)return Math.round(parseFloat(t[1])*(s[t[2]]||1))}function o(e){const t=e.split(" ");return{height:a(t[3]),width:a(t[2])}}t.SVG={validate(e){const t=String(e);return r.test(t)},calculate(e){const t=e.toString("utf8").match(i.root);if(t){const e=function(e){const t=e.match(i.width),n=e.match(i.height),r=e.match(i.viewbox);return{height:n&&a(n[2]),viewbox:r&&o(r[2]),width:t&&a(t[2])}}(t[0]);if(e.width&&e.height)return function(e){return{height:e.height,width:e.width}}(e);if(e.viewbox)return function(e,t){const n=t.width/t.height;return e.width?{height:Math.floor(e.width/n),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*n)}:{height:t.height,width:t.width}}(e,e.viewbox)}throw new TypeError("Invalid SVG")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(37);function s(e,t){const n=i.readUInt(e,16,8,t);return(i.readUInt(e,16,10,t)<<16)+n}function a(e){if(e.length>24)return e.slice(12)}const o=["49492a00","4d4d002a"];t.TIFF={validate:e=>o.includes(e.toString("hex",0,4)),calculate(e,t){if(!t)throw new TypeError("Tiff doesn't support buffer");const n="BE"===function(e){const t=e.toString("ascii",0,2);return"II"===t?"LE":"MM"===t?"BE":void 0}(e),o=function(e,t){const n={};let r=e;for(;r&&r.length;){const e=i.readUInt(r,16,0,t),o=i.readUInt(r,16,2,t),c=i.readUInt(r,32,4,t);if(0===e)break;1!==c||3!==o&&4!==o||(n[e]=s(r,t)),r=a(r)}return n}(function(e,t,n){const s=i.readUInt(e,32,4,n);let a=1024;const o=r.statSync(t).size;s+a>o&&(a=o-s-10);const c=Buffer.alloc(a),l=r.openSync(t,"r");return r.readSync(l,c,0,a,s),c.slice(2)}(e,t,n),n),c=o[256],l=o[257];if(!c||!l)throw new TypeError("Invalid Tiff. Missing tags");return{height:l,width:c}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEBP={validate(e){const t="RIFF"===e.toString("ascii",0,4),n="WEBP"===e.toString("ascii",8,12),r="VP8"===e.toString("ascii",12,15);return t&&n&&r},calculate(e){const t=e.toString("ascii",12,16);if(e=e.slice(20,30),"VP8X"===t){const t=e[0],n=0==(1&t);if(0==(192&t)&&n)return function(e){return{height:1+e.readUIntLE(7,3),width:1+e.readUIntLE(4,3)}}(e);throw new TypeError("Invalid WebP")}if("VP8 "===t&&47!==e[0])return function(e){return{height:16383&e.readInt16LE(8),width:16383&e.readInt16LE(6)}}(e);const n=e.toString("hex",3,6);if("VP8L"===t&&"9d012a"!==n)return function(e){return{height:1+((15&e[4])<<10|e[3]<<2|(192&e[2])>>6),width:1+((63&e[2])<<8|e[1])}}(e);throw new TypeError("Invalid WebP")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35),i=Object.keys(r.typeHandlers),s={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};t.detector=function(e){const t=e[0];if(t in s){const n=s[t];if(r.typeHandlers[n].validate(e))return n}return i.find(t=>r.typeHandlers[t].validate(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7);if(!("promises"in r)){class e{constructor(e){this.fd=e}stat(){return new Promise((e,t)=>{r.fstat(this.fd,(n,r)=>{n?t(n):e(r)})})}read(e,t,n,i){return new Promise((s,a)=>{r.read(this.fd,e,t,n,i,e=>{e?a(e):s()})})}close(){return new Promise((e,t)=>{r.close(this.fd,n=>{n?t(n):e()})})}}Object.defineProperty(r,"promises",{value:{open:(t,n)=>new Promise((i,s)=>{r.open(t,n,(t,n)=>{t?s(t):i(new e(n))})})},writable:!1})}},function(e,t,n){var r;e.exports=(r=n(0),n(18),n(104),n(105),n(13),n(14),n(25),n(38),n(106),n(39),n(107),n(108),n(109),n(26),n(110),n(10),n(2),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),r)},function(e,t,n){var r;e.exports=(r=n(0),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),r.lib.WordArray)},function(e,t,n){var r;e.exports=(r=n(0),function(){var e=r,t=e.lib.WordArray,n=e.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var s=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],s=0;s<n;s+=2){var a=i(t[s>>>2]>>>16-s%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var n=e.length,r=[],s=0;s<n;s++)r[s>>>1]|=i(e.charCodeAt(s)<<16-s%2*16);return t.create(r,2*n)}}}(),r.enc.Utf16)},function(e,t,n){var r,i,s,a,o,c;e.exports=(c=n(0),n(38),i=(r=c).lib.WordArray,s=r.algo,a=s.SHA256,o=s.SHA224=a.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=a._createHelper(o),r.HmacSHA224=a._createHmacHelper(o),c.SHA224)},function(e,t,n){var r,i,s,a,o,c,l,u;e.exports=(u=n(0),n(18),n(39),i=(r=u).x64,s=i.Word,a=i.WordArray,o=r.algo,c=o.SHA512,l=o.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l),u.SHA384)},function(e,t,n){var r;e.exports=(r=n(0),n(18),function(e){var t=r,n=t.lib,i=n.WordArray,s=n.Hasher,a=t.x64.Word,o=t.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,s=0;s<24;s++){for(var o=0,d=0,m=0;m<7;m++){if(1&i){var h=(1<<m)-1;h<32?d^=1<<h:o^=1<<h-32}128&i?i=i<<1^113:i<<=1}u[s]=a.create(o,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var m=o.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var s=e[t+2*i],a=e[t+2*i+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(T=n[i]).high^=a,T.low^=s}for(var o=0;o<24;o++){for(var m=0;m<5;m++){for(var h=0,p=0,f=0;f<5;f++)h^=(T=n[m+5*f]).high,p^=T.low;var g=d[m];g.high=h,g.low=p}for(m=0;m<5;m++){var y=d[(m+4)%5],v=d[(m+1)%5],b=v.high,S=v.low;for(h=y.high^(b<<1|S>>>31),p=y.low^(S<<1|b>>>31),f=0;f<5;f++)(T=n[m+5*f]).high^=h,T.low^=p}for(var _=1;_<25;_++){var w=(T=n[_]).high,x=T.low,k=c[_];k<32?(h=w<<k|x>>>32-k,p=x<<k|w>>>32-k):(h=x<<k-32|w>>>64-k,p=w<<k-32|x>>>64-k);var E=d[l[_]];E.high=h,E.low=p}var P=d[0],q=n[0];for(P.high=q.high,P.low=q.low,m=0;m<5;m++)for(f=0;f<5;f++){var T=n[_=m+5*f],$=d[_],R=d[(m+1)%5+5*f],D=d[(m+2)%5+5*f];T.high=$.high^~R.high&D.high,T.low=$.low^~R.low&D.low}T=n[0];var C=u[o];T.high^=C.high,T.low^=C.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),s=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/s)*s>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,o=this.cfg.outputLength/8,c=o/8,l=[],u=0;u<c;u++){var d=a[u],m=d.high,h=d.low;m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),l.push(h),l.push(m)}return new i.init(l,o)},clone:function(){for(var e=s.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=s._createHelper(m),t.HmacSHA3=s._createHmacHelper(m)}(Math),r.SHA3)},function(e,t,n){var r;e.exports=(r=n(0),
/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(e){var t=r,n=t.lib,i=n.WordArray,s=n.Hasher,a=t.algo,o=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=s.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s,a,h,S,_,w,x,k,E,P,q,T=this._hash.words,$=d.words,R=m.words,D=o.words,C=c.words,B=l.words,N=u.words;for(w=s=T[0],x=a=T[1],k=h=T[2],E=S=T[3],P=_=T[4],n=0;n<80;n+=1)q=s+e[t+D[n]]|0,q+=n<16?p(a,h,S)+$[0]:n<32?f(a,h,S)+$[1]:n<48?g(a,h,S)+$[2]:n<64?y(a,h,S)+$[3]:v(a,h,S)+$[4],q=(q=b(q|=0,B[n]))+_|0,s=_,_=S,S=b(h,10),h=a,a=q,q=w+e[t+C[n]]|0,q+=n<16?v(x,k,E)+R[0]:n<32?y(x,k,E)+R[1]:n<48?g(x,k,E)+R[2]:n<64?f(x,k,E)+R[3]:p(x,k,E)+R[4],q=(q=b(q|=0,N[n]))+P|0,w=P,P=E,E=b(k,10),k=x,x=q;q=T[1]+h+E|0,T[1]=T[2]+S+P|0,T[2]=T[3]+_+w|0,T[3]=T[4]+s+x|0,T[4]=T[0]+a+k|0,T[0]=q},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,s=i.words,a=0;a<5;a++){var o=s[a];s[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return i},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function f(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function y(e,t,n){return e&n|t&~n}function v(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}t.RIPEMD160=s._createHelper(h),t.HmacRIPEMD160=s._createHmacHelper(h)}(Math),r.RIPEMD160)},function(e,t,n){var r,i,s,a,o,c,l,u,d;e.exports=(d=n(0),n(25),n(26),i=(r=d).lib,s=i.Base,a=i.WordArray,o=r.algo,c=o.SHA1,l=o.HMAC,u=o.PBKDF2=s.extend({cfg:s.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=l.create(n.hasher,e),i=a.create(),s=a.create([1]),o=i.words,c=s.words,u=n.keySize,d=n.iterations;o.length<u;){var m=r.update(t).finalize(s);r.reset();for(var h=m.words,p=h.length,f=m,g=1;g<d;g++){f=r.finalize(f),r.reset();for(var y=f.words,v=0;v<p;v++)h[v]^=y[v]}i.concat(m),c[0]++}return i.sigBytes=4*u,i}}),r.PBKDF2=function(e,t,n){return u.create(n).compute(e,t)},d.PBKDF2)},function(e,t,n){var r;e.exports=(r=n(0),n(2),r.mode.CFB=function(){var e=r.lib.BlockCipherMode.extend();function t(e,t,n,r){var i,s=this._iv;s?(i=s.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i,r),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,s=e.slice(n,n+i);t.call(this,e,n,i,r),this._prevBlock=s}}),e}(),r.mode.CFB)},function(e,t,n){var r,i,s;e.exports=(s=n(0),n(2),s.mode.CTR=(r=s.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,s=this._counter;i&&(s=this._counter=i.slice(0),this._iv=void 0);var a=s.slice(0);n.encryptBlock(a,0),s[r-1]=s[r-1]+1|0;for(var o=0;o<r;o++)e[t+o]^=a[o]}}),r.Decryptor=i,r),s.mode.CTR)},function(e,t,n){var r;e.exports=(r=n(0),n(2),
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
r.mode.CTRGladman=function(){var e=r.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var n=e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,s=this._iv,a=this._counter;s&&(a=this._counter=s.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(a);var o=a.slice(0);r.encryptBlock(o,0);for(var c=0;c<i;c++)e[n+c]^=o[c]}});return e.Decryptor=n,e}(),r.mode.CTRGladman)},function(e,t,n){var r,i,s;e.exports=(s=n(0),n(2),s.mode.OFB=(r=s.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,s=this._keystream;i&&(s=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(s,0);for(var a=0;a<r;a++)e[t+a]^=s[a]}}),r.Decryptor=i,r),s.mode.OFB)},function(e,t,n){var r,i;e.exports=(i=n(0),n(2),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),i.mode.ECB)},function(e,t,n){var r;e.exports=(r=n(0),n(2),r.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,s=n+i-1;e.clamp(),e.words[s>>>2]|=i<<24-s%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Ansix923)},function(e,t,n){var r;e.exports=(r=n(0),n(2),r.pad.Iso10126={pad:function(e,t){var n=4*t,i=n-e.sigBytes%n;e.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Iso10126)},function(e,t,n){var r;e.exports=(r=n(0),n(2),r.pad.Iso97971={pad:function(e,t){e.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(e,t)},unpad:function(e){r.pad.ZeroPadding.unpad(e),e.sigBytes--}},r.pad.Iso97971)},function(e,t,n){var r;e.exports=(r=n(0),n(2),r.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},r.pad.ZeroPadding)},function(e,t,n){var r;e.exports=(r=n(0),n(2),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},function(e,t,n){var r,i,s,a;e.exports=(a=n(0),n(2),i=(r=a).lib.CipherParams,s=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(s)},parse:function(e){var t=s.parse(e);return i.create({ciphertext:t})}},a.format.Hex)},function(e,t,n){var r;e.exports=(r=n(0),n(13),n(14),n(10),n(2),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],s=[],a=[],o=[],c=[],l=[],u=[],d=[],m=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,s[p]=n;var f=e[n],g=e[f],y=e[g],v=257*e[p]^16843008*p;a[n]=v<<24|v>>>8,o[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,l[n]=v,v=16843009*y^65537*g^257*f^16843008*n,u[p]=v<<24|v>>>8,d[p]=v<<16|v>>>16,m[p]=v<<8|v>>>24,h[p]=v,n?(n=f^e[e[e[y^f]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],f=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),s=this._keySchedule=[],a=0;a<r;a++)a<n?s[a]=t[a]:(l=s[a-1],a%n?n>6&&a%n==4&&(l=i[l>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l]):(l=i[(l=l<<8|l>>>24)>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l],l^=p[a/n|0]<<24),s[a]=s[a-n]^l);for(var o=this._invKeySchedule=[],c=0;c<r;c++){if(a=r-c,c%4)var l=s[a];else l=s[a-4];o[c]=c<4||a<=4?l:u[i[l>>>24]]^d[i[l>>>16&255]]^m[i[l>>>8&255]]^h[i[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,c,l,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,m,h,s),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,a,o){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],m=e[t+3]^n[3],h=4,p=1;p<c;p++){var f=r[l>>>24]^i[u>>>16&255]^s[d>>>8&255]^a[255&m]^n[h++],g=r[u>>>24]^i[d>>>16&255]^s[m>>>8&255]^a[255&l]^n[h++],y=r[d>>>24]^i[m>>>16&255]^s[l>>>8&255]^a[255&u]^n[h++],v=r[m>>>24]^i[l>>>16&255]^s[u>>>8&255]^a[255&d]^n[h++];l=f,u=g,d=y,m=v}f=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[d>>>8&255]<<8|o[255&m])^n[h++],g=(o[u>>>24]<<24|o[d>>>16&255]<<16|o[m>>>8&255]<<8|o[255&l])^n[h++],y=(o[d>>>24]<<24|o[m>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^n[h++],v=(o[m>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&d])^n[h++],e[t]=f,e[t+1]=g,e[t+2]=y,e[t+3]=v},keySize:8});e.AES=t._createHelper(f)}(),r.AES)},function(e,t,n){var r;e.exports=(r=n(0),n(13),n(14),n(10),n(2),function(){var e=r,t=e.lib,n=t.WordArray,i=t.BlockCipher,s=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],s=0;s<16;s++){var l=i[s]=[],u=c[s];for(n=0;n<24;n++)l[n/6|0]|=t[(o[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(o[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],s=this._lBlock,a=this._rBlock,o=0,c=0;c<8;c++)o|=l[c][((a^i[c])&u[c])>>>0];this._lBlock=a,this._rBlock=s^o}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function m(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=i._createHelper(d);var p=s.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(n.create(t)),this._des2=d.createEncryptor(n.create(r)),this._des3=d.createEncryptor(n.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),r.TripleDES)},function(e,t,n){var r;e.exports=(r=n(0),n(13),n(14),n(10),n(2),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var s=0;i<256;i++){var a=i%n,o=t[a>>>2]>>>24-a%4*8&255;s=(s+r[i]+o)%256;var c=r[i];r[i]=r[s],r[s]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[n],e[n]=s,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}e.RC4=t._createHelper(i);var a=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)s.call(this)}});e.RC4Drop=t._createHelper(a)}(),r.RC4)},function(e,t,n){var r;e.exports=(r=n(0),n(13),n(14),n(10),n(2),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=[],s=[],a=[],o=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var s=t.words,a=s[0],o=s[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),d=l>>>16|4294901760&u,m=u<<16|65535&l;for(i[0]^=l,i[1]^=d,i[2]^=u,i[3]^=m,i[4]^=l,i[5]^=d,i[6]^=u,i[7]^=m,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,o=r>>>16,c=((i*i>>>17)+i*o>>>15)+o*o,l=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(o)}(),r.Rabbit)},function(e,t,n){var r;e.exports=(r=n(0),n(13),n(14),n(10),n(2),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=[],s=[],a=[],o=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var s=t.words,a=s[0],o=s[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),d=l>>>16|4294901760&u,m=u<<16|65535&l;for(r[0]^=l,r[1]^=d,r[2]^=u,r[3]^=m,r[4]^=l,r[5]^=d,r[6]^=u,r[7]^=m,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,o=r>>>16,c=((i*i>>>17)+i*o>>>15)+o*o,l=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(o)}(),r.RabbitLegacy)},function(e,t,n){var r;r=function(e){e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();e.table=t,e.bstr=function(e,n){for(var r=-1^n,i=e.length-1,s=0;s<i;)r=(r=r>>>8^t[255&(r^e.charCodeAt(s++))])>>>8^t[255&(r^e.charCodeAt(s++))];return s===i&&(r=r>>>8^t[255&(r^e.charCodeAt(s))]),-1^r},e.buf=function(e,n){if(e.length>1e4)return function(e,n){for(var r=-1^n,i=e.length-7,s=0;s<i;)r=(r=(r=(r=(r=(r=(r=(r=r>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])];for(;s<i+7;)r=r>>>8^t[255&(r^e[s++])];return-1^r}(e,n);for(var r=-1^n,i=e.length-3,s=0;s<i;)r=(r=(r=(r=r>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])])>>>8^t[255&(r^e[s++])];for(;s<i+3;)r=r>>>8^t[255&(r^e[s++])];return-1^r},e.str=function(e,n){for(var r,i,s=-1^n,a=0,o=e.length;a<o;)(r=e.charCodeAt(a++))<128?s=s>>>8^t[255&(s^r)]:r<2048?s=(s=s>>>8^t[255&(s^(192|r>>6&31))])>>>8^t[255&(s^(128|63&r))]:r>=55296&&r<57344?(r=64+(1023&r),i=1023&e.charCodeAt(a++),s=(s=(s=(s=s>>>8^t[255&(s^(240|r>>8&7))])>>>8^t[255&(s^(128|r>>2&63))])>>>8^t[255&(s^(128|i>>6&15|(3&r)<<4))])>>>8^t[255&(s^(128|63&i))]):s=(s=(s=s>>>8^t[255&(s^(224|r>>12&15))])>>>8^t[255&(s^(128|r>>6&63))])>>>8^t[255&(s^(128|63&r))];return-1^s}},"undefined"==typeof DO_NOT_EXPORT_CRC?r(t):r({})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeDPDoc=void 0;const r=n(8),i=n(6);t.TreeDPDoc=class{constructor(e){this.ctx=e,this.aTiRoot=[new i.TreeItem("開発者向け情報"),new i.TreeItem("タグリファレンス"),new i.TreeItem("マクロ・プラグインリファレンス"),new i.TreeItem("機能ギャラリー"),new i.TreeItem("テンプレート プロジェクト",i.TreeItemCollapsibleState.Collapsed),new i.TreeItem("famibee 連絡先",i.TreeItemCollapsibleState.Collapsed),new i.TreeItem("オススメVSCode拡張機能",i.TreeItemCollapsibleState.Collapsed)],this.aTiTemp=[new i.TreeItem("横書き「初音館にて」"),new i.TreeItem("縦書き「桜の樹の下には」")],this.aTiFamibee=[new i.TreeItem("famibee blog"),new i.TreeItem("famibee Mail"),new i.TreeItem("famibee Twitter")],this.aTiVSCodeEx=[new i.TreeItem("日本語化"),new i.TreeItem("Material Icon Theme"),new i.TreeItem("Bookmarks"),new i.TreeItem("HTML Preview"),new i.TreeItem("HTMLHint"),new i.TreeItem("Cordova Tools"),new i.TreeItem("Debugger for Chrome"),new i.TreeItem("glTF Tools")],this.getTreeItem=e=>e,this.aTiRoot.forEach(e=>{e.iconPath=e.collapsibleState===i.TreeItemCollapsibleState.None?r.oIcon("document"):i.ThemeIcon.Folder,e.contextValue=e.label}),this.aTiTemp.forEach(e=>{e.iconPath=r.oIcon("baggage"),e.contextValue=e.label}),this.aTiFamibee.forEach(e=>{e.iconPath=r.oIcon("document"),e.contextValue=e.label}),this.aTiFamibee[1].iconPath=r.oIcon("mail"),this.aTiFamibee[2].iconPath=r.oIcon("twitter"),this.aTiVSCodeEx.forEach(e=>{e.iconPath=r.oIcon("gear"),e.contextValue=e.label}),e.subscriptions.push(i.commands.registerCommand("skynovel.opDev",()=>i.env.openExternal(i.Uri.parse("https://famibee.github.io/SKYNovel/dev.htm")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opTag",()=>i.env.openExternal(i.Uri.parse("https://famibee.github.io/SKYNovel/tag.htm")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opMacroPlg",()=>i.env.openExternal(i.Uri.parse("https://famibee.github.io/SKYNovel/macro_plg.htm")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opGallery",()=>i.env.openExternal(i.Uri.parse("https://famibee.github.io/SKYNovel_gallery/")))),e.subscriptions.push(i.commands.registerCommand("skynovel.dlTmpYoko",()=>i.env.openExternal(i.Uri.parse("https://github.com/famibee/SKYNovel_hatsune/archive/master.zip")))),e.subscriptions.push(i.commands.registerCommand("skynovel.dlTmpTate",()=>i.env.openExternal(i.Uri.parse("https://github.com/famibee/SKYNovel_uc/archive/master.zip")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opFamibeeBlog",()=>i.env.openExternal(i.Uri.parse("https://famibee.blog.fc2.com/")))),e.subscriptions.push(i.commands.registerCommand("skynovel.mail2famibee",()=>i.env.openExternal(i.Uri.parse("mailto:famibee@gmail.com")))),e.subscriptions.push(i.commands.registerCommand("skynovel.tw2famibee",()=>i.env.openExternal(i.Uri.parse("https://twitter.com/famibee")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opVSCodeExJa",()=>i.env.openExternal(i.Uri.parse("https://marketplace.visualstudio.com/items?itemName=MS-CEINTL.vscode-language-pack-ja")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opVSCodeExIcon",()=>i.env.openExternal(i.Uri.parse("https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opVSCodeExBookmarks",()=>i.env.openExternal(i.Uri.parse("https://marketplace.visualstudio.com/items?itemName=alefragnani.Bookmarks")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opVSCodeExLiveHTMLPrev",()=>i.env.openExternal(i.Uri.parse("https://marketplace.visualstudio.com/items?itemName=tht13.html-preview-vscode")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opVSCodeExHTMLHint",()=>i.env.openExternal(i.Uri.parse("https://marketplace.visualstudio.com/items?itemName=mkaufman.HTMLHint")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opVSCodeExCordovaTools",()=>i.env.openExternal(i.Uri.parse("https://marketplace.visualstudio.com/items?itemName=msjsdiag.cordova-tools")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opVSCodeExDbg4Chrome",()=>i.env.openExternal(i.Uri.parse("https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome")))),e.subscriptions.push(i.commands.registerCommand("skynovel.opVSCodeExglTFTools",()=>i.env.openExternal(i.Uri.parse("https://marketplace.visualstudio.com/items?itemName=cesium.gltf-vscode"))))}getChildren(e){if(!e)return Promise.resolve(this.aTiRoot);switch(e.label){case"テンプレート プロジェクト":return Promise.resolve(this.aTiTemp);case"famibee 連絡先":return Promise.resolve(this.aTiFamibee);case"オススメVSCode拡張機能":return Promise.resolve(this.aTiVSCodeEx)}return Promise.resolve([])}}},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("https")},function(e,t,n){"use strict";n.r(t),n.d(t,"v1",(function(){return h})),n.d(t,"v3",(function(){return f})),n.d(t,"v4",(function(){return g})),n.d(t,"v5",(function(){return y}));var r=n(11),i=n.n(r);const s=new Uint8Array(16);function a(){return i.a.randomFillSync(s)}const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).substr(1));var c=function(e,t){const n=t||0,r=o;return(r[e[n+0]]+r[e[n+1]]+r[e[n+2]]+r[e[n+3]]+"-"+r[e[n+4]]+r[e[n+5]]+"-"+r[e[n+6]]+r[e[n+7]]+"-"+r[e[n+8]]+r[e[n+9]]+"-"+r[e[n+10]]+r[e[n+11]]+r[e[n+12]]+r[e[n+13]]+r[e[n+14]]+r[e[n+15]]).toLowerCase()};let l,u,d=0,m=0;var h=function(e,t,n){let r=t&&n||0;const i=t||[];let s=(e=e||{}).node||l,o=void 0!==e.clockseq?e.clockseq:u;if(null==s||null==o){const t=e.random||(e.rng||a)();null==s&&(s=l=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==o&&(o=u=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:m+1;const f=h-d+(p-m)/1e4;if(f<0&&void 0===e.clockseq&&(o=o+1&16383),(f<0||h>d)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=h,m=p,u=o,h+=122192928e5;const g=(1e4*(268435455&h)+p)%4294967296;i[r++]=g>>>24&255,i[r++]=g>>>16&255,i[r++]=g>>>8&255,i[r++]=255&g;const y=h/4294967296*1e4&268435455;i[r++]=y>>>8&255,i[r++]=255&y,i[r++]=y>>>24&15|16,i[r++]=y>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(let e=0;e<6;++e)i[r+e]=s[e];return t||c(i)};var p=function(e,t,n){function r(e,r,i,s){const a=i&&s||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=function(e){const t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(r)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(r)||16!==r.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const o=n(r.concat(e));if(o[6]=15&o[6]|t,o[8]=63&o[8]|128,i)for(let e=0;e<16;++e)i[a+e]=o[e];return i||c(o)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};var f=p("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.a.createHash("md5").update(e).digest()}));var g=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);const r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){const e=n||0;for(let n=0;n<16;++n)t[e+n]=r[n];return t}return c(r)};var y=p("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.a.createHash("sha1").update(e).digest()}))}])}));