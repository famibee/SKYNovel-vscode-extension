(()=>{var e,t={1243:(e,t)=>{const r={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function n(e){return function(...t){return t.length&&(e=e.replace(/\{(\d)\}/g,((e,r)=>t[r]||""))),new Error("ADM-ZIP: "+e)}}for(const e of Object.keys(r))t[e]=n(r[e])},1283:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:t(e)};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})),r};var t=Object.getPrototypeOf||function(e){return e.__proto__}},1708:e=>{"use strict";e.exports=require("node:process")},2203:e=>{"use strict";e.exports=require("stream")},2909:(e,t,r)=>{let n;try{n=r(63735)}catch(e){n=r(79896)}const i=r(41236),{stringify:o,stripBom:s}=r(11144),c={readFile:i.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,o=!("throws"in t)||t.throws;let c,a=await i.fromCallback(r.readFile)(e,t);a=s(a);try{c=JSON.parse(a,t?t.reviver:null)}catch(t){if(o)throw t.message=`${e}: ${t.message}`,t;return null}return c})),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,i=!("throws"in t)||t.throws;try{let n=r.readFileSync(e,t);return n=s(n),JSON.parse(n,t.reviver)}catch(t){if(i)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:i.fromPromise((async function(e,t,r={}){const s=r.fs||n,c=o(t,r);await i.fromCallback(s.writeFile)(e,c,r)})),writeFileSync:function(e,t,r={}){const i=r.fs||n,s=o(t,r);return i.writeFileSync(e,s,r)}};e.exports=c},4423:(e,t,r)=>{"use strict";const n=r(41236).fromPromise;e.exports={copy:n(r(4994)),copySync:r(23876)}},4573:e=>{"use strict";e.exports=require("node:buffer")},4994:(e,t,r)=>{"use strict";const n=r(98737),i=r(16928),{mkdirs:o}=r(63798),{pathExists:s}=r(29288),{utimesMillis:c}=r(47211),a=r(66462),{asyncIteratorConcurrentProcess:f}=r(26322);async function u(e,t,r){return!r.filter||r.filter(e,t)}async function l(e,t,r,o){const s=o.dereference?n.stat:n.lstat,c=await s(t);if(c.isDirectory())return async function(e,t,r,o,s){t||await n.mkdir(o),await f(await n.opendir(r),(async e=>{const t=i.join(r,e.name),n=i.join(o,e.name);if(await u(t,n,s)){const{destStat:e}=await a.checkPaths(t,n,"copy",s);await l(e,t,n,s)}})),t||await n.chmod(o,e.mode)}(c,e,t,r,o);if(c.isFile()||c.isCharacterDevice()||c.isBlockDevice())return async function(e,t,r,i,o){if(!t)return d(e,r,i,o);if(o.overwrite)return await n.unlink(i),d(e,r,i,o);if(o.errorOnExist)throw new Error(`'${i}' already exists`)}(c,e,t,r,o);if(c.isSymbolicLink())return async function(e,t,r,o){let s=await n.readlink(t);if(o.dereference&&(s=i.resolve(process.cwd(),s)),!e)return n.symlink(s,r);let c=null;try{c=await n.readlink(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlink(s,r);throw e}if(o.dereference&&(c=i.resolve(process.cwd(),c)),a.isSrcSubdir(s,c))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${c}'.`);if(a.isSrcSubdir(c,s))throw new Error(`Cannot overwrite '${c}' with '${s}'.`);return await n.unlink(r),n.symlink(s,r)}(e,t,r,o);if(c.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(c.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}async function d(e,t,r,i){if(await n.copyFile(t,r),i.preserveTimestamps){128&e.mode||await function(e,t){return n.chmod(e,128|t)}(r,e.mode);const i=await n.stat(t);await c(r,i.atime,i.mtime)}return n.chmod(r,e.mode)}e.exports=async function(e,t,r={}){"function"==typeof r&&(r={filter:r}),r.clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:n,destStat:c}=await a.checkPaths(e,t,"copy",r);if(await a.checkParentPaths(e,n,t,"copy"),!await u(e,t,r))return;const f=i.dirname(t);await s(f)||await o(f),await l(c,e,t,r)}},5903:(e,t,r)=>{"use strict";r.d(t,{DH:()=>h,Ex:()=>u,FC:()=>c,Fv:()=>y,Hd:()=>l,J4:()=>f,Ni:()=>D,Wh:()=>o,Wp:()=>N,Xp:()=>d,_A:()=>s,_Z:()=>v,aV:()=>m,ad:()=>S,dd:()=>I,fR:()=>g,fv:()=>w,hF:()=>a,px:()=>p});var n=r(76760),i=r(21605);function o(e){return parseInt(String(e),10)}function s(e){const t=parseInt(String(e),10);return t<0?-t:t}const c=/\.ss?n$/,a={scheme:"file",language:"skynovel"};function f(e,t,r){return e.replaceAll("${webview.cspSource}",t.cspSource).replaceAll(/(href|src)="\.\//g,`$1="${String(t.asWebviewUri(r))}/`)}const u="win32"===process.platform,l="darwin"===process.platform,d=":SKYNovel:";function h(e){return e.replace(/(?:\/\w:)?/,"")}function p(e){return decodeURIComponent(e.replace(/file:\/\/(\/\w%3A)?/,""))}function m(e){return e.slice(7)}const y={ファイル重複:{mes:"プロジェクト内でファイル【$】が重複しています。フォルダを縦断検索するため許されません",sev:"W"},ファイル名合成文字:{mes:"ファイル名は濁点(゛)・半濁点(゜)など合成文字を避けて下さい。トラブルの元です",sev:"W"},文字コード異常:{mes:"文字コードが異常（$）です。UTF8 か ASCII にして下さい",sev:"E"}},E=/^(_notes|Icon\r|\.[^/]+|[^/]+\.(db|ini|git))$/;function w(e,t){for(const r of(0,i.readdirSync)(e,{withFileTypes:!0})){const i=r.name.normalize("NFC");if(E.test(i))continue;const o=(0,n.resolve)(e,i);r.isDirectory()?w(o,t):t(o)}}function S(e,t,r){for(const o of(0,i.readdirSync)(e,{withFileTypes:!0})){const i=o.name.normalize("NFC");E.test(i)||(o.isDirectory()?r(i):t((0,n.resolve)(e,i),i))}}function g(e,t,r,n=!0,o=e){try{if(!(0,i.existsSync)(e))return console.error(`No change, No replace src:${e}`),!1;o!==e&&(0,i.ensureFileSync)(o);const s=(0,i.readFileSync)(e,{encoding:"utf8"}),c=s.replace(t,r);if(s!==c)return(0,i.writeFileSync)(o,c),!0;n&&console.error(`replaceFile fail by same:${e}`)}catch(t){console.error(`replaceFile src:${e} %o`,t)}return!1}function v(e,t,r=!0,n=e){try{if(!(0,i.existsSync)(e))return console.error(`No change, No replace src:${e}`),!1;n!==e&&(0,i.ensureFileSync)(n);const o=(0,i.readFileSync)(e,{encoding:"utf8"});let s=o;for(const[e,r]of t)s=s.replace(e,r);if(o!==s)return(0,i.writeFileSync)(n,s),!0;r&&console.error(`replaceRegsFile fail by same:${e}`)}catch(t){console.error(`replaceRegsFile src:${e} %o`,t)}return!1}function N(e,t,r=!0){if((0,i.existsSync)(e)||console.error(`chkUpdate err path1=${e}=`),!(0,i.existsSync)(t))return r;const n=(0,i.statSync)(e,{bigint:!0}),o=(0,i.statSync)(t,{bigint:!0});return n.mtimeMs>o.mtimeMs}function D(e){if(null===e)return!1;const t=String(e);return"false"!==t&&Boolean(t)}function I(e){return(0,n.basename)(e,(0,n.extname)(e))}},6426:(e,t,r)=>{"use strict";const{stringify:n}=r(11144),{outputFile:i}=r(77024);e.exports=async function(e,t,r={}){const o=n(t,r);await i(e,o,r)}},7066:e=>{"use strict";e.exports=require("node:tty")},11144:e=>{e.exports={stringify:function(e,{EOL:t="\n",finalEOL:r=!0,replacer:n=null,spaces:i}={}){const o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},11527:(e,t,r)=>{const n=r(79896),i=r(16928),o=r(31383),s=r(1243),c="object"==typeof process&&"win32"===process.platform,a=e=>"object"==typeof e&&null!==e,f=new Uint32Array(256).map(((e,t)=>{for(let e=0;e<8;e++)1&t?t=3988292384^t>>>1:t>>>=1;return t>>>0}));function u(e){this.sep=i.sep,this.fs=n,a(e)&&a(e.fs)&&"function"==typeof e.fs.statSync&&(this.fs=e.fs)}e.exports=u,u.prototype.makeDir=function(e){const t=this;!function(e){let r=e.split(t.sep)[0];e.split(t.sep).forEach((function(e){if(e&&":"!==e.substr(-1,1)){var n;r+=t.sep+e;try{n=t.fs.statSync(r)}catch(e){t.fs.mkdirSync(r)}if(n&&n.isFile())throw s.FILE_IN_THE_WAY(`"${r}"`)}}))}(e)},u.prototype.writeFileTo=function(e,t,r,n){const o=this;if(o.fs.existsSync(e)){if(!r)return!1;if(o.fs.statSync(e).isDirectory())return!1}var s,c=i.dirname(e);o.fs.existsSync(c)||o.makeDir(c);try{s=o.fs.openSync(e,"w",438)}catch(t){o.fs.chmodSync(e,438),s=o.fs.openSync(e,"w",438)}if(s)try{o.fs.writeSync(s,t,0,t.length,0)}finally{o.fs.closeSync(s)}return o.fs.chmodSync(e,n||438),!0},u.prototype.writeFileToAsync=function(e,t,r,n,o){"function"==typeof n&&(o=n,n=void 0);const s=this;s.fs.exists(e,(function(c){if(c&&!r)return o(!1);s.fs.stat(e,(function(r,a){if(c&&a.isDirectory())return o(!1);var f=i.dirname(e);s.fs.exists(f,(function(r){r||s.makeDir(f),s.fs.open(e,"w",438,(function(r,i){r?s.fs.chmod(e,438,(function(){s.fs.open(e,"w",438,(function(r,i){s.fs.write(i,t,0,t.length,0,(function(){s.fs.close(i,(function(){s.fs.chmod(e,n||438,(function(){o(!0)}))}))}))}))})):i?s.fs.write(i,t,0,t.length,0,(function(){s.fs.close(i,(function(){s.fs.chmod(e,n||438,(function(){o(!0)}))}))})):s.fs.chmod(e,n||438,(function(){o(!0)}))}))}))}))}))},u.prototype.findFiles=function(e){const t=this;return function e(r,n,o){"boolean"==typeof n&&(o=n,n=void 0);let s=[];return t.fs.readdirSync(r).forEach((function(c){const a=i.join(r,c),f=t.fs.statSync(a);n&&!n.test(a)||s.push(i.normalize(a)+(f.isDirectory()?t.sep:"")),f.isDirectory()&&o&&(s=s.concat(e(a,n,o)))})),s}(e,void 0,!0)},u.prototype.findFilesAsync=function(e,t){const r=this;let n=[];r.fs.readdir(e,(function(o,s){if(o)return t(o);let c=s.length;if(!c)return t(null,n);s.forEach((function(o){o=i.join(e,o),r.fs.stat(o,(function(e,s){if(e)return t(e);s&&(n.push(i.normalize(o)+(s.isDirectory()?r.sep:"")),s.isDirectory()?r.findFilesAsync(o,(function(e,r){if(e)return t(e);n=n.concat(r),--c||t(null,n)})):--c||t(null,n))}))}))}))},u.prototype.getAttributes=function(){},u.prototype.setAttributes=function(){},u.crc32update=function(e,t){return f[255&(e^t)]^e>>>8},u.crc32=function(e){"string"==typeof e&&(e=Buffer.from(e,"utf8"));let t=e.length,r=-1;for(let n=0;n<t;)r=u.crc32update(r,e[n++]);return~r>>>0},u.methodToString=function(e){switch(e){case o.STORED:return"STORED ("+e+")";case o.DEFLATED:return"DEFLATED ("+e+")";default:return"UNSUPPORTED ("+e+")"}},u.canonical=function(e){if(!e)return"";const t=i.posix.normalize("/"+e.split("\\").join("/"));return i.join(".",t)},u.zipnamefix=function(e){if(!e)return"";const t=i.posix.normalize("/"+e.split("\\").join("/"));return i.posix.join(".",t)},u.findLast=function(e,t){if(!Array.isArray(e))throw new TypeError("arr is not array");for(let r=(e.length>>>0)-1;r>=0;r--)if(t(e[r],r,e))return e[r]},u.sanitize=function(e,t){e=i.resolve(i.normalize(e));for(var r=t.split("/"),n=0,o=r.length;n<o;n++){var s=i.normalize(i.join(e,r.slice(n,o).join(i.sep)));if(0===s.indexOf(e))return s}return i.normalize(i.join(e,i.basename(t)))},u.toBuffer=function(e,t){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):"string"==typeof e?t(e):Buffer.alloc(0)},u.readBigUInt64LE=function(e,t){var r=Buffer.from(e.slice(t,t+8));return r.swap64(),parseInt(`0x${r.toString("hex")}`)},u.fromDOS2Date=function(e){return new Date(1980+(e>>25&127),Math.max((e>>21&15)-1,0),Math.max(e>>16&31,1),e>>11&31,e>>5&63,(31&e)<<1)},u.fromDate2DOS=function(e){let t=0,r=0;return e.getFullYear()>1979&&(t=(e.getFullYear()-1980&127)<<9|e.getMonth()+1<<5|e.getDate(),r=e.getHours()<<11|e.getMinutes()<<5|e.getSeconds()>>1),t<<16|r},u.isWin=c,u.crcTable=f},11995:(e,t,r)=>{var n=r(2203).Stream;e.exports=function(e){return{ReadStream:function t(r,i){if(!(this instanceof t))return new t(r,i);n.call(this);var o=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var s=Object.keys(i),c=0,a=s.length;c<a;c++){var f=s[c];this[f]=i[f]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()})):process.nextTick((function(){o._read()}))},WriteStream:function t(r,i){if(!(this instanceof t))return new t(r,i);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,c=o.length;s<c;s++){var a=o[s];this[a]=i[a]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},12934:(e,t,r)=>{"use strict";const n=r(2909);e.exports={readJson:n.readFile,readJsonSync:n.readFileSync,writeJson:n.writeFile,writeJsonSync:n.writeFileSync}},13193:e=>{"use strict";e.exports=require("string_decoder")},13314:(e,t,r)=>{"use strict";const n=r(98737),i=r(16928),{copy:o}=r(4423),{remove:s}=r(35422),{mkdirp:c}=r(63798),{pathExists:a}=r(29288),f=r(66462);e.exports=async function(e,t,r={}){const u=r.overwrite||r.clobber||!1,{srcStat:l,isChangingCase:d=!1}=await f.checkPaths(e,t,"move",r);await f.checkParentPaths(e,l,t,"move");const h=i.dirname(t);return i.parse(h).root!==h&&await c(h),async function(e,t,r,i){if(!i)if(r)await s(t);else if(await a(t))throw new Error("dest already exists.");try{await n.rename(e,t)}catch(n){if("EXDEV"!==n.code)throw n;await async function(e,t,r){const n={overwrite:r,errorOnExist:!0,preserveTimestamps:!0};return await o(e,t,n),s(e)}(e,t,r)}}(e,t,u,d)}},16928:e=>{"use strict";e.exports=require("path")},17111:(e,t,r)=>{"use strict";const n=r(16928);e.exports.checkPath=function(e){if("win32"===process.platform&&/[<>:"|?*]/.test(e.replace(n.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},20181:e=>{"use strict";e.exports=require("buffer")},21605:(e,t,r)=>{"use strict";e.exports={...r(98737),...r(4423),...r(52591),...r(76288),...r(23376),...r(63798),...r(42455),...r(77024),...r(29288),...r(35422)}},23376:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,i=r(12934);i.outputJson=n(r(6426)),i.outputJsonSync=r(32188),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},23876:(e,t,r)=>{"use strict";const n=r(63735),i=r(16928),o=r(63798).mkdirsSync,s=r(47211).utimesMillisSync,c=r(66462);function a(e,t,r,o){const s=(o.dereference?n.statSync:n.lstatSync)(t);if(s.isDirectory())return function(e,t,r,i,o){return t?l(r,i,o):function(e,t,r,i){return n.mkdirSync(r),l(t,r,i),u(r,e)}(e.mode,r,i,o)}(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return function(e,t,r,i,o){return t?function(e,t,r,i){if(i.overwrite)return n.unlinkSync(r),f(e,t,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,i,o):f(e,r,i,o)}(s,e,t,r,o);if(s.isSymbolicLink())return function(e,t,r,o){let s=n.readlinkSync(t);if(o.dereference&&(s=i.resolve(process.cwd(),s)),e){let e;try{e=n.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlinkSync(s,r);throw e}if(o.dereference&&(e=i.resolve(process.cwd(),e)),c.isSrcSubdir(s,e))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${e}'.`);if(c.isSrcSubdir(e,s))throw new Error(`Cannot overwrite '${e}' with '${s}'.`);return function(e,t){return n.unlinkSync(t),n.symlinkSync(e,t)}(s,r)}return n.symlinkSync(s,r)}(e,t,r,o);if(s.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(s.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function f(e,t,r,i){return n.copyFileSync(t,r),i.preserveTimestamps&&function(e,t,r){(function(e){return!(128&e)})(e)&&function(e,t){u(e,128|t)}(r,e),function(e,t){const r=n.statSync(e);s(t,r.atime,r.mtime)}(t,r)}(e.mode,t,r),u(r,e.mode)}function u(e,t){return n.chmodSync(e,t)}function l(e,t,r){const i=n.opendirSync(e);try{let n;for(;null!==(n=i.readSync());)d(n.name,e,t,r)}finally{i.closeSync()}}function d(e,t,r,n){const o=i.join(t,e),s=i.join(r,e);if(n.filter&&!n.filter(o,s))return;const{destStat:f}=c.checkPathsSync(o,s,"copy",n);return a(f,o,s,n)}e.exports=function(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:s,destStat:f}=c.checkPathsSync(e,t,"copy",r);if(c.checkParentPathsSync(e,s,t,"copy"),r.filter&&!r.filter(e,t))return;const u=i.dirname(t);return n.existsSync(u)||o(u),a(f,e,t,r)}},24434:e=>{"use strict";e.exports=require("events")},25821:(e,t,r)=>{const n=+(process.versions?process.versions.node:"").split(".")[0]||0;e.exports=function(e,t){var i=r(43106);const o=n>=15&&t>0?{maxOutputLength:t}:{};return{inflate:function(){return i.inflateRawSync(e,o)},inflateAsync:function(t){var r=i.createInflateRaw(o),n=[],s=0;r.on("data",(function(e){n.push(e),s+=e.length})),r.on("end",(function(){var e=Buffer.alloc(s),r=0;e.fill(0);for(var i=0;i<n.length;i++){var o=n[i];o.copy(e,r),r+=o.length}t&&t(e)})),r.end(e)}}}},26322:e=>{"use strict";e.exports={asyncIteratorConcurrentProcess:async function(e,t){const r=[];for await(const n of e)r.push(t(n).then((()=>null),(e=>e??new Error("unknown error"))));await Promise.all(r.map((e=>e.then((e=>{if(null!==e)throw e})))))}}},28698:e=>{e.exports={efs:!0,encode:e=>Buffer.from(e,"utf8"),decode:e=>e.toString("utf8")}},29288:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,i=r(98737);e.exports={pathExists:n((function(e){return i.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:i.existsSync}},30283:(e,t,r)=>{const n=r(64070),i=r(16928),o=r(90016),s=r(37224),c=(...e)=>n.findLast(e,(e=>"boolean"==typeof e)),a=(...e)=>n.findLast(e,(e=>"string"==typeof e)),f={noSort:!1,readEntries:!1,method:n.Constants.NONE,fs:null};e.exports=function(e,t){let r=null;const u=Object.assign(Object.create(null),f);e&&"object"==typeof e&&(e instanceof Uint8Array||(Object.assign(u,e),e=u.input?u.input:void 0,u.input&&delete u.input),Buffer.isBuffer(e)&&(r=e,u.method=n.Constants.BUFFER,e=void 0)),Object.assign(u,t);const l=new n(u);if("object"==typeof u.decoder&&"function"==typeof u.decoder.encode&&"function"==typeof u.decoder.decode||(u.decoder=n.decoder),e&&"string"==typeof e){if(!l.fs.existsSync(e))throw n.Errors.INVALID_FILENAME();u.method=n.Constants.FILE,u.filename=e,r=l.fs.readFileSync(e)}const d=new s(r,u),{canonical:h,sanitize:p,zipnamefix:m}=n;function y(e){var t;return e&&d&&("string"==typeof e&&(t=d.getEntry(i.posix.normalize(e))),"object"==typeof e&&void 0!==e.entryName&&void 0!==e.header&&(t=d.getEntry(e.entryName)),t)?t:null}function E(e){const{join:t,normalize:r,sep:n}=i.posix;return t(".",r(n+e.split("\\").join(n)+n))}function w(e){return e instanceof RegExp?(t=e,function(e){return t.test(e)}):"function"!=typeof e?()=>!0:e;var t}const S=(e,t)=>{let r=t.slice(-1);return r=r===l.sep?l.sep:"",i.relative(e,t)+r};return{readFile:function(e,t){var r=y(e);return r&&r.getData(t)||null},childCount:function(e){const t=y(e);if(t)return d.getChildCount(t)},readFileAsync:function(e,t){var r=y(e);r?r.getDataAsync(t):t(null,"getEntry failed for:"+e)},readAsText:function(e,t){var r=y(e);if(r){var n=r.getData();if(n&&n.length)return n.toString(t||"utf8")}return""},readAsTextAsync:function(e,t,r){var n=y(e);n?n.getDataAsync((function(e,n){n?t(e,n):e&&e.length?t(e.toString(r||"utf8")):t("")})):t("")},deleteFile:function(e,t=!0){var r=y(e);r&&d.deleteFile(r.entryName,t)},deleteEntry:function(e){var t=y(e);t&&d.deleteEntry(t.entryName)},addZipComment:function(e){d.comment=e},getZipComment:function(){return d.comment||""},addZipEntryComment:function(e,t){var r=y(e);r&&(r.comment=t)},getZipEntryComment:function(e){var t=y(e);return t&&t.comment||""},updateFile:function(e,t){var r=y(e);r&&r.setData(t)},addLocalFile:function(e,t,r,o){if(!l.fs.existsSync(e))throw n.Errors.FILE_NOT_FOUND(e);{t=t?E(t):"";const n=i.win32.basename(i.win32.normalize(e));t+=r||n;const s=l.fs.statSync(e),c=s.isFile()?l.fs.readFileSync(e):Buffer.alloc(0);s.isDirectory()&&(t+=l.sep),this.addFile(t,c,o,s)}},addLocalFileAsync:function(e,t){e="object"==typeof e?e:{localPath:e};const r=i.resolve(e.localPath),{comment:n}=e;let{zipPath:o,zipName:s}=e;const c=this;l.fs.stat(r,(function(e,a){if(e)return t(e,!1);o=o?E(o):"";const f=i.win32.basename(i.win32.normalize(r));if(o+=s||f,a.isFile())l.fs.readFile(r,(function(e,r){return e?t(e,!1):(c.addFile(o,r,n,a),setImmediate(t,void 0,!0))}));else if(a.isDirectory())return o+=l.sep,c.addFile(o,Buffer.alloc(0),n,a),setImmediate(t,void 0,!0)}))},addLocalFolder:function(e,t,r){if(r=w(r),t=t?E(t):"",e=i.normalize(e),!l.fs.existsSync(e))throw n.Errors.FILE_NOT_FOUND(e);{const n=l.findFiles(e),o=this;if(n.length)for(const s of n){const n=i.join(t,S(e,s));r(n)&&o.addLocalFile(s,i.dirname(n))}}},addLocalFolderAsync:function(e,t,r,o){o=w(o),r=r?E(r):"",e=i.normalize(e);var s=this;l.fs.open(e,"r",(function(i){if(i&&"ENOENT"===i.code)t(void 0,n.Errors.FILE_NOT_FOUND(e));else if(i)t(void 0,i);else{var c=l.findFiles(e),a=-1,f=function(){if((a+=1)<c.length){var n=c[a],i=S(e,n).split("\\").join("/");i=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),o(i)?l.fs.stat(n,(function(e,o){e&&t(void 0,e),o.isFile()?l.fs.readFile(n,(function(e,n){e?t(void 0,e):(s.addFile(r+i,n,"",o),f())})):(s.addFile(r+i+"/",Buffer.alloc(0),"",o),f())})):process.nextTick((()=>{f()}))}else t(!0,void 0)};f()}}))},addLocalFolderAsync2:function(e,t){const r=this;e="object"==typeof e?e:{localPath:e},localPath=i.resolve(E(e.localPath));let{zipPath:o,filter:s,namefix:c}=e;var a;s instanceof RegExp?(a=s,s=function(e){return a.test(e)}):"function"!=typeof s&&(s=function(){return!0}),o=o?E(o):"","latin1"==c&&(c=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),"function"!=typeof c&&(c=e=>e);const f=e=>i.join(o,c(S(localPath,e))),u=e=>i.win32.basename(i.win32.normalize(c(e)));l.fs.open(localPath,"r",(function(e){e&&"ENOENT"===e.code?t(void 0,n.Errors.FILE_NOT_FOUND(localPath)):e?t(void 0,e):l.findFilesAsync(localPath,(function(e,n){if(e)return t(e);(n=n.filter((e=>s(f(e))))).length||t(void 0,!1),setImmediate(n.reverse().reduce((function(e,t){return function(n,o){if(n||!1===o)return setImmediate(e,n,!1);r.addLocalFileAsync({localPath:t,zipPath:i.dirname(f(t)),zipName:u(t)},e)}}),t))}))}))},addLocalFolderPromise:function(e,t){return new Promise(((r,n)=>{this.addLocalFolderAsync2(Object.assign({localPath:e},t),((e,t)=>{e&&n(e),t&&r(this)}))}))},addFile:function(e,t,r,n){let i=y(e=m(e));const s=null!=i;s||(i=new o(u),i.entryName=e),i.comment=r||"";const c="object"==typeof n&&n instanceof l.fs.Stats;c&&(i.header.time=n.mtime);var a=i.isDirectory?16:0;let f=i.isDirectory?16384:32768;return f|=c?4095&n.mode:"number"==typeof n?4095&n:i.isDirectory?493:420,a=(a|f<<16)>>>0,i.attr=a,i.setData(t),s||d.setEntry(i),i},getEntries:function(e){return d.password=e,d?d.entries:[]},getEntry:function(e){return y(e)},getEntryCount:function(){return d.getEntryCount()},forEach:function(e){return d.forEach(e)},extractEntryTo:function(e,t,r,o,s,f){o=c(!1,o),s=c(!1,s),r=c(!0,r),f=a(s,f);var u=y(e);if(!u)throw n.Errors.NO_ENTRY();var m=h(u.entryName),E=p(t,f&&!u.isDirectory?f:r?m:i.basename(m));if(u.isDirectory)return d.getEntryChildren(u).forEach((function(e){if(e.isDirectory)return;var c=e.getData();if(!c)throw n.Errors.CANT_EXTRACT_FILE();var a=h(e.entryName),f=p(t,r?a:i.basename(a));const u=s?e.header.fileAttr:void 0;l.writeFileTo(f,c,o,u)})),!0;var w=u.getData(d.password);if(!w)throw n.Errors.CANT_EXTRACT_FILE();if(l.fs.existsSync(E)&&!o)throw n.Errors.CANT_OVERRIDE();const S=s?e.header.fileAttr:void 0;return l.writeFileTo(E,w,o,S),!0},test:function(e){if(!d)return!1;for(var t in d.entries)try{if(t.isDirectory)continue;if(!d.entries[t].getData(e))return!1}catch(e){return!1}return!0},extractAllTo:function(e,t,r,i){if(r=c(!1,r),i=a(r,i),t=c(!1,t),!d)throw n.Errors.NO_ZIP();d.entries.forEach((function(o){var s=p(e,h(o.entryName));if(o.isDirectory)return void l.makeDir(s);var c=o.getData(i);if(!c)throw n.Errors.CANT_EXTRACT_FILE();const a=r?o.header.fileAttr:void 0;l.writeFileTo(s,c,t,a);try{l.fs.utimesSync(s,o.header.time,o.header.time)}catch(e){throw n.Errors.CANT_EXTRACT_FILE()}}))},extractAllToAsync:function(e,t,r,o){if(o=((...e)=>n.findLast(e,(e=>"function"==typeof e)))(t,r,o),r=c(!1,r),t=c(!1,t),!o)return new Promise(((n,i)=>{this.extractAllToAsync(e,t,r,(function(e){e?i(e):n(this)}))}));if(!d)return void o(n.Errors.NO_ZIP());e=i.resolve(e);const s=t=>p(e,i.normalize(h(t.entryName))),a=(e,t)=>new Error(e+': "'+t+'"'),f=[],u=[];d.entries.forEach((e=>{e.isDirectory?f.push(e):u.push(e)}));for(const e of f){const t=s(e),n=r?e.header.fileAttr:void 0;try{l.makeDir(t),n&&l.fs.chmodSync(t,n),l.fs.utimesSync(t,e.header.time,e.header.time)}catch(e){o(a("Unable to create folder",t))}}u.reverse().reduce((function(o,s){return function(c){if(c)o(c);else{const c=i.normalize(h(s.entryName)),f=p(e,c);s.getDataAsync((function(e,i){if(i)o(i);else if(e){const n=r?s.header.fileAttr:void 0;l.writeFileToAsync(f,e,t,n,(function(e){e||o(a("Unable to write file",f)),l.fs.utimes(f,s.header.time,s.header.time,(function(e){e?o(a("Unable to set times",f)):o()}))}))}else o(n.Errors.CANT_EXTRACT_FILE())}))}}}),o)()},writeZip:function(e,t){if(1===arguments.length&&"function"==typeof e&&(t=e,e=""),!e&&u.filename&&(e=u.filename),e){var r=d.compressToBuffer();if(r){var n=l.writeFileTo(e,r,!0);"function"==typeof t&&t(n?null:new Error("failed"),"")}}},writeZipPromise:function(e,t){const{overwrite:r,perm:n}=Object.assign({overwrite:!0},t);return new Promise(((t,i)=>{!e&&u.filename&&(e=u.filename),e||i("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then((o=>{l.writeFileToAsync(e,o,r,n,(e=>e?t(e):i("ADM-ZIP: Wasn't able to write zip file")))}),i)}))},toBufferPromise:function(){return new Promise(((e,t)=>{d.toAsyncBuffer(e,t)}))},toBuffer:function(e,t,r,n){return"function"==typeof e?(d.toAsyncBuffer(e,t,r,n),null):d.compressToBuffer()}}}},31383:e=>{e.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}},31421:e=>{"use strict";e.exports=require("node:child_process")},32188:(e,t,r)=>{"use strict";const{stringify:n}=r(11144),{outputFileSync:i}=r(77024);e.exports=function(e,t,r){const o=n(t,r);i(e,o,r)}},34589:e=>{"use strict";e.exports=require("node:assert")},35317:e=>{"use strict";e.exports=require("child_process")},35422:(e,t,r)=>{"use strict";const n=r(63735),i=r(41236).fromCallback;e.exports={remove:i((function(e,t){n.rm(e,{recursive:!0,force:!0},t)})),removeSync:function(e){n.rmSync(e,{recursive:!0,force:!0})}}},37067:e=>{"use strict";e.exports=require("node:http")},37224:(e,t,r)=>{const n=r(90016),i=r(46780),o=r(64070);e.exports=function(e,t){var r=[],s={},c=Buffer.alloc(0),a=new i.MainHeader,f=!1;const u=new Set,l=t,{noSort:d,decoder:h}=l;function p(){if(f=!0,s={},a.diskEntries>(e.length-a.offset)/o.Constants.CENHDR)throw o.Errors.DISK_ENTRY_TOO_LARGE();r=new Array(a.diskEntries);for(var t=a.offset,i=0;i<r.length;i++){var c=t,d=new n(l,e);d.header=e.slice(c,c+=o.Constants.CENHDR),d.entryName=e.slice(c,c+=d.header.fileNameLength),d.header.extraLength&&(d.extra=e.slice(c,c+=d.header.extraLength)),d.header.commentLength&&(d.comment=e.slice(c,c+d.header.commentLength)),t+=d.header.centralHeaderSize,r[i]=d,s[d.entryName]=d}u.clear(),function(){const e=new Set;for(const t of Object.keys(s)){const r=t.split("/");if(r.pop(),r.length)for(let t=0;t<r.length;t++){const n=r.slice(0,t+1).join("/")+"/";e.add(n)}}for(const t of e)if(!(t in s)){const e=new n(l);e.entryName=t,e.attr=16,e.temporary=!0,r.push(e),s[e.entryName]=e,u.add(e)}}()}function m(){r.length>1&&!d&&r.sort(((e,t)=>e.entryName.toLowerCase().localeCompare(t.entryName.toLowerCase())))}return e?function(t){var r=e.length-o.Constants.ENDHDR,n=Math.max(0,r-65535),i=n,s=e.length,f=-1,u=0;for("boolean"==typeof l.trailingSpace&&l.trailingSpace&&(n=0);r>=i;r--)if(80===e[r])if(e.readUInt32LE(r)!==o.Constants.ENDSIG)if(e.readUInt32LE(r)!==o.Constants.END64SIG){if(e.readUInt32LE(r)===o.Constants.ZIP64SIG){f=r,s=r+o.readBigUInt64LE(e,r+o.Constants.ZIP64SIZE)+o.Constants.ZIP64LEAD;break}}else i=n;else f=r,u=r,s=r+o.Constants.ENDHDR,i=r-o.Constants.END64HDR;if(-1==f)throw o.Errors.INVALID_FORMAT();a.loadFromBinary(e.slice(f,s)),a.commentLength&&(c=e.slice(u+o.Constants.ENDHDR)),t&&p()}(l.readEntries):f=!0,{get entries(){return f||p(),r.filter((e=>!u.has(e)))},get comment(){return h.decode(c)},set comment(e){c=o.toBuffer(e,h.encode),a.commentLength=c.length},getEntryCount:function(){return f?r.length:a.diskEntries},forEach:function(e){this.entries.forEach(e)},getEntry:function(e){return f||p(),s[e]||null},setEntry:function(e){f||p(),r.push(e),s[e.entryName]=e,a.totalEntries=r.length},deleteFile:function(e,t=!0){f||p();const r=s[e];this.getEntryChildren(r,t).map((e=>e.entryName)).forEach(this.deleteEntry)},deleteEntry:function(e){f||p();const t=s[e],n=r.indexOf(t);n>=0&&(r.splice(n,1),delete s[e],a.totalEntries=r.length)},getEntryChildren:function(e,t=!0){if(f||p(),"object"==typeof e){if(e.isDirectory&&t){const t=[],n=e.entryName;for(const e of r)e.entryName.startsWith(n)&&t.push(e);return t}return[e]}return[]},getChildCount:function(e){if(e&&e.isDirectory){const t=this.getEntryChildren(e);return t.includes(e)?t.length-1:t.length}return 0},compressToBuffer:function(){f||p(),m();const t=[],r=[];let n=0,i=0;a.size=0,a.offset=0;let s=0;for(const e of this.entries){const o=e.getCompressedData();e.header.offset=i;const c=e.packLocalHeader(),f=c.length+o.length;i+=f,t.push(c),t.push(o);const u=e.packCentralHeader();r.push(u),a.size+=u.length,n+=f+u.length,s++}n+=a.mainHeaderSize,a.offset=i,a.totalEntries=s,i=0;const u=Buffer.alloc(n);for(const e of t)e.copy(u,i),i+=e.length;for(const e of r)e.copy(u,i),i+=e.length;const l=a.toBinary();return c&&c.copy(l,o.Constants.ENDHDR),l.copy(u,i),e=u,f=!1,u},toAsyncBuffer:function(t,r,n,i){try{f||p(),m();const r=[],s=[];let u=0,l=0,d=0;a.size=0,a.offset=0;const h=function(p){if(p.length>0){const e=p.shift(),t=e.entryName+e.extra.toString();n&&n(t),e.getCompressedDataAsync((function(n){i&&i(t),e.header.offset=l;const o=e.packLocalHeader(),c=o.length+n.length;l+=c,r.push(o),r.push(n);const f=e.packCentralHeader();s.push(f),a.size+=f.length,u+=c+f.length,d++,h(p)}))}else{u+=a.mainHeaderSize,a.offset=l,a.totalEntries=d,l=0;const n=Buffer.alloc(u);r.forEach((function(e){e.copy(n,l),l+=e.length})),s.forEach((function(e){e.copy(n,l),l+=e.length}));const i=a.toBinary();c&&c.copy(i,o.Constants.ENDHDR),i.copy(n,l),e=n,f=!1,t(n)}};h(Array.from(this.entries))}catch(e){r(e)}}}}},37342:(e,t,r)=>{"use strict";r.d(t,{Vt:()=>l,fj:()=>d,m9:()=>f});var n=r(5903),i=r(91398),o=r(35317),s=r(70857),c=r(21605);const a=r(30283);function f(){let e="";for(let t=0;t<32;++t)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}let u="";function l(e){return{light:i.Uri.file(u+`/res/light/${e}.svg`),dark:i.Uri.file(u+`/res/dark/${e}.svg`)}}class d{ctx;static start(e){u=e.extensionPath,d.#e=Object.fromEntries([{nm:"NODE",icon:"node-js-brands",label:"Node.js"},{nm:"NPM",icon:"npm-brands",label:"npm"},{nm:"SN_ESM_VER",icon:"skynovel",label:"(web) SKYNovel esm"},{nm:"TEMP_ESM_VER",icon:"skynovel",label:"(web) テンプレ esm"},{nm:"SN_CJS_VER",icon:"skynovel",label:"(web) SKYNovel"},{nm:"TEMP_CJS_VER",icon:"skynovel",label:"(web) テンプレ"},{nm:"PY_FONTTOOLS",icon:"python-brands",label:"fonttools"}].map((({nm:e,icon:t,label:r})=>{const n=new i.TreeItem(r);return n.iconPath=l(t),n.contextValue=r,[e,{ti:n,ready:!1}]}))),this.#t=new d(e)}static#t;static stop(){this.#t.#r()}#n;static#e;static getReady(e){return this.#e[e].ready}constructor(e){this.ctx=e,Promise.all([Promise.all([r.e(789),r.e(628)]).then(r.bind(r,85849))]).then((async([{WorkSpaces:t}])=>{e.subscriptions.push(this.#n=new t(e,this)),this.#i=!0,await this.#n.start(),await Promise.allSettled([this.#o((t=>Promise.try((()=>{t&&e.subscriptions.push(i.window.registerTreeDataProvider("skynovel-dev",this),i.commands.registerCommand("skynovel.TempWizard",(()=>this.#s())),i.commands.registerCommand("skynovel.refreshEnv",(()=>this.#c())),i.commands.registerCommand("skynovel.dlNode",(()=>this.#a())))})))),r.e(778).then(r.bind(r,73778)).then((({TreeDPDoc:t})=>e.subscriptions.push(i.window.registerTreeDataProvider("skynovel-doc",new t(e))))),r.e(399).then(r.bind(r,60399)).then((({ToolBox:t})=>e.subscriptions.push(t.init(e))))])})).catch((e=>console.error("fn:ActivityBar.ts constructor %o",e)))}#r(){this.#f&&this.#f.dispose()}async#o(e){const t=d.#e.NODE.ti,r=d.#e.NPM.ti,i=d.#e.PY_FONTTOOLS.ti;d.#e.NODE.ready=!1,d.#e.NPM.ready=!1,d.#e.PY_FONTTOOLS.ready=!1,await Promise.allSettled([new Promise((e=>(0,o.exec)("pip list",((t,r)=>{if(t)return i.description="-- pip error",i.iconPath=l("error"),this.#u.fire(i),void e();const s=()=>{d.#e.PY_FONTTOOLS.ready=!0,i.description="-- ready",i.iconPath=l("python-brands"),this.#u.fire(i),n.Ex||e(),(0,o.exec)("python -m site --user-site",((t,r)=>{if(t)return void e();const n=r.slice(0,-15)+"Scripts\\;";this.ctx.environmentVariableCollection.prepend("PATH",n)}))};/^fonttools\s/gm.test(r)&&/^brotli\s/gm.test(r)||(0,o.exec)(`pip install ${n.Ex?"--user ":""}fonttools brotli`,(t=>{t?(i.description="-- install失敗",i.iconPath=l("error"),this.#u.fire(i)):s(),e()}))})))),new Promise((e=>(0,o.exec)("node -v",((n,i)=>{if(n)return t.description="-- 見つかりません",t.iconPath=l("error"),this.#u.fire(t),r.description="-- （割愛）",r.iconPath=l("error"),this.#u.fire(r),void e();const o=i.slice(1,-1),s=o.split(".");if(1e6*Number(s[0])+1e3*Number(s[1])+Number(s[2])<24011e3)return t.description=`-- ${o} (${24.011.toFixed(3)}.0 以上必須)`,t.iconPath=l("error"),this.#u.fire(t),r.description="-- （割愛）",r.iconPath=l("error"),this.#u.fire(r),void e();d.#e.NODE.ready=!0,t.description=`-- ${o}`,t.iconPath=l("node-js-brands"),this.#u.fire(t),e()})))),new Promise((e=>(0,o.exec)("npm -v",((t,n)=>{if(t)return r.description="-- 見つかりません",r.iconPath=l("error"),this.#u.fire(r),void e();d.#e.NPM.ready=!0,r.description=`-- ${n.trimEnd()}`,r.iconPath=l("npm-brands"),this.#u.fire(r),e()}))))]).then((()=>e(!0))).catch((()=>e(!1)))}async#c(){this.#n.enableBtn(!1),await this.#o((async e=>{this.#n.enableBtn(e),e?await this.chkLastSNVer(this.#n.aLocalSNVer):this.#a()}))}#u=new i.EventEmitter;onDidChangeTreeData=this.#u.event;getTreeItem=e=>e;getChildren(e){return e?("Node.js"===e.label&&(d.#e.NODE.ti.iconPath=l(d.#e.NODE.ready?"node-js-brands":"error")),[]):Object.values(d.#e).map((e=>e.ti))}async chkLastSNVer(e){let t="",r="",n="",o="";await Promise.allSettled([fetch("https://raw.githubusercontent.com/famibee/skynovel_esm/main/package.json").then((async e=>{const r=await e.json();if(!("version"in r))throw"ネット上の package.json が異常です(esm)";t=r.version;const n=d.#e.SN_ESM_VER.ti;n.description="-- "+t,d.#t.#u.fire(n)})).catch((e=>console.error("fn:ActivityBar.ts esm %o",e))),fetch("https://raw.githubusercontent.com/famibee/tmp_esm_uc/main/CHANGELOG.md").then((async e=>{const t=await e.text();n=/\n## v(.+)\s/.exec(t)?.[1]??"";const r=d.#e.TEMP_ESM_VER.ti;r.description="-- "+n,d.#t.#u.fire(r)})),fetch("https://raw.githubusercontent.com/famibee/SKYNovel/master/package.json").then((async e=>{const t=await e.json();if(!("version"in t))throw"ネット上の package.json が異常です(cjs)";r=t.version;const n=d.#e.SN_CJS_VER.ti;n.description="-- "+r,d.#t.#u.fire(n)})).catch((e=>console.error("fn:ActivityBar.ts cjs %o",e))),fetch("https://raw.githubusercontent.com/famibee/tmp_cjs_uc/main/CHANGELOG.md").then((async e=>{const t=await e.text();o=/\n## v(.+)\s/.exec(t)?.[1]??"";const r=d.#e.TEMP_CJS_VER.ti;r.description="-- "+o,d.#t.#u.fire(r)}))]);for(const s of e){const e=s.is_new_tmp?t:r,c=s.is_new_tmp?n:o;if(s.ver_temp&&c!==s.ver_temp)return void i.window.showInformationMessage(`更新があります。【ベース更新】ボタンを押してください（テンプレ ${s.ver_temp}->${c}）`);if(""===s.ver_sn||s.ver_sn.startsWith("ile:")||s.ver_sn.startsWith("./"))return;e!==s.ver_sn&&i.window.showInformationMessage(`更新があります。【ベース更新】ボタンを押してください（エンジン ${s.ver_sn}->${e}）`)}}#f=null;#a(){const e=i.window.activeTextEditor?.viewColumn;if(this.#f)return void this.#f.reveal(e);const t=this.ctx.extensionPath+"/views",r=i.Uri.file(t);this.#f=i.window.createWebviewPanel("SKYNovel-envinfo","開発環境準備",e??i.ViewColumn.One,{enableScripts:!1,localResourceRoots:[r]}),this.#f.onDidDispose((()=>{this.#f=null})),(0,c.readFile)(t+"/envinfo.htm","utf-8",((e,t)=>{if(e)throw e;if(!this.#f)return;const i=this.#f.webview;this.#f.webview.html=(0,n.J4)(t,i,r)}))}#s(){const e=i.window.activeTextEditor?.viewColumn;if(this.#f)return void this.#f.reveal(e);const t=this.ctx.extensionPath+"/views",r=i.Uri.file(t),o=this.#f=i.window.createWebviewPanel("SKYNovel-tmpwiz","テンプレートから始める",e??i.ViewColumn.One,{enableScripts:!0,localResourceRoots:[r]});o.onDidDispose((()=>{this.#f=null})),o.webview.onDidReceiveMessage((e=>{switch(e.cmd){case"get":o.webview.postMessage({cmd:"res",o:{}});break;case"info":i.window.showInformationMessage(e.text);break;case"input":if("save_ns"!==e.id)break;this.#l=e.val,o.webview.postMessage({cmd:"vld",o:{id:"save_ns",valid:this.#d()}});break;case"tmp_cjs_hatsune":case"tmp_cjs_uc":case"tmp_cjs_sample":case"tmp_esm_uc":if(!this.#d())break;if(!this.#i){i.window.showInformationMessage("拡張機能の起動中です。しばしお待ち下さい");break}i.window.showOpenDialog({title:"プロジェクトフォルダを置く場所を指定して下さい",canSelectMany:!1,openLabel:"フォルダを選択",canSelectFiles:!1,canSelectFolders:!0}).then((t=>{const r=t?.[0]?.fsPath;if(!r)return;const n=r+"/"+this.#l;(0,c.existsSync)(n)?i.window.showErrorMessage(`既存のフォルダ ${this.#l} があります`,{detail:"フォルダ名を変えるか、既存のフォルダを削除して下さい",modal:!0}):this.#h(e.cmd,n)}))}}),!1),(0,c.readFile)(t+"/tmpwiz.htm","utf-8",((e,t)=>{if(e)throw e;if(!this.#f)return;const i=this.#f.webview;this.#f.webview.html=(0,n.J4)(t,i,r)}))}#i=!1;#h=(e,t)=>i.window.withProgress({location:i.ProgressLocation.Notification,title:"テンプレートからプロジェクト作成",cancellable:!0},(async(r,o)=>{const f=(0,s.tmpdir)()+`/${e}/`;await(0,c.remove)(f),await(0,c.mkdirs)(f);const u=f+`${e}.zip`;await(0,c.remove)(u);const l=new AbortController;let d=()=>l.abort();return o.onCancellationRequested((()=>{d(),(0,c.remove)(f)})),new Promise(((s,h)=>{r.report({increment:10,message:"ダウンロード中"});const{signal:p}=l;fetch(`https://github.com/famibee/${e}/archive/main.zip`,{signal:p}).then((async l=>{if(d=()=>{},r.report({increment:40,message:"ZIP生成中"}),o.isCancellationRequested||!l.ok)return void h(new Error("キャンセルボタンが押されました"));const p=await l.arrayBuffer();if(await(0,c.writeFile)(u,Buffer.from(p)),r.report({increment:10,message:"ZIP解凍中"}),new a(u).extractAllTo(f,!0),o.isCancellationRequested)return void h(new Error("キャンセルボタンが押されました"));r.report({increment:10,message:"ファイル調整"});const m=f+`${e}-main/`,y=m+"doc/prj/prj.json",E=await(0,c.readJson)(y,{encoding:"utf8"});E.save_ns=this.#l,E.debuger_token="",await(0,c.outputJson)(y,E,{spaces:"\t"});const w=m+"package.json";(0,n._Z)(w,[[/("name"\s*:\s*").*(")/,`$1${this.#l}$2`],[/("(?:appBundleId|appId)"\s*:\s*").*(")/g,`$1com.fc2.blog.famibee.skynovel.${this.#l}$2`],[/("artifactName"\s*:\s*").*(")/,"$1${name}-${version}-${arch}.${ext}$2"]],!1),await(0,c.move)(m,t),r.report({increment:30,message:"完了。フォルダを開きます"}),setTimeout((()=>{o.isCancellationRequested?h(new Error("キャンセルボタンが押されました")):(i.commands.executeCommand("vscode.openFolder",i.Uri.file(t),!1),s())}),4e3)})).catch((e=>i.window.showErrorMessage(`エラーです:${String(e)}`)))}))}));#l="";#d=()=>/^([a-zA-Z0-9!-/:-@¥[-`{-~]{1,})$/.test(this.#l);updPrjFromTmp=e=>i.window.withProgress({location:i.ProgressLocation.Notification,title:"テンプレートからプロジェクト更新",cancellable:!0},(async(t,r)=>{if(!(0,c.existsSync)(e+"/CHANGELOG.md"))return Promise.reject(new Error("CHANGELOG.md がありません"));const n=await(0,c.readJson)(e+"/package.json",{encoding:"utf8"}),o=n.repository.url.match(/git@github\.com:famibee\/(\w+)\./)?.[1]??"",f=(0,s.tmpdir)()+"/SKYNovel/";await(0,c.remove)(f),await(0,c.mkdirs)(f);const u=f+`${o}.zip`,l=new AbortController;let d=()=>l.abort();return r.onCancellationRequested((()=>(d(),(0,c.remove)(f)))),new Promise(((s,h)=>{t.report({increment:10,message:"ダウンロード中"});const{signal:p}=l;fetch(`https://github.com/famibee/${o}/archive/main.zip`,{signal:p}).then((async i=>{if(d=()=>{},t.report({increment:40,message:"ZIP生成中"}),r.isCancellationRequested||!i.ok)return void h(new Error("キャンセルボタンが押されました"));const l=await i.arrayBuffer();if(await(0,c.writeFile)(u,Buffer.from(l)),t.report({increment:10,message:"ZIP解凍中"}),new a(u).extractAllTo(f,!0),r.isCancellationRequested)return void h(new Error("キャンセルボタンが押されました"));t.report({increment:10,message:"ファイル調整"});const p=f+`${o}-main/`,m=async(t,r=!1)=>{if(!r||(0,c.existsSync)(e+"/"+t))return(0,c.copyFile)(p+t,e+"/"+t)},y=(0,c.existsSync)(p+"src/plugin/"),E=y?"src":"core";await Promise.allSettled([m(`${E}/plugin/humane/index.js`,!0),m(`${E}/wds.config.js`),m(`${E}/webpack.config.js`),m("CHANGELOG.md")]);const w=await(0,c.readJson)(p+"package.json",{encoding:"utf8"}),S="@famibee/skynovel"+(y?"_esm":""),g=n.dependencies[S];(g.startsWith("ile:")||g.startsWith("./"))&&(w.dependencies[S]=g),await(0,c.outputJson)(e+"/package.json",{...n,dependencies:w.dependencies,devDependencies:w.devDependencies,scripts:w.scripts},{spaces:"\t"}),t.report({increment:30,message:"ファイル準備完了"}),setTimeout(s,4e3)})).catch((e=>i.window.showErrorMessage(`エラーです:${String(e)}`)))}))}))}},38321:e=>{"use strict";e.exports=require("node:stream/consumers")},38522:e=>{"use strict";e.exports=require("node:zlib")},39023:e=>{"use strict";e.exports=require("util")},40610:e=>{"use strict";e.exports=require("node:dns")},41236:(e,t)=>{"use strict";t.fromCallback=function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise(((r,n)=>{t.push(((e,t)=>null!=e?n(e):r(t))),e.apply(this,t)}));e.apply(this,t)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(...t){const r=t[t.length-1];if("function"!=typeof r)return e.apply(this,t);t.pop(),e.apply(this,t).then((e=>r(null,e)),r)}),"name",{value:e.name})}},41692:e=>{"use strict";e.exports=require("node:tls")},41792:e=>{"use strict";e.exports=require("node:querystring")},42455:(e,t,r)=>{"use strict";const n=r(41236).fromPromise;e.exports={move:n(r(13314)),moveSync:r(86244)}},42613:e=>{"use strict";e.exports=require("assert")},43106:e=>{"use strict";e.exports=require("zlib")},44708:e=>{"use strict";e.exports=require("node:https")},46193:e=>{"use strict";e.exports=require("node:string_decoder")},46780:(e,t,r)=>{t.EntryHeader=r(78593),t.MainHeader=r(72138)},47064:(e,t,r)=>{"use strict";const n=r(98737),i=r(41236).fromPromise;e.exports={symlinkType:i((async function(e,t){if(t)return t;let r;try{r=await n.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"})),symlinkTypeSync:function(e,t){if(t)return t;let r;try{r=n.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}}},47211:(e,t,r)=>{"use strict";const n=r(98737),i=r(41236).fromPromise;e.exports={utimesMillis:i((async function(e,t,r){const i=await n.open(e,"r+");let o=null;try{await n.futimes(i,t,r)}finally{try{await n.close(i)}catch(e){o=e}}if(o)throw o})),utimesMillisSync:function(e,t,r){const i=n.openSync(e,"r+");return n.futimesSync(i,t,r),n.closeSync(i)}}},47819:(e,t,r)=>{const n=r(16928);e.exports=function(e,{fs:t}){var r=e||"",i={directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0},o=null;return r&&t.existsSync(r)?(o=t.statSync(r),i.directory=o.isDirectory(),i.mtime=o.mtime,i.atime=o.atime,i.executable=!!(73&o.mode),i.readonly=!(128&o.mode),i.hidden="."===n.basename(r)[0]):console.warn("Invalid path: "+r),{get directory(){return i.directory},get readOnly(){return i.readonly},get hidden(){return i.hidden},get mtime(){return i.mtime},get atime(){return i.atime},get executable(){return i.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:r,isDirectory:i.directory,isReadOnly:i.readonly,isHidden:i.hidden,isExecutable:i.executable,mTime:i.mtime,aTime:i.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"\t")}}}},48161:e=>{"use strict";e.exports=require("node:os")},49140:e=>{"use strict";e.exports=require("constants")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},52018:e=>{"use strict";e.exports=require("tty")},52591:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,i=r(98737),o=r(16928),s=r(63798),c=r(35422),a=n((async function(e){let t;try{t=await i.readdir(e)}catch{return s.mkdirs(e)}return Promise.all(t.map((t=>c.remove(o.join(e,t)))))}));function f(e){let t;try{t=i.readdirSync(e)}catch{return s.mkdirsSync(e)}t.forEach((t=>{t=o.join(e,t),c.removeSync(t)}))}e.exports={emptyDirSync:f,emptydirSync:f,emptyDir:a,emptydir:a}},53557:e=>{"use strict";e.exports=require("timers")},53601:(e,t,r)=>{e.exports=function(e){var t=r(43106),n={chunkSize:1024*(parseInt(e.length/1024)+1)};return{deflate:function(){return t.deflateRawSync(e,n)},deflateAsync:function(r){var i=t.createDeflateRaw(n),o=[],s=0;i.on("data",(function(e){o.push(e),s+=e.length})),i.on("end",(function(){var e=Buffer.alloc(s),t=0;e.fill(0);for(var n=0;n<o.length;n++){var i=o[n];i.copy(e,t),t+=i.length}r&&r(e)})),i.end(e)}}}},55291:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,i=r(16928),o=r(98737),{mkdirs:s,mkdirsSync:c}=r(63798),{symlinkPaths:a,symlinkPathsSync:f}=r(73838),{symlinkType:u,symlinkTypeSync:l}=r(47064),{pathExists:d}=r(29288),{areIdentical:h}=r(66462);e.exports={createSymlink:n((async function(e,t,r){let n;try{n=await o.lstat(t)}catch{}if(n&&n.isSymbolicLink()){const[r,n]=await Promise.all([o.stat(e),o.stat(t)]);if(h(r,n))return}const c=await a(e,t);e=c.toDst;const f=await u(c.toCwd,r),l=i.dirname(t);return await d(l)||await s(l),o.symlink(e,t,f)})),createSymlinkSync:function(e,t,r){let n;try{n=o.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const r=o.statSync(e),n=o.statSync(t);if(h(r,n))return}const s=f(e,t);e=s.toDst,r=l(s.toCwd,r);const a=i.dirname(t);return o.existsSync(a)||c(a),o.symlinkSync(e,t,r)}}},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},58152:e=>{"use strict";e.exports=require("node:path/win32")},58500:e=>{"use strict";e.exports=require("node:timers/promises")},58611:e=>{"use strict";e.exports=require("http")},63735:(e,t,r)=>{var n,i,o=r(79896),s=r(69106),c=r(11995),a=r(1283),f=r(39023);function u(e,t){Object.defineProperty(e,n,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(n=Symbol.for("graceful-fs.queue"),i=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",i="___graceful-fs.previous");var l,d=function(){};if(f.debuglog?d=f.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(d=function(){var e=f.format.apply(f,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!o[n]){var h=global[n]||[];u(o,h),o.close=function(e){function t(t,r){return e.call(o,t,(function(e){e||y(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,i,{value:e}),t}(o.close),o.closeSync=function(e){function t(t){e.apply(o,arguments),y()}return Object.defineProperty(t,i,{value:e}),t}(o.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){d(o[n]),r(42613).equal(o[n].length,0)}))}function p(e){s(e),e.gracefulify=p,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){return"function"==typeof r&&(n=r,r=null),function e(r,n,i,o){return t(r,n,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof i&&i.apply(this,arguments):m([e,[r,n,i],t,o||Date.now(),Date.now()])}))}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,i){return"function"==typeof n&&(i=n,n=null),function e(t,n,i,o,s){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,n,i,o],r,s||Date.now(),Date.now()])}))}(e,t,n,i)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,i){return"function"==typeof r&&(i=r,r=null),function e(t,r,i,o,s){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,r,i,o],n,s||Date.now(),Date.now()])}))}(e,t,r,i)});var i=e.copyFile;i&&(e.copyFile=function(e,t,r,n){return"function"==typeof r&&(n=r,r=0),function e(t,r,n,o,s){return i(t,r,n,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,r,n,o],i,s||Date.now(),Date.now()])}))}(e,t,r,n)});var o=e.readdir;e.readdir=function(e,t,r){"function"==typeof t&&(r=t,t=null);var n=a.test(process.version)?function(e,t,r,n){return o(e,i(e,t,r,n))}:function(e,t,r,n){return o(e,t,i(e,t,r,n))};return n(e,t,r);function i(e,t,r,i){return function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"==typeof r&&r.call(this,o,s)):m([n,[e,t,r],o,i||Date.now(),Date.now()])}}};var a=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var f=c(e);y=f.ReadStream,E=f.WriteStream}var u=e.ReadStream;u&&(y.prototype=Object.create(u.prototype),y.prototype.open=function(){var e=this;S(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var l=e.WriteStream;l&&(E.prototype=Object.create(l.prototype),E.prototype.open=function(){var e=this;S(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return y},set:function(e){y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return E},set:function(e){E=e},enumerable:!0,configurable:!0});var d=y;Object.defineProperty(e,"FileReadStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var h=E;function y(e,t){return this instanceof y?(u.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}function E(e,t){return this instanceof E?(l.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var w=e.open;function S(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,i,o){return w(t,r,n,(function(s,c){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof i&&i.apply(this,arguments):m([e,[t,r,n,i],s,o||Date.now(),Date.now()])}))}(e,t,r,n)}return e.open=S,e}function m(e){d("ENQUEUE",e[0].name,e[1]),o[n].push(e),E()}function y(){for(var e=Date.now(),t=0;t<o[n].length;++t)o[n][t].length>2&&(o[n][t][3]=e,o[n][t][4]=e);E()}function E(){if(clearTimeout(l),l=void 0,0!==o[n].length){var e=o[n].shift(),t=e[0],r=e[1],i=e[2],s=e[3],c=e[4];if(void 0===s)d("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-s>=6e4){d("TIMEOUT",t.name,r);var a=r.pop();"function"==typeof a&&a.call(null,i)}else{var f=Date.now()-c,u=Math.max(c-s,1);f>=Math.min(1.2*u,100)?(d("RETRY",t.name,r),t.apply(null,r.concat([s]))):o[n].push(e)}void 0===l&&(l=setTimeout(E,0))}}global[n]||u(global,o[n]),e.exports=p(a(o)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!o.__patched&&(e.exports=p(o),o.__patched=!0)},63798:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,{makeDir:i,makeDirSync:o}=r(98916),s=n(i);e.exports={mkdirs:s,mkdirsSync:o,mkdirp:s,mkdirpSync:o,ensureDir:s,ensureDirSync:o}},64070:(e,t,r)=>{e.exports=r(11527),e.exports.Constants=r(31383),e.exports.Errors=r(1243),e.exports.FileAttr=r(47819),e.exports.decoder=r(28698)},64756:e=>{"use strict";e.exports=require("tls")},65692:e=>{"use strict";e.exports=require("https")},66462:(e,t,r)=>{"use strict";const n=r(98737),i=r(16928),o=r(41236).fromPromise;function s(e,t){return void 0!==t.ino&&void 0!==t.dev&&t.ino===e.ino&&t.dev===e.dev}function c(e,t){const r=i.resolve(e).split(i.sep).filter((e=>e)),n=i.resolve(t).split(i.sep).filter((e=>e));return r.every(((e,t)=>n[t]===e))}function a(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:o((async function(e,t,r,o){const{srcStat:f,destStat:u}=await function(e,t,r){const i=r.dereference?e=>n.stat(e,{bigint:!0}):e=>n.lstat(e,{bigint:!0});return Promise.all([i(e),i(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}(e,t,o);if(u){if(s(f,u)){const n=i.basename(e),o=i.basename(t);if("move"===r&&n!==o&&n.toLowerCase()===o.toLowerCase())return{srcStat:f,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(f.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!f.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(f.isDirectory()&&c(e,t))throw new Error(a(e,t,r));return{srcStat:f,destStat:u}})),checkPathsSync:function(e,t,r,o){const{srcStat:f,destStat:u}=function(e,t,r){let i;const o=r.dereference?e=>n.statSync(e,{bigint:!0}):e=>n.lstatSync(e,{bigint:!0}),s=o(e);try{i=o(t)}catch(e){if("ENOENT"===e.code)return{srcStat:s,destStat:null};throw e}return{srcStat:s,destStat:i}}(e,t,o);if(u){if(s(f,u)){const n=i.basename(e),o=i.basename(t);if("move"===r&&n!==o&&n.toLowerCase()===o.toLowerCase())return{srcStat:f,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(f.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!f.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(f.isDirectory()&&c(e,t))throw new Error(a(e,t,r));return{srcStat:f,destStat:u}},checkParentPaths:o((async function e(t,r,o,c){const f=i.resolve(i.dirname(t)),u=i.resolve(i.dirname(o));if(u===f||u===i.parse(u).root)return;let l;try{l=await n.stat(u,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(s(r,l))throw new Error(a(t,o,c));return e(t,r,u,c)})),checkParentPathsSync:function e(t,r,o,c){const f=i.resolve(i.dirname(t)),u=i.resolve(i.dirname(o));if(u===f||u===i.parse(u).root)return;let l;try{l=n.statSync(u,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(s(r,l))throw new Error(a(t,o,c));return e(t,r,u,c)},isSrcSubdir:c,areIdentical:s}},69106:(e,t,r)=>{var n=r(49140),i=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=i.call(process)),o};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var c=process.chdir;process.chdir=function(e){o=null,c.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,c)}e.exports=function(e){function t(t){return t?function(r,n,i){return t.call(e,r,n,(function(e){f(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function r(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!f(e))throw e}}:t}function i(t){return t?function(r,n,i,o){return t.call(e,r,n,i,(function(e){f(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function o(t){return t?function(r,n,i){try{return t.call(e,r,n,i)}catch(e){if(!f(e))throw e}}:t}function c(t){return t?function(r,n,i){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof n&&(i=n,n=null),n?t.call(e,r,n,o):t.call(e,r,o)}:t}function a(t){return t?function(r,n){var i=n?t.call(e,r,n):t.call(e,r);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:t}function f(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}var u;n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,i){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){t?i&&i(t):e.fchmod(n,r,(function(t){e.close(n,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(t,r){var i,o=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),s=!0;try{i=e.fchmodSync(o,r),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}}(e),e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,r,i,o){e.open(t,n.O_SYMLINK,(function(t,n){t?o&&o(t):e.futimes(n,r,i,(function(t){e.close(n,(function(e){o&&o(t||e)}))}))}))},e.lutimesSync=function(t,r,i){var o,s=e.openSync(t,n.O_SYMLINK),c=!0;try{o=e.futimesSync(s,r,i),c=!1}finally{if(c)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):e.futimes&&(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=r(e.chmodSync),e.fchmodSync=r(e.fchmodSync),e.lchmodSync=r(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){}),"win32"===s&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function r(r,n,i){var o=Date.now(),s=0;t(r,n,(function c(a){if(a&&("EACCES"===a.code||"EPERM"===a.code||"EBUSY"===a.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(n,(function(e,o){e&&"ENOENT"===e.code?t(r,n,c):i(a)}))}),s),void(s<100&&(s+=10));i&&i(a)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.rename)),e.read="function"!=typeof e.read?e.read:function(t){function r(r,n,i,o,s,c){var a;if(c&&"function"==typeof c){var f=0;a=function(u,l,d){if(u&&"EAGAIN"===u.code&&f<10)return f++,t.call(e,r,n,i,o,s,a);c.apply(this,arguments)}}return t.call(e,r,n,i,o,s,a)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(u=e.readSync,function(t,r,n,i,o){for(var s=0;;)try{return u.call(e,t,r,n,i,o)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}})}},69278:e=>{"use strict";e.exports=require("net")},70857:e=>{"use strict";e.exports=require("os")},72138:(e,t,r)=>{var n=r(64070),i=n.Constants;e.exports=function(){var e=0,t=0,r=0,o=0,s=0;return{get diskEntries(){return e},set diskEntries(r){e=t=r},get totalEntries(){return t},set totalEntries(r){t=e=r},get size(){return r},set size(e){r=e},get offset(){return o},set offset(e){o=e},get commentLength(){return s},set commentLength(e){s=e},get mainHeaderSize(){return i.ENDHDR+s},loadFromBinary:function(c){if((c.length!==i.ENDHDR||c.readUInt32LE(0)!==i.ENDSIG)&&(c.length<i.ZIP64HDR||c.readUInt32LE(0)!==i.ZIP64SIG))throw n.Errors.INVALID_END();c.readUInt32LE(0)===i.ENDSIG?(e=c.readUInt16LE(i.ENDSUB),t=c.readUInt16LE(i.ENDTOT),r=c.readUInt32LE(i.ENDSIZ),o=c.readUInt32LE(i.ENDOFF),s=c.readUInt16LE(i.ENDCOM)):(e=n.readBigUInt64LE(c,i.ZIP64SUB),t=n.readBigUInt64LE(c,i.ZIP64TOT),r=n.readBigUInt64LE(c,i.ZIP64SIZE),o=n.readBigUInt64LE(c,i.ZIP64OFF),s=0)},toBinary:function(){var n=Buffer.alloc(i.ENDHDR+s);return n.writeUInt32LE(i.ENDSIG,0),n.writeUInt32LE(0,4),n.writeUInt16LE(e,i.ENDSUB),n.writeUInt16LE(t,i.ENDTOT),n.writeUInt32LE(r,i.ENDSIZ),n.writeUInt32LE(o,i.ENDOFF),n.writeUInt16LE(s,i.ENDCOM),n.fill(" ",i.ENDHDR),n},toJSON:function(){return{diskEntries:e,totalEntries:t,size:r+" bytes",offset:function(e){let t=e.toString(16).toUpperCase();for(;t.length<4;)t="0"+t;return"0x"+t}(o),commentLength:s}},toString:function(){return JSON.stringify(this.toJSON(),null,"\t")}}}},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73838:(e,t,r)=>{"use strict";const n=r(16928),i=r(98737),{pathExists:o}=r(29288),s=r(41236).fromPromise;e.exports={symlinkPaths:s((async function(e,t){if(n.isAbsolute(e)){try{await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:e}}const r=n.dirname(t),s=n.join(r,e);if(await o(s))return{toCwd:s,toDst:e};try{await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:n.relative(r,e)}})),symlinkPathsSync:function(e,t){if(n.isAbsolute(e)){if(!i.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const r=n.dirname(t),o=n.join(r,e);if(i.existsSync(o))return{toCwd:o,toDst:e};if(!i.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:n.relative(r,e)}}}},76288:(e,t,r)=>{"use strict";const{createFile:n,createFileSync:i}=r(89616),{createLink:o,createLinkSync:s}=r(91522),{createSymlink:c,createSymlinkSync:a}=r(55291);e.exports={createFile:n,createFileSync:i,ensureFile:n,ensureFileSync:i,createLink:o,createLinkSync:s,ensureLink:o,ensureLinkSync:s,createSymlink:c,createSymlinkSync:a,ensureSymlink:c,ensureSymlinkSync:a}},76760:e=>{"use strict";e.exports=require("node:path")},76982:e=>{"use strict";e.exports=require("crypto")},77024:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,i=r(98737),o=r(16928),s=r(63798),c=r(29288).pathExists;e.exports={outputFile:n((async function(e,t,r="utf-8"){const n=o.dirname(e);return await c(n)||await s.mkdirs(n),i.writeFile(e,t,r)})),outputFileSync:function(e,...t){const r=o.dirname(e);i.existsSync(r)||s.mkdirsSync(r),i.writeFileSync(e,...t)}}},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},78593:(e,t,r)=>{var n=r(64070),i=n.Constants;e.exports=function(){var e=20,t=10,r=0,o=0,s=0,c=0,a=0,f=0,u=0,l=0,d=0,h=0,p=0,m=0,y=0;e|=n.isWin?2560:768,r|=i.FLG_EFS;const E={extraLen:0},w=e=>Math.max(0,e)>>>0;return s=n.fromDate2DOS(new Date),{get made(){return e},set made(t){e=t},get version(){return t},set version(e){t=e},get flags(){return r},set flags(e){r=e},get flags_efs(){return(r&i.FLG_EFS)>0},set flags_efs(e){e?r|=i.FLG_EFS:r&=~i.FLG_EFS},get flags_desc(){return(r&i.FLG_DESC)>0},set flags_desc(e){e?r|=i.FLG_DESC:r&=~i.FLG_DESC},get method(){return o},set method(e){switch(e){case i.STORED:this.version=10;case i.DEFLATED:default:this.version=20}o=e},get time(){return n.fromDOS2Date(this.timeval)},set time(e){this.timeval=n.fromDate2DOS(e)},get timeval(){return s},set timeval(e){s=w(e)},get timeHighByte(){return e=s>>>8,255&Math.max(0,e);var e},get crc(){return c},set crc(e){c=w(e)},get compressedSize(){return a},set compressedSize(e){a=w(e)},get size(){return f},set size(e){f=w(e)},get fileNameLength(){return u},set fileNameLength(e){u=e},get extraLength(){return l},set extraLength(e){l=e},get extraLocalLength(){return E.extraLen},set extraLocalLength(e){E.extraLen=e},get commentLength(){return d},set commentLength(e){d=e},get diskNumStart(){return h},set diskNumStart(e){h=w(e)},get inAttr(){return p},set inAttr(e){p=w(e)},get attr(){return m},set attr(e){m=w(e)},get fileAttr(){return(m||0)>>16&4095},get offset(){return y},set offset(e){y=w(e)},get encrypted(){return(r&i.FLG_ENC)===i.FLG_ENC},get centralHeaderSize(){return i.CENHDR+u+l+d},get realDataOffset(){return y+i.LOCHDR+E.fnameLen+E.extraLen},get localHeader(){return E},loadLocalHeaderFromBinary:function(e){var t=e.slice(y,y+i.LOCHDR);if(t.readUInt32LE(0)!==i.LOCSIG)throw n.Errors.INVALID_LOC();E.version=t.readUInt16LE(i.LOCVER),E.flags=t.readUInt16LE(i.LOCFLG),E.method=t.readUInt16LE(i.LOCHOW),E.time=t.readUInt32LE(i.LOCTIM),E.crc=t.readUInt32LE(i.LOCCRC),E.compressedSize=t.readUInt32LE(i.LOCSIZ),E.size=t.readUInt32LE(i.LOCLEN),E.fnameLen=t.readUInt16LE(i.LOCNAM),E.extraLen=t.readUInt16LE(i.LOCEXT);const r=y+i.LOCHDR+E.fnameLen,o=r+E.extraLen;return e.slice(r,o)},loadFromBinary:function(E){if(E.length!==i.CENHDR||E.readUInt32LE(0)!==i.CENSIG)throw n.Errors.INVALID_CEN();e=E.readUInt16LE(i.CENVEM),t=E.readUInt16LE(i.CENVER),r=E.readUInt16LE(i.CENFLG),o=E.readUInt16LE(i.CENHOW),s=E.readUInt32LE(i.CENTIM),c=E.readUInt32LE(i.CENCRC),a=E.readUInt32LE(i.CENSIZ),f=E.readUInt32LE(i.CENLEN),u=E.readUInt16LE(i.CENNAM),l=E.readUInt16LE(i.CENEXT),d=E.readUInt16LE(i.CENCOM),h=E.readUInt16LE(i.CENDSK),p=E.readUInt16LE(i.CENATT),m=E.readUInt32LE(i.CENATX),y=E.readUInt32LE(i.CENOFF)},localHeaderToBinary:function(){var e=Buffer.alloc(i.LOCHDR);return e.writeUInt32LE(i.LOCSIG,0),e.writeUInt16LE(t,i.LOCVER),e.writeUInt16LE(r,i.LOCFLG),e.writeUInt16LE(o,i.LOCHOW),e.writeUInt32LE(s,i.LOCTIM),e.writeUInt32LE(c,i.LOCCRC),e.writeUInt32LE(a,i.LOCSIZ),e.writeUInt32LE(f,i.LOCLEN),e.writeUInt16LE(u,i.LOCNAM),e.writeUInt16LE(E.extraLen,i.LOCEXT),e},centralHeaderToBinary:function(){var n=Buffer.alloc(i.CENHDR+u+l+d);return n.writeUInt32LE(i.CENSIG,0),n.writeUInt16LE(e,i.CENVEM),n.writeUInt16LE(t,i.CENVER),n.writeUInt16LE(r,i.CENFLG),n.writeUInt16LE(o,i.CENHOW),n.writeUInt32LE(s,i.CENTIM),n.writeUInt32LE(c,i.CENCRC),n.writeUInt32LE(a,i.CENSIZ),n.writeUInt32LE(f,i.CENLEN),n.writeUInt16LE(u,i.CENNAM),n.writeUInt16LE(l,i.CENEXT),n.writeUInt16LE(d,i.CENCOM),n.writeUInt16LE(h,i.CENDSK),n.writeUInt16LE(p,i.CENATT),n.writeUInt32LE(m,i.CENATX),n.writeUInt32LE(y,i.CENOFF),n},toJSON:function(){const s=function(e){return e+" bytes"};return{made:e,version:t,flags:r,method:n.methodToString(o),time:this.time,crc:"0x"+c.toString(16).toUpperCase(),compressedSize:s(a),size:s(f),fileNameLength:s(u),extraLength:s(l),commentLength:s(d),diskNumStart:h,inAttr:p,attr:m,offset:y,centralHeaderSize:s(i.CENHDR+u+l+d)}},toString:function(){return JSON.stringify(this.toJSON(),null,"\t")}}}},79896:e=>{"use strict";e.exports=require("fs")},80481:e=>{"use strict";e.exports=require("node:readline")},83480:e=>{"use strict";e.exports=require("querystring")},85776:(e,t,r)=>{t.Deflater=r(53601),t.Inflater=r(25821),t.ZipCrypto=r(94014)},86244:(e,t,r)=>{"use strict";const n=r(63735),i=r(16928),o=r(4423).copySync,s=r(35422).removeSync,c=r(63798).mkdirpSync,a=r(66462);function f(e,t,r){try{n.renameSync(e,t)}catch(n){if("EXDEV"!==n.code)throw n;return function(e,t,r){return o(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),s(e)}(e,t,r)}}e.exports=function(e,t,r){const o=(r=r||{}).overwrite||r.clobber||!1,{srcStat:u,isChangingCase:l=!1}=a.checkPathsSync(e,t,"move",r);return a.checkParentPathsSync(e,u,t,"move"),function(e){const t=i.dirname(e);return i.parse(t).root===t}(t)||c(i.dirname(t)),function(e,t,r,i){if(i)return f(e,t,r);if(r)return s(t),f(e,t,r);if(n.existsSync(t))throw new Error("dest already exists.");return f(e,t,r)}(e,t,o,l)}},87016:e=>{"use strict";e.exports=require("url")},89616:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,i=r(16928),o=r(98737),s=r(63798);e.exports={createFile:n((async function(e){let t;try{t=await o.stat(e)}catch{}if(t&&t.isFile())return;const r=i.dirname(e);let n=null;try{n=await o.stat(r)}catch(t){if("ENOENT"===t.code)return await s.mkdirs(r),void await o.writeFile(e,"");throw t}n.isDirectory()?await o.writeFile(e,""):await o.readdir(r)})),createFileSync:function(e){let t;try{t=o.statSync(e)}catch{}if(t&&t.isFile())return;const r=i.dirname(e);try{o.statSync(r).isDirectory()||o.readdirSync(r)}catch(e){if(!e||"ENOENT"!==e.code)throw e;s.mkdirsSync(r)}o.writeFileSync(e,"")}}},90016:(e,t,r)=>{var n=r(64070),i=r(46780),o=n.Constants,s=r(85776);e.exports=function(e,t){var r=new i.EntryHeader,c=Buffer.alloc(0),a=Buffer.alloc(0),f=!1,u=null,l=Buffer.alloc(0),d=Buffer.alloc(0),h=!0;const p=e,m="object"==typeof p.decoder?p.decoder:n.decoder;function y(){return t&&t instanceof Uint8Array?(d=r.loadLocalHeaderFromBinary(t),t.slice(r.realDataOffset,r.realDataOffset+r.compressedSize)):Buffer.alloc(0)}function E(e){if(r.flags_desc){const i={},s=r.realDataOffset+r.compressedSize;if(t.readUInt32LE(s)==o.LOCSIG||t.readUInt32LE(s)==o.CENSIG)throw n.Errors.DESCRIPTOR_NOT_EXIST();if(t.readUInt32LE(s)==o.EXTSIG)i.crc=t.readUInt32LE(s+o.EXTCRC),i.compressedSize=t.readUInt32LE(s+o.EXTSIZ),i.size=t.readUInt32LE(s+o.EXTLEN);else{if(19280!==t.readUInt16LE(s+12))throw n.Errors.DESCRIPTOR_UNKNOWN();i.crc=t.readUInt32LE(s+o.EXTCRC-4),i.compressedSize=t.readUInt32LE(s+o.EXTSIZ-4),i.size=t.readUInt32LE(s+o.EXTLEN-4)}if(i.compressedSize!==r.compressedSize||i.size!==r.size||i.crc!==r.crc)throw n.Errors.DESCRIPTOR_FAULTY();if(n.crc32(e)!==i.crc)return!1}else if(n.crc32(e)!==r.localHeader.crc)return!1;return!0}function w(e,t,i){if(void 0===t&&"string"==typeof e&&(i=e,e=void 0),f)return e&&t&&t(Buffer.alloc(0),n.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var o=y();if(0===o.length)return e&&t&&t(o),o;if(r.encrypted){if("string"!=typeof i&&!Buffer.isBuffer(i))throw n.Errors.INVALID_PASS_PARAM();o=s.ZipCrypto.decrypt(o,r,i)}var a=Buffer.alloc(r.size);switch(r.method){case n.Constants.STORED:if(o.copy(a),E(a))return e&&t&&t(a),a;throw e&&t&&t(a,n.Errors.BAD_CRC()),n.Errors.BAD_CRC();case n.Constants.DEFLATED:var u=new s.Inflater(o,r.size);if(!e){if(u.inflate(a).copy(a,0),!E(a))throw n.Errors.BAD_CRC(`"${m.decode(c)}"`);return a}u.inflateAsync((function(e){e.copy(e,0),t&&(E(e)?t(e):t(e,n.Errors.BAD_CRC()))}));break;default:throw e&&t&&t(Buffer.alloc(0),n.Errors.UNKNOWN_METHOD()),n.Errors.UNKNOWN_METHOD()}}function S(e,i){if((!u||!u.length)&&Buffer.isBuffer(t))return e&&i&&i(y()),y();if(u.length&&!f){var o;switch(r.method){case n.Constants.STORED:return r.compressedSize=r.size,o=Buffer.alloc(u.length),u.copy(o),e&&i&&i(o),o;default:case n.Constants.DEFLATED:var c=new s.Deflater(u);if(!e){var a=c.deflate();return r.compressedSize=a.length,a}c.deflateAsync((function(e){o=Buffer.alloc(e.length),r.compressedSize=e.length,e.copy(o),i&&i(o)})),c=null}}else{if(!e||!i)return Buffer.alloc(0);i(Buffer.alloc(0))}}function g(e,t){return(e.readUInt32LE(t+4)<<4)+e.readUInt32LE(t)}function v(e){var t,n,i,s;e.length>=o.EF_ZIP64_SCOMP&&(t=g(e,o.EF_ZIP64_SUNCOMP),r.size===o.EF_ZIP64_OR_32&&(r.size=t)),e.length>=o.EF_ZIP64_RHO&&(n=g(e,o.EF_ZIP64_SCOMP),r.compressedSize===o.EF_ZIP64_OR_32&&(r.compressedSize=n)),e.length>=o.EF_ZIP64_DSN&&(i=g(e,o.EF_ZIP64_RHO),r.offset===o.EF_ZIP64_OR_32&&(r.offset=i)),e.length>=o.EF_ZIP64_DSN+4&&(s=e.readUInt32LE(o.EF_ZIP64_DSN),r.diskNumStart===o.EF_ZIP64_OR_16&&(r.diskNumStart=s))}return h=!!m.hasOwnProperty("efs")&&m.efs,{get entryName(){return m.decode(c)},get rawEntryName(){return c},set entryName(e){var t=(c=n.toBuffer(e,m.encode))[c.length-1];f=47===t||92===t,r.fileNameLength=c.length},get efs(){return"function"==typeof h?h(this.entryName):h},get extra(){return l},set extra(e){l=e,r.extraLength=e.length,function(e){try{for(var t,r,i,s=0;s+4<e.length;)t=e.readUInt16LE(s),s+=2,r=e.readUInt16LE(s),s+=2,i=e.slice(s,s+r),s+=r,o.ID_ZIP64===t&&v(i)}catch(e){throw n.Errors.EXTRA_FIELD_PARSE_ERROR()}}(e)},get comment(){return m.decode(a)},set comment(e){if(a=n.toBuffer(e,m.encode),r.commentLength=a.length,a.length>65535)throw n.Errors.COMMENT_TOO_LONG()},get name(){var e=m.decode(c);return f?e.substr(e.length-1).split("/").pop():e.split("/").pop()},get isDirectory(){return f},getCompressedData:function(){return S(!1,null)},getCompressedDataAsync:function(e){S(!0,e)},setData:function(e){u=n.toBuffer(e,n.decoder.encode),!f&&u.length?(r.size=u.length,r.method=n.Constants.DEFLATED,r.crc=n.crc32(e),r.changed=!0):r.method=n.Constants.STORED},getData:function(e){return r.changed?u:w(!1,null,e)},getDataAsync:function(e,t){r.changed?e(u):w(!0,e,t)},set attr(e){r.attr=e},get attr(){return r.attr},set header(e){r.loadFromBinary(e)},get header(){return r},packCentralHeader:function(){r.flags_efs=this.efs,r.extraLength=l.length;var e=r.centralHeaderToBinary(),t=n.Constants.CENHDR;return c.copy(e,t),t+=c.length,l.copy(e,t),t+=r.extraLength,a.copy(e,t),e},packLocalHeader:function(){let e=0;r.flags_efs=this.efs,r.extraLocalLength=d.length;const t=r.localHeaderToBinary(),n=Buffer.alloc(t.length+c.length+r.extraLocalLength);return t.copy(n,e),e+=t.length,c.copy(n,e),e+=c.length,d.copy(n,e),e+=d.length,n},toJSON:function(){const e=function(e){return"<"+(e&&e.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:r.toJSON(),compressedData:e(t),data:e(u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"\t")}}}},91398:e=>{"use strict";e.exports=require("vscode")},91522:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,i=r(16928),o=r(98737),s=r(63798),{pathExists:c}=r(29288),{areIdentical:a}=r(66462);e.exports={createLink:n((async function(e,t){let r,n;try{r=await o.lstat(t)}catch{}try{n=await o.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}if(r&&a(n,r))return;const f=i.dirname(t);await c(f)||await s.mkdirs(f),await o.link(e,t)})),createLinkSync:function(e,t){let r;try{r=o.lstatSync(t)}catch{}try{const t=o.lstatSync(e);if(r&&a(t,r))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=i.dirname(t);return o.existsSync(n)||s.mkdirsSync(n),o.linkSync(e,t)}}},94014:(e,t,r)=>{"use strict";const{randomFillSync:n}=r(76982),i=r(1243),o=new Uint32Array(256).map(((e,t)=>{for(let e=0;e<8;e++)1&t?t=t>>>1^3988292384:t>>>=1;return t>>>0})),s=(e,t)=>Math.imul(e,t)>>>0,c=(e,t)=>o[255&(e^t)]^e>>>8,a=()=>"function"==typeof n?n(Buffer.alloc(12)):a.node();a.node=()=>{const e=Buffer.alloc(12),t=e.length;for(let r=0;r<t;r++)e[r]=256*Math.random()&255;return e};const f={genSalt:a};function u(e){const t=Buffer.isBuffer(e)?e:Buffer.from(e);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let e=0;e<t.length;e++)this.updateKeys(t[e])}u.prototype.updateKeys=function(e){const t=this.keys;return t[0]=c(t[0],e),t[1]+=255&t[0],t[1]=s(t[1],134775813)+1,t[2]=c(t[2],t[1]>>>24),e},u.prototype.next=function(){const e=(2|this.keys[2])>>>0;return s(e,1^e)>>8&255},e.exports={decrypt:function(e,t,r){if(!e||!Buffer.isBuffer(e)||e.length<12)return Buffer.alloc(0);const n=function(e){const t=new u(e);return function(e){const r=Buffer.alloc(e.length);let n=0;for(let i of e)r[n++]=t.updateKeys(i^t.next());return r}}(r),o=n(e.slice(0,12)),s=8&~t.flags?t.crc>>>24:t.timeHighByte;if(o[11]!==s)throw i.WRONG_PASSWORD();return n(e.slice(12))},encrypt:function(e,t,r,n=!1){null==e&&(e=Buffer.alloc(0)),Buffer.isBuffer(e)||(e=Buffer.from(e.toString()));const i=function(e){const t=new u(e);return function(e,r,n=0){r||(r=Buffer.alloc(e.length));for(let i of e){const e=t.next();r[n++]=i^e,t.updateKeys(i)}return r}}(r),o=f.genSalt();o[11]=t.crc>>>24&255,n&&(o[10]=t.crc>>>16&255);const s=Buffer.alloc(e.length+12);return i(o,s),i(e,s,12)},_salter:function(e){Buffer.isBuffer(e)&&e.length>=12?f.genSalt=function(){return e.slice(0,12)}:f.genSalt="node"===e?a.node:a}}},98737:(e,t,r)=>{"use strict";const n=r(41236).fromCallback,i=r(63735),o=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof i[e]));Object.assign(t,i),o.forEach((e=>{t[e]=n(i[e])})),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise((t=>i.exists(e,t)))},t.read=function(e,t,r,n,o,s){return"function"==typeof s?i.read(e,t,r,n,o,s):new Promise(((s,c)=>{i.read(e,t,r,n,o,((e,t,r)=>{if(e)return c(e);s({bytesRead:t,buffer:r})}))}))},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?i.write(e,t,...r):new Promise(((n,o)=>{i.write(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesWritten:t,buffer:r})}))}))},t.readv=function(e,t,...r){return"function"==typeof r[r.length-1]?i.readv(e,t,...r):new Promise(((n,o)=>{i.readv(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesRead:t,buffers:r})}))}))},t.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?i.writev(e,t,...r):new Promise(((n,o)=>{i.writev(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesWritten:t,buffers:r})}))}))},"function"==typeof i.realpath.native?t.realpath.native=n(i.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")},98916:(e,t,r)=>{"use strict";const n=r(98737),{checkPath:i}=r(17111),o=e=>"number"==typeof e?e:{mode:511,...e}.mode;e.exports.makeDir=async(e,t)=>(i(e),n.mkdir(e,{mode:o(t),recursive:!0})),e.exports.makeDirSync=(e,t)=>(i(e),n.mkdirSync(e,{mode:o(t),recursive:!0}))},98995:e=>{"use strict";e.exports=require("node:module")}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".extension.js",n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),e={792:1},n.f.require=(t,r)=>{if(!e[t]){var i=require("./"+n.u(t));e[t]||(t=>{var r=t.modules,i=t.ids,o=t.runtime;for(var s in r)n.o(r,s)&&(n.m[s]=r[s]);o&&o(n);for(var c=0;c<i.length;c++)e[i[c]]=1})(i)}};var i={};(()=>{"use strict";n.r(i),n.d(i,{activate:()=>t,deactivate:()=>r});var e=n(37342);function t(t){e.fj.start(t)}function r(){e.fj.stop()}})(),module.exports=i})();
//# sourceMappingURL=extension.js.map